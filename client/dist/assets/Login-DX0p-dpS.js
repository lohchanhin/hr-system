import{_ as w,r as p,c as y,a as o,w as l,b as n,u as v,o as V,d as b,e as k,s as x}from"./index-DoO9I7c3.js";import{u as S}from"./menu-Baduhk_s.js";import{a as h}from"./api-ZZnZ46lj.js";const I={class:"login-container"},C={__name:"Login",setup(F){const m=v(),d=S(),t=p({username:"",password:""}),i=p(null),c=async()=>{const s=await h("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t.value)});if(s.ok){const e=await s.json();x(e.token),localStorage.setItem("role",e.user.role),localStorage.setItem("employeeId",e.user.employeeId),await d.fetchMenu();const a=d.items[0];a?m.push({name:a.name}):m.push({name:"Login"})}else alert("登入失敗")};return(s,e)=>{const a=n("el-input"),r=n("el-form-item"),_=n("el-button"),f=n("el-form"),g=n("el-card");return V(),y("div",I,[o(g,{class:"login-card"},{default:l(()=>[e[3]||(e[3]=b("h2",null,"後台登入",-1)),o(f,{model:t.value,ref_key:"loginFormRef",ref:i,"label-width":"80px"},{default:l(()=>[o(r,{label:"帳號"},{default:l(()=>[o(a,{modelValue:t.value.username,"onUpdate:modelValue":e[0]||(e[0]=u=>t.value.username=u),placeholder:"請輸入帳號"},null,8,["modelValue"])]),_:1}),o(r,{label:"密碼"},{default:l(()=>[o(a,{modelValue:t.value.password,"onUpdate:modelValue":e[1]||(e[1]=u=>t.value.password=u),type:"password",placeholder:"請輸入密碼"},null,8,["modelValue"])]),_:1}),o(r,null,{default:l(()=>[o(_,{type:"primary",onClick:c},{default:l(()=>e[2]||(e[2]=[k("登入")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},B=w(C,[["__scopeId","data-v-5813476a"]]);export{B as default};
