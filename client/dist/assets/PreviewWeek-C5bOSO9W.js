import{_ as P,P as B,c as o,b as t,F as i,m as d,u as S,o as r,t as h,h as I}from"./index-B1-Hvwow.js";const C={class:"preview-page"},x={__name:"PreviewWeek",setup(F){const u=JSON.parse(sessionStorage.getItem("schedulePreview")||"{}"),v=u.scheduleMap||{},y=u.employees||[],p=u.days||[],m=u.shifts||[],f=S(),k=()=>{sessionStorage.removeItem("schedulePreview")},w=()=>{if(k(),typeof window<"u"){const{history:e}=window;if(e){if(e.length>1){f.back();return}const s=e.state;if(s&&s.back!=null){f.back();return}}}f.push({name:"Schedule"})};B(()=>{k()});function b(e,s){var n,l;const c=(l=(n=v[e])==null?void 0:n[s])==null?void 0:l.shiftId,a=m.find(g=>g._id===c);return a?a.code:""}const _=[];for(let e=0;e<p.length;e+=7)_.push(p.slice(e,e+7));return(e,s)=>(r(),o("div",C,[t("div",{class:"preview-header"},[t("button",{type:"button",class:"back-button",onClick:w},"← 返回排班"),s[0]||(s[0]=t("h2",null,"週表預覽",-1))]),(r(),o(i,null,d(_,(c,a)=>t("div",{key:a,class:"week"},[t("h3",null,"第"+h(a+1)+"週",1),t("table",null,[t("thead",null,[t("tr",null,[s[1]||(s[1]=t("th",null,"員工",-1)),(r(!0),o(i,null,d(c,n=>(r(),o("th",{key:n.date},h(n.label),1))),128))])]),t("tbody",null,[(r(!0),o(i,null,d(I(y),n=>(r(),o("tr",{key:n._id},[t("td",null,h(n.name),1),(r(!0),o(i,null,d(c,l=>(r(),o("td",{key:l.date},h(b(n._id,l.date)),1))),128))]))),128))])])])),64))]))}},M=P(x,[["__scopeId","data-v-f41c346a"]]);export{M as default};
