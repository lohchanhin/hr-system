import{_ as O,i as P,r as k,j as B,k as U,l as $,m as N,n as C,w as o,e as i,u as G,o as f,d as r,b as s,p as v,g as J,c as p,q as I,F as K,t as Q,h as S,v as X,x as Y}from"./index-DIggq0wA.js";import{u as Z}from"./menu--EyNWvE0.js";import{i as z,r as ee}from"./menuIcons-CeyEi02D.js";import"./api-D1pbDsfn.js";const te="/HR.png",ne={class:"header-left"},oe={class:"header-right"},ae={class:"sidebar-content"},le={key:0,class:"sidebar-logo-text"},se=["src","data-icon-key"],ue=["src","data-icon-key"],ie={key:2,class:"menu-text"},re={class:"main-content"},ce={__name:"ModernLayout",setup(de){const c=G(),b=Z(),{items:w}=P(b),_=k(""),y=k(!1),u=k(!1),m=k(!1),a=B(()=>u.value?!m.value:y.value),H=B(()=>u.value?"280px":y.value?"88px":"280px");function M(){if(typeof window>"u")return;const e=window.innerWidth<768;u.value=e,e||(m.value=!1)}function x(){m.value=!1}U(async()=>{typeof window<"u"&&(M(),window.addEventListener("resize",M)),w.value.length===0&&await b.fetchMenu()}),$(()=>{typeof window<"u"&&window.removeEventListener("resize",M)});function T(e){var n,d;!e||((d=(n=c.currentRoute)==null?void 0:n.value)==null?void 0:d.name)===e||(typeof c.replace=="function"?c.replace({name:e}):c.push({name:e}))}N(()=>w.value,e=>{var d,g,h;if(!Array.isArray(e)||e.length===0)return;const t=(d=e[0])==null?void 0:d.name;if(!t)return;const n=(h=(g=c.currentRoute)==null?void 0:g.value)==null?void 0:h.name;(!n||n==="Settings"||n==="ManagerLayout")&&T(t),_.value||(_.value=n&&n!=="Settings"?n:t)},{immediate:!0}),N(()=>{var e,t;return(t=(e=c.currentRoute)==null?void 0:e.value)==null?void 0:t.name},e=>{_.value=typeof e=="string"?e:"",u.value&&x()},{immediate:!0});function V(e){_.value=e,c.push({name:e}),u.value&&x()}function E(){if(u.value){m.value=!m.value;return}y.value=!y.value}function R(e){return ee(e)}function F(){Y(),b.setMenu([]),sessionStorage.removeItem("role"),sessionStorage.removeItem("employeeId"),localStorage.removeItem("role"),localStorage.removeItem("employeeId"),c.push("/")}return(e,t)=>{const n=i("el-icon"),d=i("el-button"),g=i("el-header"),h=i("el-tooltip"),A=i("el-menu-item"),W=i("el-menu"),j=i("el-aside"),q=i("router-view"),D=i("el-main"),L=i("el-container");return f(),C(L,{class:"modern-layout"},{default:o(()=>[r(g,{class:"layout-header"},{default:o(()=>[s("div",ne,[r(d,{link:"",onClick:E,class:"collapse-btn"},{default:o(()=>[r(n,{size:"20"},{default:o(()=>[s("i",{class:v(a.value?"el-icon-menu":"el-icon-close")},null,2)]),_:1})]),_:1}),t[0]||(t[0]=s("h1",{class:"system-title"},"HR 管理系統",-1))]),s("div",oe,[r(d,{type:"primary",onClick:F,class:"logout-btn"},{default:o(()=>[r(n,null,{default:o(()=>t[1]||(t[1]=[s("i",{class:"el-icon-switch-button"},null,-1)])),_:1}),t[2]||(t[2]=J(" 登出 "))]),_:1})])]),_:1}),r(L,null,{default:o(()=>[r(j,{class:v(["layout-aside",{collapsed:!u.value&&a.value,"is-open":!a.value,"is-hidden":!u.value&&a.value}]),width:H.value},{default:o(()=>[s("div",ae,[s("div",{class:v(["sidebar-logo",{collapsed:a.value}])},[t[3]||(t[3]=s("img",{src:te,alt:"HR 管理系統",class:"sidebar-logo-image"},null,-1)),a.value?I("",!0):(f(),p("span",le,"HR 管理系統"))],2),r(W,{"default-active":_.value,collapse:a.value,class:"sidebar-menu","background-color":"transparent","text-color":"#ecfeff","active-text-color":"#ffffff"},{default:o(()=>[(f(!0),p(K,null,Q(S(w),l=>(f(),C(A,{key:l.name,index:l.name,onClick:fe=>V(l.name),class:"menu-item"},{default:o(()=>[s("div",{class:v(["menu-item-inner",{"is-collapsed":a.value}])},[a.value?(f(),C(h,{key:0,content:l.label,placement:"right",effect:"dark"},{default:o(()=>[s("img",{src:R(l),class:"menu-icon","data-icon-key":S(z)[l.icon]?l.icon:"default",alt:""},null,8,se)]),_:2},1032,["content"])):(f(),p("img",{key:1,src:R(l),class:"menu-icon","data-icon-key":S(z)[l.icon]?l.icon:"default",alt:""},null,8,ue)),a.value?I("",!0):(f(),p("span",ie,X(l.label),1))],2)]),_:2},1032,["index","onClick"]))),128))]),_:1},8,["default-active","collapse"])])]),_:1},8,["class","width"]),u.value?(f(),p("div",{key:0,class:v(["hr-mobile-overlay",{"is-open":m.value}]),onClick:x},null,2)):I("",!0),r(D,{class:v(["layout-main",{"with-sidebar":!u.value&&!a.value}])},{default:o(()=>[s("div",re,[r(q)])]),_:1},8,["class"])]),_:1})]),_:1})}}},ye=O(ce,[["__scopeId","data-v-ea5e3637"]]);export{ye as default};
