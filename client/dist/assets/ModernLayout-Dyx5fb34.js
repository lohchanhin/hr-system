import{_ as L,i as N,r as h,j as T,k as y,l as k,w as o,e as s,u as F,o as v,d as a,b as l,n as x,g as V,c as z,F as A,m as j,h as D,t as E,p as H}from"./index-CebWlRJQ.js";import{u as P}from"./menu-BiGAz-sh.js";import"./api-CqhP5PeV.js";const $={class:"header-left"},q={class:"header-right"},G={class:"sidebar-content"},J={class:"menu-text"},K={class:"main-content"},O={__name:"ModernLayout",setup(Q){const u=F(),f=P(),{items:p}=N(f),r=h(""),i=h(!1);T(async()=>{p.value.length===0&&await f.fetchMenu()});function b(e){var n,c;!e||((c=(n=u.currentRoute)==null?void 0:n.value)==null?void 0:c.name)===e||(typeof u.replace=="function"?u.replace({name:e}):u.push({name:e}))}y(()=>p.value,e=>{var c,d,m;if(!Array.isArray(e)||e.length===0)return;const t=(c=e[0])==null?void 0:c.name;if(!t)return;const n=(m=(d=u.currentRoute)==null?void 0:d.value)==null?void 0:m.name;(!n||n==="Settings"||n==="ManagerLayout")&&b(t),r.value||(r.value=n&&n!=="Settings"?n:t)},{immediate:!0}),y(()=>{var e,t;return(t=(e=u.currentRoute)==null?void 0:e.value)==null?void 0:t.name},e=>{r.value=typeof e=="string"?e:""},{immediate:!0});function w(e){r.value=e,u.push({name:e})}function C(){i.value=!i.value}function M(){H(),f.setMenu([]),sessionStorage.removeItem("role"),sessionStorage.removeItem("employeeId"),u.push("/")}return(e,t)=>{const n=s("el-icon"),c=s("el-button"),d=s("el-header"),m=s("el-menu-item"),S=s("el-menu"),R=s("el-aside"),I=s("router-view"),B=s("el-main"),g=s("el-container");return v(),k(g,{class:"modern-layout"},{default:o(()=>[a(d,{class:"layout-header"},{default:o(()=>[l("div",$,[a(c,{link:"",onClick:C,class:"collapse-btn"},{default:o(()=>[a(n,{size:"20"},{default:o(()=>[l("i",{class:x(i.value?"el-icon-menu":"el-icon-close")},null,2)]),_:1})]),_:1}),t[0]||(t[0]=l("h1",{class:"system-title"},"HR 管理系統",-1))]),l("div",q,[a(c,{type:"primary",onClick:M,class:"logout-btn"},{default:o(()=>[a(n,null,{default:o(()=>t[1]||(t[1]=[l("i",{class:"el-icon-switch-button"},null,-1)])),_:1}),t[2]||(t[2]=V(" 登出 "))]),_:1})])]),_:1}),a(g,null,{default:o(()=>[a(R,{class:"layout-aside",width:i.value?"64px":"280px"},{default:o(()=>[l("div",G,[a(S,{"default-active":r.value,collapse:i.value,class:"sidebar-menu","background-color":"#164e63","text-color":"#ecfeff","active-text-color":"#ffffff"},{default:o(()=>[(v(!0),z(A,null,j(D(p),_=>(v(),k(m,{key:_.name,index:_.name,onClick:U=>w(_.name),class:"menu-item"},{default:o(()=>[a(n,null,{default:o(()=>[l("i",{class:x(_.icon)},null,2)]),_:2},1024),l("span",J,E(_.label),1)]),_:2},1032,["index","onClick"]))),128))]),_:1},8,["default-active","collapse"])])]),_:1},8,["width"]),a(B,{class:"layout-main"},{default:o(()=>[l("div",K,[a(I)])]),_:1})]),_:1})]),_:1})}}},Z=L(O,[["__scopeId","data-v-644a425d"]]);export{Z as default};
