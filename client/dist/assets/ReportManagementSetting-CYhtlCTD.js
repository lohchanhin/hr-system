import{_ as O,r as b,c as M,b as p,d as e,w as t,e as n,o as F,g as m,t as B,F as Q,l as W,k as X,v as Y}from"./index-C25OXyZh.js";const Z={class:"report-management-setting"},h={class:"tab-content"},ee={class:"field-list"},le={slot:"footer",class:"dialog-footer"},te={class:"tab-content"},oe={class:"tab-content"},ae={class:"tab-content"},ne={__name:"ReportManagementSetting",setup(ue){const S=b("template"),y=b([{name:"出勤統計報表",type:"出勤",fields:["員工姓名","部門","應出勤天數","實際出勤天數","遲到次數","早退次數"]},{name:"請假統計報表",type:"請假",fields:["員工姓名","部門","請假天數","請假類型","剩餘特休"]}]),g=b(!1);let w=null;const u=b({name:"",type:"",fields:[]}),V=b("");function N(r=null){r!==null?(w=r,u.value={...y.value[r]}):(w=null,u.value={name:"",type:"",fields:[]}),V.value="",g.value=!0}function R(){V.value.trim()&&(u.value.fields.push(V.value.trim()),V.value="")}function $(r){u.value.fields.splice(r,1)}function q(){w===null?y.value.push({...u.value}):y.value[w]={...u.value},g.value=!1}function A(r){y.value.splice(r,1)}const i=b({formats:["PDF","Excel"],includeLogo:!0,footerNote:"機密文件，請勿外流"});function P(){console.log("儲存匯出設定",i.value),alert("已儲存「匯出格式與樣式」設定")}const d=b({supervisorDept:!0,hrAllDept:!0,employeeDownload:!0,historyMonths:6});function H(){console.log("儲存權限與範圍設定",d.value),alert("已儲存「權限與範圍」設定")}const s=b({autoSend:!1,sendFrequency:"",recipients:[]});function I(){console.log("儲存報表通知設定",s.value),alert("已儲存「通知與寄送」設定")}return(r,l)=>{const v=n("el-button"),x=n("el-table-column"),K=n("el-table"),D=n("el-input"),a=n("el-form-item"),f=n("el-option"),E=n("el-select"),j=n("el-tag"),C=n("el-form"),z=n("el-dialog"),U=n("el-tab-pane"),_=n("el-checkbox"),T=n("el-checkbox-group"),c=n("el-switch"),G=n("el-input-number"),J=n("el-tabs");return F(),M("div",Z,[l[27]||(l[27]=p("h2",null,"報表管理設定",-1)),e(J,{modelValue:S.value,"onUpdate:modelValue":l[16]||(l[16]=o=>S.value=o),type:"card"},{default:t(()=>[e(U,{label:"報表模板管理",name:"template"},{default:t(()=>[p("div",h,[e(v,{type:"primary",onClick:l[0]||(l[0]=o=>N())},{default:t(()=>l[17]||(l[17]=[m("新增報表模板")])),_:1}),e(K,{data:y.value,style:{"margin-top":"20px"}},{default:t(()=>[e(x,{prop:"name",label:"報表名稱",width:"180"}),e(x,{prop:"type",label:"類型",width:"120"}),e(x,{prop:"fields",label:"欄位數"},{default:t(({row:o})=>[m(B(o.fields.length)+" 項 ",1)]),_:1}),e(x,{label:"操作",width:"180"},{default:t(({row:o,$index:k})=>[e(v,{type:"primary",onClick:L=>N(k)},{default:t(()=>l[18]||(l[18]=[m("編輯")])),_:2},1032,["onClick"]),e(v,{type:"danger",onClick:L=>A(k)},{default:t(()=>l[19]||(l[19]=[m("刪除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(z,{modelValue:g.value,"onUpdate:modelValue":l[5]||(l[5]=o=>g.value=o),title:"報表模板設定",width:"600px"},{default:t(()=>[e(C,{model:u.value,"label-width":"120px"},{default:t(()=>[e(a,{label:"報表名稱"},{default:t(()=>[e(D,{modelValue:u.value.name,"onUpdate:modelValue":l[1]||(l[1]=o=>u.value.name=o),placeholder:"如：出勤統計報表 / 請假統計 / 薪資明細..."},null,8,["modelValue"])]),_:1}),e(a,{label:"類型"},{default:t(()=>[e(E,{modelValue:u.value.type,"onUpdate:modelValue":l[2]||(l[2]=o=>u.value.type=o),placeholder:"選擇報表類型"},{default:t(()=>[e(f,{label:"出勤",value:"出勤"}),e(f,{label:"請假",value:"請假"}),e(f,{label:"加班/補休",value:"加班補休"}),e(f,{label:"薪資",value:"薪資"}),e(f,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),e(a,{label:"欄位列表"},{default:t(()=>[p("div",ee,[(F(!0),M(Q,null,W(u.value.fields,(o,k)=>(F(),X(j,{key:k,closable:"",onClose:L=>$(k),style:{margin:"4px"}},{default:t(()=>[m(B(o),1)]),_:2},1032,["onClose"]))),128)),e(D,{modelValue:V.value,"onUpdate:modelValue":l[3]||(l[3]=o=>V.value=o),placeholder:"輸入欄位名稱後按 Enter",onKeyup:Y(R,["enter"]),style:{width:"100%","margin-top":"4px"}},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"]),p("span",le,[e(v,{onClick:l[4]||(l[4]=o=>g.value=!1)},{default:t(()=>l[20]||(l[20]=[m("取消")])),_:1}),e(v,{type:"primary",onClick:q},{default:t(()=>l[21]||(l[21]=[m("儲存")])),_:1})])]),_:1},8,["modelValue"])])]),_:1}),e(U,{label:"匯出格式與樣式",name:"export"},{default:t(()=>[p("div",te,[e(C,{model:i.value,"label-width":"160px"},{default:t(()=>[e(a,{label:"支援匯出格式"},{default:t(()=>[e(T,{modelValue:i.value.formats,"onUpdate:modelValue":l[6]||(l[6]=o=>i.value.formats=o)},{default:t(()=>[e(_,{label:"PDF"}),e(_,{label:"Excel"}),e(_,{label:"CSV"})]),_:1},8,["modelValue"])]),_:1}),e(a,{label:"是否包含公司 Logo"},{default:t(()=>[e(c,{modelValue:i.value.includeLogo,"onUpdate:modelValue":l[7]||(l[7]=o=>i.value.includeLogo=o)},null,8,["modelValue"])]),_:1}),e(a,{label:"頁尾備註"},{default:t(()=>[e(D,{modelValue:i.value.footerNote,"onUpdate:modelValue":l[8]||(l[8]=o=>i.value.footerNote=o),placeholder:"如：機密文件/僅供內部參考"},null,8,["modelValue"])]),_:1}),e(a,null,{default:t(()=>[e(v,{type:"primary",onClick:P},{default:t(()=>l[22]||(l[22]=[m("儲存匯出設定")])),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),e(U,{label:"權限與範圍",name:"permission"},{default:t(()=>[p("div",oe,[e(C,{model:d.value,"label-width":"180px"},{default:t(()=>[e(a,{label:"主管可查部門彙總報表"},{default:t(()=>[e(c,{modelValue:d.value.supervisorDept,"onUpdate:modelValue":l[9]||(l[9]=o=>d.value.supervisorDept=o)},null,8,["modelValue"])]),_:1}),e(a,{label:"HR 可查所有部門報表"},{default:t(()=>[e(c,{modelValue:d.value.hrAllDept,"onUpdate:modelValue":l[10]||(l[10]=o=>d.value.hrAllDept=o)},null,8,["modelValue"])]),_:1}),e(a,{label:"員工是否可下載個人報表"},{default:t(()=>[e(c,{modelValue:d.value.employeeDownload,"onUpdate:modelValue":l[11]||(l[11]=o=>d.value.employeeDownload=o)},null,8,["modelValue"])]),_:1}),e(a,{label:"報表歷史可查詢 (月)"},{default:t(()=>[e(G,{modelValue:d.value.historyMonths,"onUpdate:modelValue":l[12]||(l[12]=o=>d.value.historyMonths=o),min:1},null,8,["modelValue"]),l[23]||(l[23]=p("small",null,"可查詢往前幾個月報表？",-1))]),_:1}),e(a,null,{default:t(()=>[e(v,{type:"primary",onClick:H},{default:t(()=>l[24]||(l[24]=[m("儲存權限設定")])),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),e(U,{label:"通知與寄送",name:"notification"},{default:t(()=>[p("div",ae,[e(C,{model:s.value,"label-width":"160px"},{default:t(()=>[e(a,{label:"自動寄送報表"},{default:t(()=>[e(c,{modelValue:s.value.autoSend,"onUpdate:modelValue":l[13]||(l[13]=o=>s.value.autoSend=o)},null,8,["modelValue"]),l[25]||(l[25]=p("small",null,"若啟用，可設定排程定期寄送",-1))]),_:1}),e(a,{label:"寄送頻率"},{default:t(()=>[e(E,{modelValue:s.value.sendFrequency,"onUpdate:modelValue":l[14]||(l[14]=o=>s.value.sendFrequency=o),disabled:!s.value.autoSend},{default:t(()=>[e(f,{label:"每日",value:"daily"}),e(f,{label:"每週",value:"weekly"}),e(f,{label:"每月",value:"monthly"})]),_:1},8,["modelValue","disabled"])]),_:1}),e(a,{label:"寄送對象 (多選)"},{default:t(()=>[e(T,{modelValue:s.value.recipients,"onUpdate:modelValue":l[15]||(l[15]=o=>s.value.recipients=o),disabled:!s.value.autoSend},{default:t(()=>[e(_,{label:"主管"}),e(_,{label:"HR"}),e(_,{label:"員工本人"}),e(_,{label:"財務"})]),_:1},8,["modelValue","disabled"])]),_:1}),e(a,null,{default:t(()=>[e(v,{type:"primary",onClick:I},{default:t(()=>l[26]||(l[26]=[m("儲存通知設定")])),_:1})]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["modelValue"])])}}},se=O(ne,[["__scopeId","data-v-130cde20"]]);export{se as default};
