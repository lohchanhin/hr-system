import{a as N}from"./api-747mdiEG.js";import{e as Ae,o as Ke}from"./fieldOptions-BCLrdzho.js";import{_ as Ue,r as v,j as I,m as qe,k as Re,c as A,o as h,b,d as l,w as i,e as y,v as R,F as D,t as z,n as J,g as c,q as me,h as Je,B as ee,E as _}from"./index-BkCwXqkM.js";const $e={class:"other-control-setting"},Ie={class:"tab-content"},De={class:"dictionary-action-row"},ze={class:"dictionary-header"},Me={class:"hint"},Be={class:"dictionary-controls"},je={class:"tab-content"},Pe={class:"list-action-row"},He={class:"tab-content"},Ge={class:"list-action-row"},We={class:"dialog-footer"},Ye={class:"dialog-footer"},Qe={class:"options-editor"},Xe={class:"dialog-footer"},Ze={__name:"OtherControlSetting",setup(ye){var fe;const M=v("item-setting"),L=v([]),K=v(!1),B=v("create"),g=v({id:"",name:"",code:"",description:"",builtin:!1}),ve=I(()=>B.value==="edit"?"編輯分類":"新增分類"),V=v([{key:"C03",label:"職稱"},{key:"C04",label:"執業職稱"},{key:"C05",label:"語言能力"},{key:"C06",label:"身障等級"},{key:"C07",label:"身分類別"},{key:"C08",label:"教育程度"},{key:"C09",label:"緊急聯絡人稱謂"},{key:"C10",label:"教育訓練積分類別"},{key:"C11",label:"班別設定"},{key:"C12",label:"假別類別"},{key:"C13",label:"加班原因"},{key:"C14",label:"津貼項目"}]);function te(...t){for(const e of t)if(typeof e=="string"&&e.length)return e;return""}function le(t){if(typeof t=="string")return{name:t,code:t};if(t&&typeof t=="object"){const e=typeof t.name=="string"?t.name:te(t.label,t.text,t.display,t.value,t.code),o=typeof t.code=="string"?t.code:te(t.value,t.key,t.name,t.label);return{...t,name:e||o||"",code:o||e||""}}return{name:"",code:""}}function j(t){if(!t||typeof t!="object")return null;const e=[t.name,t.label],o=[t.code,t.value];let n="";for(const d of e)if(typeof d=="string"&&d.trim()){n=d.trim();break}let r="";for(const d of o)if(typeof d=="string"&&d.trim()){r=d.trim();break}r||(r=n);const s=typeof t.id=="string"&&t.id.trim()?t.id.trim():typeof t._id=="string"&&t._id.trim()?t._id.trim():r||n;return s?{id:s,name:n||r||s,code:r||n||s,description:typeof t.description=="string"?t.description:"",builtin:!!t.builtin}:null}const P=["select","checkbox","composite"];let be=0;function H(t={}){return{id:be++,name:typeof t.name=="string"?t.name:"",code:typeof t.code=="string"?t.code:""}}function ge(t){const e=Ke(t);return e.length?e.map(o=>H(o)):[]}const Ce={C03:[{name:"人資專員",code:"HR-S"},{name:"工程師",code:"ENG"}],C04:[{name:"護理師",code:"NURSE"},{name:"會計師",code:"CPA"}],C05:[{name:"英文 — 流利",code:"EN_FL"},{name:"日文 — 進階",code:"JP_ADV"}],C06:[{name:"第一類中度",code:"DISA_MID"},{name:"第二類輕度",code:"DISA_LIGHT"}],C07:[{name:"正式員工",code:"FULLTIME"},{name:"約聘人員",code:"CONTRACT"}],C08:[{name:"博士",code:"PHD"},{name:"大學",code:"BACHELOR"}],C09:[{name:"先生",code:"MR"},{name:"女士",code:"MS"}],C10:[{name:"專業課程",code:"PROFESSIONAL"},{name:"基礎課程",code:"BASIC"}],C11:[{name:"日班",code:"DAY"},{name:"晚班",code:"NIGHT"}],C12:[{name:"特休假",code:"ANNUAL"},{name:"病假",code:"SICK"}],C13:[{name:"專案需求",code:"PROJECT"},{name:"排班調整",code:"SCHEDULE"}],C14:[{name:"交通津貼",code:"TRAFFIC"},{name:"餐費補助",code:"MEAL"}]};function G(){const t={};return V.value.forEach(e=>{const o=Ce[e.key]||[];t[e.key]=o.map(n=>le(n))}),t}const S=v(G()),k=v(((fe=V.value[0])==null?void 0:fe.key)??""),U=v(!1),F=v(-1),p=v({dictionaryKey:k.value,name:"",code:""}),_e=I(()=>{var t;return((t=V.value.find(e=>e.key===k.value))==null?void 0:t.label)||""}),we=I(()=>F.value>-1?"編輯字典選項":"新增字典選項"),ae=[{label:"文字輸入",value:"text"},{label:"多行文字",value:"textarea"},{label:"數字輸入",value:"number"},{label:"單選選項",value:"select"},{label:"複選",value:"checkbox"},{label:"複合加選",value:"composite"},{label:"日期",value:"date"},{label:"時間區間",value:"timeRange"},{label:"布林選項",value:"boolean"}],ke=ae.reduce((t,e)=>({...t,[e.value]:e.label}),{}),oe=[{label:"員工證字號",fieldKey:"nationalId",type:"text",category:"employee",group:"基本資料",required:!0,description:"供報稅與投保使用"},{label:"制服尺寸",fieldKey:"uniformSize",type:"select",category:"employee",group:"報到資訊",required:!1,description:"入職前通知行政備貨"},{label:"職稱選單 (C03)",fieldKey:"C03",type:"select",category:"dictionary",group:"職務設定",required:!0,description:"維護員工職稱清單"},{label:"執業職稱選單 (C04)",fieldKey:"C04",type:"select",category:"dictionary",group:"職務設定",required:!1,description:"提供專業人員執業職稱選項"},{label:"語言能力庫 (C05)",fieldKey:"C05",type:"composite",category:"dictionary",group:"基本資料",required:!1,description:"設定可勾選的語言能力與層級"},{label:"身障等級 (C06)",fieldKey:"C06",type:"select",category:"dictionary",group:"基本資料",required:!1,description:"維護身心障礙手冊等級"},{label:"身分類別 (C07)",fieldKey:"C07",type:"select",category:"dictionary",group:"基本資料",required:!1,description:"設定身份註記分類"},{label:"教育程度 (C08)",fieldKey:"C08",type:"select",category:"dictionary",group:"學歷資料",required:!1,description:"維護教育程度選單"},{label:"緊急聯絡人稱謂 (C09)",fieldKey:"C09",type:"select",category:"dictionary",group:"聯絡資訊",required:!1,description:"提供緊急聯絡人稱謂選項"},{label:"教育訓練積分類別 (C10)",fieldKey:"C10",type:"select",category:"dictionary",group:"教育訓練",required:!1,description:"維護教育訓練積分類別"},{label:"班別名稱 (C11)",fieldKey:"C11_name",type:"text",category:"dictionary",group:"班別設定",required:!0,description:"顯示於班別選單的名稱"},{label:"班別說明 (C11)",fieldKey:"C11_content",type:"textarea",category:"dictionary",group:"班別設定",required:!1,description:"補充班別內容或注意事項"},{label:"班別時段 (C11)",fieldKey:"C11_timeRange",type:"timeRange",category:"dictionary",group:"班別設定",required:!0,description:"設定班別的起訖時間"},{label:"休息是否計薪 (C11)",fieldKey:"C11_paidBreak",type:"boolean",category:"dictionary",group:"班別設定",required:!1,description:"決定休息時間是否計薪"},{label:"允許彈性時間 (C11)",fieldKey:"C11_allowFlexTime",type:"boolean",category:"dictionary",group:"班別設定",required:!1,description:"是否允許彈性前後時間"},{label:"彈性區間分鐘數 (C11)",fieldKey:"C11_flexWindow",type:"number",category:"dictionary",group:"班別設定",required:!1,description:"可彈性調整的分鐘數"},{label:"假別類別 (C12)",fieldKey:"C12",type:"select",category:"dictionary",group:"假別設定",required:!0,description:"維護假別類別與對應設定"},{label:"加班原因 (C13)",fieldKey:"C13",type:"select",category:"dictionary",group:"加班設定",required:!1,description:"設定常用的加班原因"},{label:"津貼項目 (C14)",fieldKey:"C14",type:"select",category:"dictionary",group:"薪資設定",required:!1,description:"維護津貼或補貼項目"}],w=v([...oe]),q=v(!1),$=v(-1),u=v({label:"",fieldKey:"",type:"text",category:"",group:"",required:!1,description:"",options:void 0,optionsList:[]}),W=I(()=>P.includes(u.value.type));function ie(){Array.isArray(u.value.optionsList)||(u.value.optionsList=[]),W.value&&(u.value.optionsList.length||u.value.optionsList.push(H()))}qe(()=>u.value.type,t=>{P.includes(t)&&ie()});function ne(){Array.isArray(u.value.optionsList)||(u.value.optionsList=[]),u.value.optionsList.push(H())}function Ve(t){!Array.isArray(u.value.optionsList)||t<0||(u.value.optionsList.splice(t,1),W.value&&u.value.optionsList.length===0&&ne())}function se(t,e){if(!Array.isArray(u.value.optionsList))return;const o=t+e;if(o<0||o>=u.value.optionsList.length)return;const n=u.value.optionsList,[r]=n.splice(t,1);n.splice(o,0,r)}Re(()=>{Se(),re()});async function Se(){var t;try{const e=await N("/api/other-control-settings",{method:"GET"},{autoRedirect:!1});if(e.ok){const o=await e.json();if(Array.isArray(o.customFields)&&o.customFields.length?w.value=o.customFields:w.value=[...oe],o.itemSettings&&typeof o.itemSettings=="object"){Object.keys(o.itemSettings).forEach(r=>{V.value.some(s=>s.key===r)||V.value.push({key:r,label:r})});const n=G();V.value.forEach(r=>{Array.isArray(o.itemSettings[r.key])&&(n[r.key]=o.itemSettings[r.key].map(s=>le(s)))}),S.value=n,V.value.some(r=>r.key===k.value)||(k.value=((t=V.value[0])==null?void 0:t.key)??"")}else S.value=G();if(Array.isArray(o.formCategories)){const n=o.formCategories.map(j).filter(Boolean);n.length&&(L.value=n)}}}catch(e){console.warn("載入其他控制設定失敗：",e)}}async function re(){try{const t=await N("/api/other-control-settings/form-categories",{method:"GET"},{autoRedirect:!1});if(!t.ok)return;const e=await t.json();if(!Array.isArray(e))return;const o=e.map(j).filter(Boolean);L.value=o}catch(t){console.warn("載入表單分類失敗：",t)}}function de(t="create",e=null){B.value=t,t==="edit"&&e?g.value={id:e.id,name:e.name,code:e.code,description:e.description||"",builtin:!!e.builtin}:g.value={id:"",name:"",code:"",description:"",builtin:!1},K.value=!0}async function Oe(){const t=(g.value.name||"").trim(),e=(g.value.code||"").trim()||t;if(!t||!e){_.warning("分類名稱與識別碼為必填");return}const o={name:t,code:e,description:(g.value.description||"").trim()},n=B.value==="edit"&&g.value.id,r=n?`/api/other-control-settings/form-categories/${g.value.id}`:"/api/other-control-settings/form-categories";try{const s=await N(r,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},{autoRedirect:!1}),d=await s.text().catch(()=>"");let f=null;if(d)try{f=JSON.parse(d)}catch{}if(!s.ok){const T=(f==null?void 0:f.error)||(f==null?void 0:f.message)||d||"儲存分類失敗，請稍後再試";throw new Error(T)}const m=j(f);if(m)if(n){const T=L.value.findIndex(C=>C.id===m.id);T>-1&&L.value.splice(T,1,m)}else L.value.push(m);else await re();K.value=!1;const Y=n?"已更新分類":"已新增分類";_.success(Y)}catch(s){const d=(s==null?void 0:s.message)||"儲存分類失敗，請稍後再試";_.error(d)}}async function he(t){if(t!=null&&t.id){if(t.builtin){_.warning("內建分類不可刪除");return}try{await ee.confirm("確定要刪除此分類嗎？","提醒",{type:"warning"})}catch{return}try{const e=await N(`/api/other-control-settings/form-categories/${t.id}`,{method:"DELETE"},{autoRedirect:!1}),o=await e.text().catch(()=>"");if(!e.ok){let n="刪除分類失敗，請稍後再試";if(o)try{const r=JSON.parse(o);n=(r==null?void 0:r.error)||(r==null?void 0:r.message)||n}catch{n=o}throw new Error(n)}L.value=L.value.filter(n=>n.id!==t.id),_.success("已刪除分類")}catch(e){const o=(e==null?void 0:e.message)||"刪除分類失敗，請稍後再試";_.error(o)}}}async function ue(t="已儲存字典項目設定"){const e=S.value,o="儲存字典項目時發生問題，請稍後再試";try{const n=await N("/api/other-control-settings/item-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},{autoRedirect:!1}),r=await n.text().catch(()=>"");let s=null;if(r)try{s=JSON.parse(r)}catch(d){console.warn("解析儲存字典項目回應時發生錯誤：",d)}if(!n.ok){const d=(s==null?void 0:s.message)||o;throw r&&!(s!=null&&s.message)&&console.error("儲存字典項目失敗回應：",r),new Error(d)}return t&&_.success(t),s??!0}catch(n){return console.error("儲存字典項目時發生例外：",n),_.error((n==null?void 0:n.message)||o),!1}}function ce(t=k.value,e=-1){var o,n;if(t&&(k.value=t),F.value=e,e>-1){const r=(o=S.value[t])==null?void 0:o[e];r&&(p.value={dictionaryKey:t,name:r.name,code:r.code})}else p.value={dictionaryKey:t||((n=V.value[0])==null?void 0:n.key)||"",name:"",code:""};U.value=!0}async function Ee(){if(!p.value.name||!p.value.code||!p.value.dictionaryKey){_.warning("請完整填寫字典與選項資訊");return}const t=JSON.parse(JSON.stringify(S.value)),e=p.value.dictionaryKey,o=[...t[e]||[]];F.value>-1?o.splice(F.value,1,{name:p.value.name,code:p.value.code}):o.push({name:p.value.name,code:p.value.code}),S.value={...t,[e]:o};const n=F.value>-1?"已更新字典選項":"已新增字典選項";await ue(n)?U.value=!1:S.value=t}async function Le(t,e){if(!t||e<0)return;try{await ee.confirm("確定要刪除此選項嗎？","提醒",{type:"warning"})}catch{return}const o=JSON.parse(JSON.stringify(S.value)),n=[...o[t]||[]];n.splice(e,1),S.value={...o,[t]:n},await ue("已刪除字典選項")||(S.value=o)}function pe(t=-1){if($.value=t,t>-1){const e=w.value[t]||{};u.value={...e,options:e.options,optionsList:ge(e.options)}}else u.value={label:"",fieldKey:"",type:"text",category:"",group:"",required:!1,description:"",options:void 0,optionsList:[]};ie(),q.value=!0}async function Te(){if(!u.value.label||!u.value.fieldKey){_.warning("欄位名稱與識別代碼為必填");return}const t=JSON.parse(JSON.stringify(w.value)),e=P.includes(u.value.type);let o;e&&(o=Ae(u.value.optionsList));const n={...u.value};e&&o!==void 0?n.options=o:delete n.options,delete n.optionsList;const r=JSON.parse(JSON.stringify(n));$.value>-1?w.value.splice($.value,1,r):w.value.push(r);try{const s=await N("/api/other-control-settings/custom-fields",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({customFields:w.value})},{autoRedirect:!1});if(!s.ok){let d="";try{d=await s.text()}catch(m){console.warn("讀取儲存自訂欄位回應失敗：",m)}let f="儲存自訂欄位失敗，請稍後再試";if(d)try{const m=JSON.parse(d);m!=null&&m.message&&(f=m.message)}catch{f=d}throw new Error(f)}q.value=!1,$.value=-1,_.success("已更新自訂欄位")}catch(s){w.value=t;const d=(s==null?void 0:s.message)||"儲存自訂欄位失敗，請稍後再試";_.error(d)}}async function Ne(t){try{await ee.confirm("確定要刪除此欄位嗎？","提醒",{type:"warning"})}catch{return}const e=JSON.parse(JSON.stringify(w.value));w.value.splice(t,1);try{const o=await N("/api/other-control-settings/custom-fields",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({customFields:w.value})},{autoRedirect:!1});if(!o.ok){let n="";try{n=await o.text()}catch(s){console.warn("讀取刪除自訂欄位回應失敗：",s)}let r="刪除自訂欄位失敗，請稍後再試";if(n)try{const s=JSON.parse(n);s!=null&&s.message&&(r=s.message)}catch{r=n}throw new Error(r)}_.success("已刪除自訂欄位")}catch(o){w.value=e;const n=(o==null?void 0:o.message)||"刪除自訂欄位失敗，請稍後再試";_.error(n)}}return(t,e)=>{const o=y("el-alert"),n=y("el-option"),r=y("el-select"),s=y("el-button"),d=y("el-table-column"),f=y("el-table"),m=y("el-tab-pane"),Y=y("el-tag"),T=y("el-tabs"),C=y("el-form-item"),E=y("el-input"),Q=y("el-form"),X=y("el-dialog"),Fe=y("el-switch"),Z=y("el-col"),xe=y("el-row");return h(),A("div",$e,[e[43]||(e[43]=b("h2",null,"其他控制設定",-1)),l(T,{modelValue:M.value,"onUpdate:modelValue":e[4]||(e[4]=a=>M.value=a),type:"border-card"},{default:i(()=>[l(m,{label:"字典項目",name:"item-setting"},{default:i(()=>[b("div",Ie,[l(o,{title:"維護人資字典選項，確保報到與流程表單可即時使用最新的項目",type:"info","show-icon":"",class:"info-alert"}),b("div",De,[b("div",ze,[b("h3",null,R(_e.value),1),b("span",Me,"字典代碼："+R(k.value),1)]),b("div",Be,[l(r,{modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=a=>k.value=a),size:"small",class:"dictionary-select"},{default:i(()=>[(h(!0),A(D,null,z(V.value,a=>(h(),J(n,{key:a.key,label:`${a.key} ${a.label}`,value:a.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(s,{type:"primary",size:"small",onClick:e[1]||(e[1]=a=>ce())},{default:i(()=>[...e[23]||(e[23]=[c("新增選項",-1)])]),_:1})])]),l(f,{data:S.value[k.value]||[],border:""},{default:i(()=>[l(d,{type:"index",width:"60",label:"#"}),l(d,{prop:"name",label:"選項名稱"}),l(d,{prop:"code",label:"代碼",width:"160"}),l(d,{label:"操作",width:"200"},{default:i(({$index:a})=>[l(s,{size:"small",onClick:O=>ce(k.value,a)},{default:i(()=>[...e[24]||(e[24]=[c("編輯",-1)])]),_:1},8,["onClick"]),l(s,{size:"small",type:"danger",onClick:O=>Le(k.value,a)},{default:i(()=>[...e[25]||(e[25]=[c("刪除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1}),l(m,{label:"表單分類",name:"form-category"},{default:i(()=>[b("div",je,[l(o,{title:"維護簽核表單分類，提供前台建立與過濾流程樣板時使用",type:"info","show-icon":"",class:"info-alert"}),b("div",Pe,[l(s,{type:"primary",onClick:e[2]||(e[2]=a=>de())},{default:i(()=>[...e[26]||(e[26]=[c("新增分類",-1)])]),_:1})]),l(f,{data:L.value,border:""},{default:i(()=>[l(d,{type:"index",width:"60",label:"#"}),l(d,{prop:"name",label:"分類名稱",width:"200"}),l(d,{prop:"code",label:"識別碼",width:"180"}),l(d,{label:"說明"},{default:i(({row:a})=>[c(R(a.description||"—"),1)]),_:1}),l(d,{label:"狀態",width:"120"},{default:i(({row:a})=>[a.builtin?(h(),J(Y,{key:0,size:"small",type:"info"},{default:i(()=>[...e[27]||(e[27]=[c("內建",-1)])]),_:1})):me("",!0)]),_:1}),l(d,{label:"操作",width:"220"},{default:i(({row:a})=>[l(s,{size:"small",onClick:O=>de("edit",a)},{default:i(()=>[...e[28]||(e[28]=[c("編輯",-1)])]),_:1},8,["onClick"]),l(s,{size:"small",type:"danger",disabled:a.builtin,onClick:O=>he(a)},{default:i(()=>[...e[29]||(e[29]=[c("刪除",-1)])]),_:1},8,["disabled","onClick"])]),_:1})]),_:1},8,["data"])])]),_:1}),l(m,{label:"自訂欄位",name:"custom-field"},{default:i(()=>[b("div",He,[l(o,{title:"可用於員工資料或流程表單的額外欄位",type:"info","show-icon":"",class:"info-alert"}),b("div",Ge,[l(s,{type:"primary",onClick:e[3]||(e[3]=a=>pe())},{default:i(()=>[...e[30]||(e[30]=[c("新增欄位",-1)])]),_:1})]),l(f,{data:w.value,border:""},{default:i(()=>[l(d,{prop:"label",label:"欄位名稱",width:"180"}),l(d,{prop:"fieldKey",label:"識別代碼",width:"200"}),l(d,{prop:"type",label:"欄位型別",width:"120"},{default:i(({row:a})=>[c(R(Je(ke)[a.type]||a.type),1)]),_:1}),l(d,{prop:"required",label:"必填",width:"100"},{default:i(({row:a})=>[c(R(a.required?"是":"否"),1)]),_:1}),l(d,{prop:"description",label:"使用說明"}),l(d,{label:"操作",width:"180"},{default:i(({$index:a})=>[l(s,{size:"small",onClick:O=>pe(a)},{default:i(()=>[...e[31]||(e[31]=[c("編輯",-1)])]),_:1},8,["onClick"]),l(s,{size:"small",type:"danger",onClick:O=>Ne(a)},{default:i(()=>[...e[32]||(e[32]=[c("刪除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1})]),_:1},8,["modelValue"]),l(X,{modelValue:U.value,"onUpdate:modelValue":e[9]||(e[9]=a=>U.value=a),title:we.value,width:"420px"},{footer:i(()=>[b("span",We,[l(s,{onClick:e[8]||(e[8]=a=>U.value=!1)},{default:i(()=>[...e[33]||(e[33]=[c("取消",-1)])]),_:1}),l(s,{type:"primary",onClick:Ee},{default:i(()=>[...e[34]||(e[34]=[c("儲存",-1)])]),_:1})])]),default:i(()=>[l(Q,{model:p.value,"label-width":"100px"},{default:i(()=>[l(C,{label:"所屬字典"},{default:i(()=>[l(r,{modelValue:p.value.dictionaryKey,"onUpdate:modelValue":e[5]||(e[5]=a=>p.value.dictionaryKey=a),disabled:F.value>-1},{default:i(()=>[(h(!0),A(D,null,z(V.value,a=>(h(),J(n,{key:a.key,label:`${a.key} ${a.label}`,value:a.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),l(C,{label:"選項名稱"},{default:i(()=>[l(E,{modelValue:p.value.name,"onUpdate:modelValue":e[6]||(e[6]=a=>p.value.name=a),placeholder:"顯示於下拉選單的名稱"},null,8,["modelValue"])]),_:1}),l(C,{label:"選項代碼"},{default:i(()=>[l(E,{modelValue:p.value.code,"onUpdate:modelValue":e[7]||(e[7]=a=>p.value.code=a),placeholder:"系統對應的代碼"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(X,{modelValue:K.value,"onUpdate:modelValue":e[14]||(e[14]=a=>K.value=a),title:ve.value,width:"420px"},{footer:i(()=>[b("span",Ye,[l(s,{onClick:e[13]||(e[13]=a=>K.value=!1)},{default:i(()=>[...e[35]||(e[35]=[c("取消",-1)])]),_:1}),l(s,{type:"primary",onClick:Oe},{default:i(()=>[...e[36]||(e[36]=[c("儲存",-1)])]),_:1})])]),default:i(()=>[l(Q,{model:g.value,"label-width":"100px"},{default:i(()=>[l(C,{label:"分類名稱"},{default:i(()=>[l(E,{modelValue:g.value.name,"onUpdate:modelValue":e[10]||(e[10]=a=>g.value.name=a),placeholder:"顯示名稱"},null,8,["modelValue"])]),_:1}),l(C,{label:"識別碼"},{default:i(()=>[l(E,{modelValue:g.value.code,"onUpdate:modelValue":e[11]||(e[11]=a=>g.value.code=a),placeholder:"資料庫儲存用代碼"},null,8,["modelValue"])]),_:1}),l(C,{label:"說明"},{default:i(()=>[l(E,{modelValue:g.value.description,"onUpdate:modelValue":e[12]||(e[12]=a=>g.value.description=a),type:"textarea",rows:3,placeholder:"可補充分類用途或適用範圍"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(X,{modelValue:q.value,"onUpdate:modelValue":e[22]||(e[22]=a=>q.value=a),title:"自訂欄位",width:"480px"},{footer:i(()=>[b("span",Xe,[l(s,{onClick:e[21]||(e[21]=a=>q.value=!1)},{default:i(()=>[...e[41]||(e[41]=[c("取消",-1)])]),_:1}),l(s,{type:"primary",onClick:Te},{default:i(()=>[...e[42]||(e[42]=[c("儲存",-1)])]),_:1})])]),default:i(()=>[l(Q,{model:u.value,"label-width":"100px"},{default:i(()=>[l(C,{label:"欄位名稱"},{default:i(()=>[l(E,{modelValue:u.value.label,"onUpdate:modelValue":e[15]||(e[15]=a=>u.value.label=a),placeholder:"顯示名稱"},null,8,["modelValue"])]),_:1}),l(C,{label:"識別代碼"},{default:i(()=>[l(E,{modelValue:u.value.fieldKey,"onUpdate:modelValue":e[16]||(e[16]=a=>u.value.fieldKey=a),placeholder:"英數字代碼"},null,8,["modelValue"])]),_:1}),l(C,{label:"欄位型別"},{default:i(()=>[l(r,{modelValue:u.value.type,"onUpdate:modelValue":e[17]||(e[17]=a=>u.value.type=a)},{default:i(()=>[(h(),A(D,null,z(ae,a=>l(n,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(C,{label:"是否必填"},{default:i(()=>[l(Fe,{modelValue:u.value.required,"onUpdate:modelValue":e[18]||(e[18]=a=>u.value.required=a)},null,8,["modelValue"])]),_:1}),l(C,{label:"使用說明"},{default:i(()=>[l(E,{modelValue:u.value.description,"onUpdate:modelValue":e[19]||(e[19]=a=>u.value.description=a),type:"textarea"},null,8,["modelValue"])]),_:1}),W.value?(h(),J(C,{key:0,label:"選項設定"},{default:i(()=>[b("div",Qe,[(h(!0),A(D,null,z(u.value.optionsList,(a,O)=>(h(),A("div",{key:a.id,class:"options-editor__row","data-test":"option-row"},[l(xe,{gutter:8,align:"middle"},{default:i(()=>[l(Z,{span:10},{default:i(()=>[l(E,{modelValue:a.name,"onUpdate:modelValue":x=>a.name=x,placeholder:"顯示文字","data-test":"option-name"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(Z,{span:10},{default:i(()=>[l(E,{modelValue:a.code,"onUpdate:modelValue":x=>a.code=x,placeholder:"代碼","data-test":"option-code"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(Z,{span:4,class:"options-editor__actions"},{default:i(()=>[l(s,{link:"",type:"primary",disabled:O===0,onClick:x=>se(O,-1),"data-test":"move-up"},{default:i(()=>[...e[37]||(e[37]=[c(" 上 ",-1)])]),_:1},8,["disabled","onClick"]),l(s,{link:"",type:"primary",disabled:O===u.value.optionsList.length-1,onClick:x=>se(O,1),"data-test":"move-down"},{default:i(()=>[...e[38]||(e[38]=[c(" 下 ",-1)])]),_:1},8,["disabled","onClick"]),l(s,{link:"",type:"danger",onClick:x=>Ve(O),"data-test":"remove-option"},{default:i(()=>[...e[39]||(e[39]=[c(" 刪 ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128)),l(s,{type:"primary",plain:"",size:"small",onClick:e[20]||(e[20]=a=>ne()),"data-test":"add-option"},{default:i(()=>[...e[40]||(e[40]=[c(" 新增選項 ",-1)])]),_:1})])]),_:1})):me("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},et=Ue(Ze,[["__scopeId","data-v-8f197598"]]),ot={__name:"OtherControlSettingView",setup(ye){return(M,L)=>(h(),J(et))}};export{ot as default};
