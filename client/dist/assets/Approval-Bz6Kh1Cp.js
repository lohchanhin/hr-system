import{a as h}from"./api-2KlvJGqf.js";import{_ as Oe,r as x,y as O,v as de,j as ze,c as k,b as s,d as n,w as l,e as _,o as r,l as m,x as z,F as D,m as U,g as c,t as f}from"./index-Bzhab6Am.js";const Ne={class:"approval-page"},Fe={class:"tab-content"},Pe={class:"form-section"},Me={class:"selector-row"},qe={key:0,class:"form-content"},Be={class:"form-fields"},Je={key:0,class:"workflow-preview"},We={class:"workflow-steps"},He={class:"step-number"},Re={class:"step-content"},Ge={class:"step-title"},Ke={class:"step-approvers"},Qe={class:"form-actions"},Xe={key:0,class:"error-message"},Ye={key:1,class:"empty-state"},Ze={class:"tab-label"},et={class:"tab-content"},tt={class:"table-section"},at={class:"table-container"},lt={class:"form-name"},ot={class:"applicant-info"},st={class:"progress-info"},nt={class:"progress-text"},it={class:"time-info"},rt={class:"action-buttons"},dt={class:"tab-content"},pt={class:"table-section"},ut={class:"table-container"},ct={key:4},mt={key:0},_t={class:"mb-2"},ft={class:"mb-2"},vt={class:"mb-2"},yt={class:"mb-1"},bt={class:"mr-2"},kt={__name:"Approval",setup(gt){const q=x("inbox"),B=o=>o?new Date(o).toLocaleString():"-",pe=o=>Array.isArray(o)?o.join(", "):o??"-",j=O({});function ue(o){if(o&&typeof o=="object"){const e=o._id||o.employeeId||"";return o.name||j[e]||e}return j[o]||o}const J=x([]),d=O({formId:"",formData:{}}),N=de(()=>{const o=J.value.find(e=>e.name==="請假");return(o==null?void 0:o._id)||""});function ce(){N.value&&(d.formId=N.value,H(N.value))}const T=x([]),F=x([]),S=x({}),W=x(!1),E=x(""),Y=x([]),Z=x([]),ee=x([]);async function me(){const o=await h("/api/employees");if(o.ok){const e=await o.json();Y.value=e.map(i=>({value:i._id,label:`${i.name}${i.employeeId?" ("+i.employeeId+")":""}`})),e.forEach(i=>{j[i._id]=i.name})}}async function _e(){const o=await h("/api/departments");if(o.ok){const e=await o.json();Z.value=e.map(i=>({value:i._id||i.code||i.name,label:i.name}))}}async function fe(){const o=await h("/api/organizations");if(o.ok){const e=await o.json();ee.value=e.map(i=>({value:i._id||i.code||i.name,label:i.name}))}}async function ve(){const o=await h("/api/approvals/forms");o.ok&&(J.value=await o.json())}async function ye(o){if(!(Array.isArray(o)?o:[o]).filter(u=>!j[u]).length)return;const p=await h("/api/employees");p.ok&&(await p.json()).forEach(v=>{j[v._id]=v.name})}async function H(){if(T.value=[],d.formData={},S.value={},F.value=[],!d.formId)return;const o=await h(`/api/approvals/forms/${d.formId}/fields`);if(o.ok){const i=await o.json();T.value=(i||[]).sort((p,u)=>(p.order||0)-(u.order||0)),T.value.forEach(p=>{p.type_1==="checkbox"?d.formData[p._id]=[]:d.formData[p._id]=""})}const e=await h(`/api/approvals/forms/${d.formId}/workflow`);if(e.ok){const i=await e.json();F.value=await Promise.all((i.steps||[]).map(async(p,u)=>{let v="";if(p.approver_type==="user")await ye(p.approver_value),v=(Array.isArray(p.approver_value)?p.approver_value:[p.approver_value]).map(V=>j[V]||V).join(", ");else{const w=Array.isArray(p.approver_value)?p.approver_value.join(", "):p.approver_value;v=`${p.approver_type}${w?"："+w:""}`}return{label:p.name||`第 ${u+1} 關`,approvers:v}}))}}function be(){d.formId&&H()}function te(o){const e=o.options;return e?Array.isArray(e)?e.map(i=>typeof i=="string"?{label:i,value:i}:{label:i.label??i.value,value:i.value??i.label}):Object.entries(e).map(([i,p])=>({label:String(p),value:String(i)})):[]}async function ke(){if(!d.formId){alert("請先選擇表單樣板");return}W.value=!0;try{const o={...d.formData};Object.keys(S.value).forEach(i=>{const p=S.value[i]||[];o[i]=Array.isArray(p)?p.map(u=>u.name):[]}),E.value="";const e=await h("/api/approvals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({form_id:d.formId,form_data:o})});if(e.ok)alert("送出申請成功！"),q.value="mine",await oe();else{const i=await e.json().catch(()=>({}));E.value=i.error||`HTTP ${e.status}`,alert(`送出失敗：${E.value}`)}}finally{W.value=!1}}const P=x([]);async function ae(){const o=await h("/api/approvals/inbox");if(o.ok){const e=await o.json(),i=u=>{const v=new Date(u??0).getTime();return Number.isFinite(v)?v:0},p=Array.isArray(e)?[...e].sort((u,v)=>i(v==null?void 0:v.createdAt)-i(u==null?void 0:u.createdAt)):[];P.value=p,p.forEach(u=>{var v,w;(((w=(v=u.steps)==null?void 0:v[u.current_step_index])==null?void 0:w.approvers)||[]).forEach(V=>{V.approver&&V.approver.name&&(j[V.approver._id]=V.approver.name)})})}}const y=O({visible:!1,loading:!1,decision:"approve",comment:"",target:null}),ge=de(()=>y.decision==="approve"?"核可":y.decision==="reject"?"否決":"退簽");function R(o,e){y.visible=!0,y.decision=e,y.comment="",y.target=o}async function we(){if(y.target){y.loading=!0;try{const o=await h(`/api/approvals/${y.target._id}/act`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({decision:y.decision,comment:y.comment})});if(o.ok)y.visible=!1,await ae(),alert("已送出！");else{const e=await o.json().catch(()=>({}));alert(`動作失敗：${e.error||o.status}`)}}finally{y.loading=!1}}}const G=x([]),le=O({});async function oe(){const o=await h("/api/approvals");o.ok&&(G.value=await o.json(),await Promise.all(G.value.map(async e=>{var i;if(!e.form||!e.form.name){const p=await h(`/api/approvals/${e._id}`);if(p.ok){const u=await p.json();le[e._id]=((i=u==null?void 0:u.form)==null?void 0:i.name)||""}}})))}const b=O({visible:!1,doc:null});async function se(o){b.visible=!1,b.doc=null;const e=await h(`/api/approvals/${o}`);if(e.ok){const i=await e.json();b.doc=i,b.visible=!0,(Array.isArray(b.doc.steps)?b.doc.steps:[]).forEach(u=>{(Array.isArray(u.approvers)?u.approvers:[]).forEach(w=>{var V,M;(V=w.approver)!=null&&V._id&&((M=w.approver)!=null&&M.name)&&(j[w.approver._id]=w.approver.name)})})}}ze(async()=>{await Promise.all([ve(),me(),_e(),fe()]),await Promise.all([ae(),oe()])});function Ve(o){return{pending:"warning",approved:"success",rejected:"danger",returned:"info"}[o]||"default"}function K(o){return{pending:"待簽核",approved:"已核可",rejected:"已否決",returned:"已退簽"}[o]||o}return(o,e)=>{const i=_("el-option"),p=_("el-select"),u=_("el-button"),v=_("el-form-item"),w=_("el-divider"),V=_("el-input"),M=_("el-input-number"),he=_("el-checkbox"),xe=_("el-checkbox-group"),ne=_("el-date-picker"),De=_("el-time-picker"),Ue=_("el-upload"),ie=_("el-form"),je=_("el-card"),Q=_("el-tab-pane"),Ae=_("el-badge"),g=_("el-table-column"),Ce=_("el-avatar"),L=_("el-tag"),$e=_("el-progress"),X=_("el-table"),Ie=_("el-tabs"),Te=_("el-descriptions-item"),Se=_("el-descriptions"),Ee=_("el-timeline-item"),Le=_("el-timeline"),re=_("el-dialog");return r(),k("div",Ne,[e[41]||(e[41]=s("div",{class:"page-header"},[s("h1",{class:"page-title"},"簽核流程管理"),s("p",{class:"page-description"},"申請表單、審核流程、狀態追蹤一站式管理")],-1)),n(Ie,{modelValue:q.value,"onUpdate:modelValue":e[1]||(e[1]=t=>q.value=t),type:"card",class:"approval-tabs"},{default:l(()=>[n(Q,{name:"apply"},{label:l(()=>e[7]||(e[7]=[s("div",{class:"tab-label"},[s("i",{class:"el-icon-edit-outline"}),s("span",null,"申請表單")],-1)])),default:l(()=>[s("div",Fe,[s("div",Pe,[e[16]||(e[16]=s("h2",{class:"section-title"},"建立新申請",-1)),n(je,{class:"form-card"},{default:l(()=>[n(ie,{"label-width":"140px",model:d,class:"apply-form"},{default:l(()=>[n(v,{label:"選擇表單樣板",class:"template-selector"},{default:l(()=>[s("div",Me,[n(p,{modelValue:d.formId,"onUpdate:modelValue":e[0]||(e[0]=t=>d.formId=t),placeholder:"請選擇申請表單類型",class:"form-select",onChange:H},{default:l(()=>[(r(!0),k(D,null,U(J.value,t=>(r(),m(i,{key:t._id,label:`${t.name}（${t.category}）`,value:t._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),n(u,{type:"primary",disabled:!d.formId,onClick:be,class:"reload-btn"},{default:l(()=>e[8]||(e[8]=[s("i",{class:"el-icon-refresh"},null,-1),c(" 重新載入 ")])),_:1},8,["disabled"]),N.value?(r(),m(u,{key:0,type:"success",onClick:ce,class:"quick-btn"},{default:l(()=>e[9]||(e[9]=[s("i",{class:"el-icon-time"},null,-1),c(" 快速請假 ")])),_:1})):z("",!0)])]),_:1}),T.value.length?(r(),k("div",qe,[n(w,{"content-position":"left"},{default:l(()=>e[10]||(e[10]=[s("span",{class:"divider-text"},"表單內容",-1)])),_:1}),s("div",Be,[(r(!0),k(D,null,U(T.value,t=>(r(),m(v,{key:t._id,label:t.label,required:!!t.required,class:"form-field"},{default:l(()=>[t.type_1==="text"?(r(),m(V,{key:0,modelValue:d.formData[t._id],"onUpdate:modelValue":a=>d.formData[t._id]=a,placeholder:t.placeholder||"",class:"field-input"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):t.type_1==="textarea"?(r(),m(V,{key:1,type:"textarea",rows:4,modelValue:d.formData[t._id],"onUpdate:modelValue":a=>d.formData[t._id]=a,placeholder:t.placeholder||"",class:"field-textarea"},null,8,["modelValue","onUpdate:modelValue","placeholder"])):t.type_1==="number"?(r(),m(M,{key:2,modelValue:d.formData[t._id],"onUpdate:modelValue":a=>d.formData[t._id]=a,min:0,step:1},null,8,["modelValue","onUpdate:modelValue"])):t.type_1==="select"?(r(),m(p,{key:3,modelValue:d.formData[t._id],"onUpdate:modelValue":a=>d.formData[t._id]=a,filterable:"",placeholder:t.placeholder||"請選擇",style:{width:"320px"}},{default:l(()=>[(r(!0),k(D,null,U(te(t),a=>(r(),m(i,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):t.type_1==="checkbox"?(r(),m(xe,{key:4,modelValue:d.formData[t._id],"onUpdate:modelValue":a=>d.formData[t._id]=a},{default:l(()=>[(r(!0),k(D,null,U(te(t),a=>(r(),m(he,{key:a.value,label:a.value},{default:l(()=>[c(f(a.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):t.type_1==="date"?(r(),m(ne,{key:5,modelValue:d.formData[t._id],"onUpdate:modelValue":a=>d.formData[t._id]=a,type:"date",style:{width:"220px"}},null,8,["modelValue","onUpdate:modelValue"])):t.type_1==="time"?(r(),m(De,{key:6,modelValue:d.formData[t._id],"onUpdate:modelValue":a=>d.formData[t._id]=a,style:{width:"220px"}},null,8,["modelValue","onUpdate:modelValue"])):t.type_1==="datetime"?(r(),m(ne,{key:7,modelValue:d.formData[t._id],"onUpdate:modelValue":a=>d.formData[t._id]=a,type:"datetime",style:{width:"260px"}},null,8,["modelValue","onUpdate:modelValue"])):t.type_1==="file"?(r(),m(Ue,{key:8,"auto-upload":!1,"file-list":S.value[t._id],"onUpdate:fileList":a=>S.value[t._id]=a,"list-type":"text"},{default:l(()=>[n(u,null,{default:l(()=>e[11]||(e[11]=[c("選擇檔案")])),_:1})]),_:2},1032,["file-list","onUpdate:fileList"])):t.type_1==="user"?(r(),m(p,{key:9,modelValue:d.formData[t._id],"onUpdate:modelValue":a=>d.formData[t._id]=a,filterable:"",style:{width:"320px"},placeholder:"選擇員工"},{default:l(()=>[(r(!0),k(D,null,U(Y.value,a=>(r(),m(i,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):t.type_1==="department"?(r(),m(p,{key:10,modelValue:d.formData[t._id],"onUpdate:modelValue":a=>d.formData[t._id]=a,filterable:"",style:{width:"320px"},placeholder:"選擇部門"},{default:l(()=>[(r(!0),k(D,null,U(Z.value,a=>(r(),m(i,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):t.type_1==="org"?(r(),m(p,{key:11,modelValue:d.formData[t._id],"onUpdate:modelValue":a=>d.formData[t._id]=a,filterable:"",style:{width:"320px"},placeholder:"選擇機構"},{default:l(()=>[(r(!0),k(D,null,U(ee.value,a=>(r(),m(i,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(r(),m(V,{key:12,modelValue:d.formData[t._id],"onUpdate:modelValue":a=>d.formData[t._id]=a,placeholder:t.placeholder||""},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","required"]))),128))]),F.value.length?(r(),k("div",Je,[n(w,{"content-position":"left"},{default:l(()=>e[12]||(e[12]=[s("span",{class:"divider-text"},"簽核流程預覽",-1)])),_:1}),s("div",We,[(r(!0),k(D,null,U(F.value,(t,a)=>(r(),k("div",{key:a,class:"workflow-step"},[s("div",He,f(a+1),1),s("div",Re,[s("h4",Ge,f(t.label),1),s("p",Ke,f(t.approvers),1)])]))),128))])])):z("",!0),s("div",Qe,[n(u,{type:"primary",size:"large",loading:W.value,onClick:ke,class:"submit-btn"},{default:l(()=>e[13]||(e[13]=[s("i",{class:"el-icon-check"},null,-1),c(" 送出申請 ")])),_:1},8,["loading"]),E.value?(r(),k("div",Xe,[e[14]||(e[14]=s("i",{class:"el-icon-warning"},null,-1)),c(" "+f(E.value),1)])):z("",!0)])])):(r(),k("div",Ye,e[15]||(e[15]=[s("i",{class:"el-icon-document"},null,-1),s("p",null,"請先選擇一個表單樣板開始申請",-1)])))]),_:1},8,["model"])]),_:1})])])]),_:1}),n(Q,{name:"inbox"},{label:l(()=>[s("div",Ze,[e[17]||(e[17]=s("i",{class:"el-icon-message"},null,-1)),e[18]||(e[18]=s("span",null,"待我簽核",-1)),P.value.length?(r(),m(Ae,{key:0,value:P.value.length,class:"tab-badge"},null,8,["value"])):z("",!0)])]),default:l(()=>[s("div",et,[s("div",tt,[e[25]||(e[25]=s("h2",{class:"section-title"},"待處理申請",-1)),s("div",at,[n(X,{data:P.value,class:"approval-table","header-cell-style":{background:"#f8fafc",color:"#475569",fontWeight:"600"},"row-style":{height:"64px"}},{default:l(()=>[n(g,{label:"#",width:"60",type:"index"}),n(g,{label:"表單名稱",width:"220"},{default:l(({row:t})=>{var a;return[s("div",lt,[e[19]||(e[19]=s("i",{class:"el-icon-document"},null,-1)),c(" "+f(((a=t.form)==null?void 0:a.name)||"-"),1)])]}),_:1}),n(g,{prop:"applicant_employee.name",label:"申請人",width:"140"},{default:l(({row:t})=>{var a;return[s("div",ot,[n(Ce,{size:32,class:"applicant-avatar"},{default:l(()=>{var A;return[c(f((((A=t.applicant_employee)==null?void 0:A.name)||"-").charAt(0)),1)]}),_:2},1024),s("span",null,f(((a=t.applicant_employee)==null?void 0:a.name)||"-"),1)])]}),_:1}),n(g,{label:"狀態",width:"120"},{default:l(({row:t})=>[n(L,{type:Ve(t.status),class:"status-tag"},{default:l(()=>[c(f(K(t.status)),1)]),_:2},1032,["type"])]),_:1}),n(g,{label:"目前關卡",width:"120"},{default:l(({row:t})=>{var a,A;return[s("div",st,[s("span",nt,f(t.current_step_index+1)+"/"+f(((a=t.steps)==null?void 0:a.length)||0),1),n($e,{percentage:(t.current_step_index+1)/(((A=t.steps)==null?void 0:A.length)||1)*100,"show-text":!1,"stroke-width":4,class:"progress-bar"},null,8,["percentage"])])]}),_:1}),n(g,{label:"建立時間",width:"180"},{default:l(({row:t})=>[s("div",it,[e[20]||(e[20]=s("i",{class:"el-icon-time"},null,-1)),c(" "+f(B(t.createdAt)),1)])]),_:1}),n(g,{label:"操作",width:"320"},{default:l(({row:t})=>[s("div",rt,[n(u,{size:"small",onClick:a=>se(t._id),class:"view-btn"},{default:l(()=>e[21]||(e[21]=[s("i",{class:"el-icon-view"},null,-1),c(" 查看 ")])),_:2},1032,["onClick"]),n(u,{type:"success",size:"small",onClick:a=>R(t,"approve"),class:"approve-btn"},{default:l(()=>e[22]||(e[22]=[s("i",{class:"el-icon-check"},null,-1),c(" 核可 ")])),_:2},1032,["onClick"]),n(u,{type:"danger",size:"small",onClick:a=>R(t,"reject"),class:"reject-btn"},{default:l(()=>e[23]||(e[23]=[s("i",{class:"el-icon-close"},null,-1),c(" 否決 ")])),_:2},1032,["onClick"]),n(u,{size:"small",onClick:a=>R(t,"return"),class:"return-btn"},{default:l(()=>e[24]||(e[24]=[s("i",{class:"el-icon-back"},null,-1),c(" 退簽 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])])])]),_:1}),n(Q,{name:"mine"},{label:l(()=>e[26]||(e[26]=[s("div",{class:"tab-label"},[s("i",{class:"el-icon-user"}),s("span",null,"我的申請")],-1)])),default:l(()=>[s("div",dt,[s("div",pt,[e[32]||(e[32]=s("h2",{class:"section-title"},"申請記錄",-1)),s("div",ut,[n(X,{data:G.value,class:"approval-table","header-cell-style":{background:"#f8fafc",color:"#475569",fontWeight:"600"},"row-style":{height:"64px"}},{default:l(()=>[n(g,{type:"index",label:"#",width:"60"}),n(g,{label:"表單名稱",width:"240"},{default:l(({row:t})=>{var a;return[c(f(((a=t.form)==null?void 0:a.name)||le[t._id]||"-"),1)]}),_:1}),n(g,{label:"狀態",width:"120"},{default:l(({row:t})=>[t.status==="pending"?(r(),m(L,{key:0,type:"warning"},{default:l(()=>e[27]||(e[27]=[c("處理中")])),_:1})):t.status==="approved"?(r(),m(L,{key:1,type:"success"},{default:l(()=>e[28]||(e[28]=[c("已核可")])),_:1})):t.status==="rejected"?(r(),m(L,{key:2,type:"danger"},{default:l(()=>e[29]||(e[29]=[c("已否決")])),_:1})):t.status==="returned"?(r(),m(L,{key:3},{default:l(()=>e[30]||(e[30]=[c("已退簽")])),_:1})):(r(),k("span",ct,f(t.status),1))]),_:1}),n(g,{label:"目前關卡",width:"120"},{default:l(({row:t})=>{var a;return[c(f(t.current_step_index+1)+"/"+f(((a=t.steps)==null?void 0:a.length)||0),1)]}),_:1}),n(g,{label:"建立時間",width:"180"},{default:l(({row:t})=>[c(f(B(t.createdAt)),1)]),_:1}),n(g,{label:"操作",width:"140"},{default:l(({row:t})=>[n(u,{size:"small",onClick:a=>se(t._id)},{default:l(()=>e[31]||(e[31]=[c("查看")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])])]),_:1})]),_:1},8,["modelValue"]),n(re,{modelValue:b.visible,"onUpdate:modelValue":e[3]||(e[3]=t=>b.visible=t),title:"申請單明細",width:"760px"},{footer:l(()=>[n(u,{onClick:e[2]||(e[2]=t=>b.visible=!1)},{default:l(()=>e[38]||(e[38]=[c("關閉")])),_:1})]),default:l(()=>{var t,a,A;return[b.doc?(r(),k("div",mt,[s("p",_t,[e[33]||(e[33]=s("b",null,"表單：",-1)),c(f((t=b.doc.form)==null?void 0:t.name)+"（"+f((a=b.doc.form)==null?void 0:a.category)+"）",1)]),s("p",ft,[e[34]||(e[34]=s("b",null,"申請人：",-1)),c(f(((A=b.doc.applicant_employee)==null?void 0:A.name)||"-"),1)]),s("p",vt,[e[35]||(e[35]=s("b",null,"狀態：",-1)),c(f(K(b.doc.status)),1)]),n(w,{"content-position":"left"},{default:l(()=>e[36]||(e[36]=[c("填寫內容")])),_:1}),n(Se,{column:1,size:"small",border:""},{default:l(()=>{var I;return[(r(!0),k(D,null,U(((I=b.doc.form)==null?void 0:I.fields)||[],$=>(r(),m(Te,{key:$._id,label:$.label},{default:l(()=>{var C;return[s("span",null,f(pe((C=b.doc.form_data)==null?void 0:C[$._id])),1)]}),_:2},1032,["label"]))),128))]}),_:1}),n(w,{"content-position":"left"},{default:l(()=>e[37]||(e[37]=[c("流程")])),_:1}),n(Le,null,{default:l(()=>[(r(!0),k(D,null,U(b.doc.steps,(I,$)=>(r(),m(Ee,{key:$,timestamp:`第 ${$+1} 關`,type:$===b.doc.current_step_index?"primary":"info"},{default:l(()=>[s("div",yt,[s("span",bt,"需全員同意："+f(I.all_must_approve?"是":"否"),1),s("span",null,"必簽："+f(I.is_required?"是":"否"),1)]),n(X,{data:I.approvers,size:"small",border:""},{default:l(()=>[n(g,{label:"審核人",width:"200"},{default:l(({row:C})=>[c(f(ue(C.approver)),1)]),_:1}),n(g,{label:"決議",width:"120"},{default:l(({row:C})=>[c(f(K(C.decision)),1)]),_:1}),n(g,{label:"時間",width:"200"},{default:l(({row:C})=>[c(f(B(C.decided_at)),1)]),_:1}),n(g,{prop:"comment",label:"意見"})]),_:2},1032,["data"])]),_:2},1032,["timestamp","type"]))),128))]),_:1})])):z("",!0)]}),_:1},8,["modelValue"]),n(re,{modelValue:y.visible,"onUpdate:modelValue":e[6]||(e[6]=t=>y.visible=t),title:ge.value,width:"520px"},{footer:l(()=>[n(u,{onClick:e[5]||(e[5]=t=>y.visible=!1)},{default:l(()=>e[39]||(e[39]=[c("取消")])),_:1}),n(u,{type:"primary",loading:y.loading,onClick:we},{default:l(()=>e[40]||(e[40]=[c("送出")])),_:1},8,["loading"])]),default:l(()=>[n(ie,{"label-width":"100px"},{default:l(()=>[n(v,{label:"意見／備註"},{default:l(()=>[n(V,{modelValue:y.comment,"onUpdate:modelValue":e[4]||(e[4]=t=>y.comment=t),type:"textarea",rows:3,placeholder:"（可留空）"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])])}}},ht=Oe(kt,[["__scopeId","data-v-b17237b2"]]);export{ht as default};
