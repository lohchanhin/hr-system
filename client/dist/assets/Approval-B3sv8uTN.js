import{a as p}from"./api-ZZnZ46lj.js";import{_ as b,r as w,g as h,c as y,d as u,a as o,w as l,b as r,x as i,o as g,e as d}from"./index-BZkZtvsR.js";const A={class:"approval-page"},B={__name:"Approval",setup(C){const n=w([]);async function _(){const t=i()||"",e=await p("/api/approvals",{headers:{Authorization:`Bearer ${t}`}});e.ok&&(n.value=await e.json())}async function v(t){const e=n.value[t],a=i()||"";(await p(`/api/approvals/${e._id}/approve`,{method:"POST",headers:{Authorization:`Bearer ${a}`}})).ok&&n.value.splice(t,1)}async function m(t){const e=n.value[t],a=i()||"";(await p(`/api/approvals/${e._id}/reject`,{method:"POST",headers:{Authorization:`Bearer ${a}`}})).ok&&n.value.splice(t,1)}return h(_),(t,e)=>{const a=r("el-table-column"),s=r("el-button"),f=r("el-table");return g(),y("div",A,[e[2]||(e[2]=u("h2",null,"簽核流程",-1)),e[3]||(e[3]=u("p",null,"這裡是「簽核流程」的示範頁面。主管/HR 可看到申請單清單並進行審核。",-1)),o(f,{data:n.value,style:{"margin-top":"20px"}},{default:l(()=>[o(a,{prop:"applicant",label:"申請人",width:"120"}),o(a,{prop:"type",label:"申請類型",width:"120"}),o(a,{prop:"content",label:"申請內容"}),o(a,{label:"操作",width:"200"},{default:l(({row:$,$index:c})=>[o(s,{type:"primary",onClick:k=>v(c)},{default:l(()=>e[0]||(e[0]=[d("通過")])),_:2},1032,["onClick"]),o(s,{type:"danger",onClick:k=>m(c)},{default:l(()=>e[1]||(e[1]=[d("退回")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])}}},j=b(B,[["__scopeId","data-v-7729725c"]]);export{j as default};
