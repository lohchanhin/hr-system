import{_ as Ie,u as kl,r as N,j as Sl,x as K,q as Tl,e as U,k as z,o as c,w as n,b as u,d as a,t as _,g as w,c as v,y as ie,F as b,l as V,h as El,E as Y,z as Nl}from"./index-aC1k_6wM.js";import{a as $}from"./api-zZL8ssGi.js";const Il={class:"employee-management"},Rl={class:"page-header"},Cl={class:"header-stats"},Pl={class:"stat-item"},$l={class:"stat-number"},Ol={class:"stat-item"},Bl={class:"stat-number"},zl={class:"content-header"},Yl={class:"table-container"},xl={class:"employee-info"},jl={class:"employee-details"},Gl={class:"employee-name"},Ml={class:"employee-id"},ql={class:"department-info"},Fl={key:1,class:"no-data"},Hl={class:"contact-info"},Jl={key:0,class:"contact-item"},Wl={key:1,class:"contact-item"},Kl={key:2,class:"no-data"},Ql={class:"action-buttons"},Xl={class:"tab-content"},Zl={class:"form-section"},ea={class:"form-group"},la={class:"form-group"},aa={class:"role-option"},ta={class:"role-name"},oa={class:"role-desc"},sa={class:"option-wrapper"},ua={class:"option-title"},ra={class:"tab-content"},na={class:"form-section"},da={class:"form-group"},ia={class:"option-wrapper"},ma={class:"option-title"},pa={class:"option-desc"},ca={class:"option-wrapper"},va={class:"option-title"},fa={class:"option-desc"},ya={class:"tab-content"},ba={class:"form-section"},Va={class:"form-group"},ga={class:"form-row"},_a={class:"form-row"},ha={class:"form-row"},Ua={class:"form-row"},La={class:"form-row"},Aa={class:"form-group"},wa={class:"form-row"},Da={class:"form-row"},ka={class:"tab-content"},Sa={class:"form-section"},Ta={class:"form-group"},Ea={class:"form-row"},Na={class:"form-row"},Ia={class:"form-group"},Ra={class:"form-row"},Ca={class:"form-row"},Pa={class:"form-group"},$a={class:"form-row"},Oa={class:"form-row"},Ba={class:"form-row"},za={class:"form-row"},Ya={class:"form-row"},xa={class:"tab-content"},ja={class:"form-section"},Ga={class:"form-group"},Ma={class:"form-row"},qa={class:"form-row"},Fa={class:"form-group"},Ha={class:"form-row"},Ja={class:"form-row"},Wa={class:"form-row"},Ka={class:"form-group"},Qa={class:"form-row"},Xa={class:"form-row"},Za={class:"form-group"},et={class:"emergency-contact"},lt={class:"form-row"},at={class:"form-row"},tt={class:"emergency-contact"},ot={class:"form-row"},st={class:"form-row"},ut={class:"form-group"},rt={class:"experience-list"},nt={class:"experience-header"},dt={class:"experience-title"},it={class:"form-row"},mt={class:"form-row"},pt={class:"form-group"},ct={class:"experience-list"},vt={class:"experience-header"},ft={class:"experience-title"},yt={class:"form-row"},bt={class:"form-row"},Vt={class:"form-row"},gt={class:"form-group"},_t={class:"experience-list"},ht={class:"experience-header"},Ut={class:"experience-title"},Lt={class:"form-row"},At={class:"form-row"},wt={class:"form-row"},Dt={class:"tab-content"},kt={class:"form-section"},St={class:"form-group"},Tt={class:"form-row"},Et={class:"form-group"},Nt={class:"account-section"},It={class:"form-row"},Rt={class:"account-section"},Ct={class:"form-row"},Pt={class:"dialog-footer"},$t={__name:"EmployeeManagement",setup(Re){const M=kl(),me=[{label:"管理員",value:"admin"},{label:"主管",value:"supervisor"},{label:"員工",value:"employee"}],C=[{level:"L1",description:"一般使用者 / 基層專員"},{level:"L2",description:"資深專員 / 小組長"},{level:"L3",description:"部門主管 / 課長"},{level:"L4",description:"處室主管 / 協理"},{level:"L5",description:"高階決策者 / 最高主管"}],Q=["護理師","照顧服務員","社工師","物理治療師","職能治療師","行政人員"],X=["護理師","社工師","物理治療師","職能治療師","醫師"],Ce=["中文","台語","客語","英語","馬來語"],Pe=["極重度","重度身心障礙","中度身心障礙","輕度身心障礙"],$e=["原住民","新住民","榮民"],Oe=["博士","碩士","大學","專科","高中職","國中以下"],Be=["畢業","肄業"],pe=["父","母","配偶","子","女","兄","姊","弟","妹","其他"],ze=["院內","院外","線上","研討會","自學"],Ye=["月薪","日薪","時薪"],O=["本薪","全勤","加班費","交通津貼","伙食津貼","績效獎金"],q=[{id:"R001",label:"填報",description:"提出申請與初始資料填寫"},{id:"R002",label:"覆核",description:"確認申請內容與佐證完整性"},{id:"R003",label:"審核",description:"評估申請是否符合政策與規範"},{id:"R004",label:"核定",description:"做出最終核准或駁回決策"},{id:"R005",label:"知會",description:"接收流程進度並保留紀錄"},{id:"R006",label:"財務覆核",description:"檢視成本預算與財務影響"},{id:"R007",label:"人資覆核",description:"確保人事政策與法規符合"}],Z=[{id:"U001",label:"L1",description:"單位承辦或第一層主管"},{id:"U002",label:"L2",description:"部門主管或組長"},{id:"U003",label:"L3",description:"處室主管或經理"},{id:"U004",label:"L4",description:"高階主管或副執行長"},{id:"U005",label:"L5",description:"執行長 / 院長 / 董事會"}],xe=["資深","新人","外聘","志工"],je=["義務役","志願役","替代役","免役","尚未服役"],ce=["A","B","O","AB","HR"],Ge=new Date().getFullYear(),Me=new Set(q.map(r=>r.id)),ve=new Map(q.map(r=>[r.label,r.id]));["填報人員","覆核人員","審核人員","核定人員","知會人員","財務覆核人員","人資覆核人員"].forEach((r,e)=>{const t=q[e];t&&ve.set(r,t.id)});const qe=new Set(Z.map(r=>r.id)),Fe=new Map(Z.map(r=>[r.label,r.id])),He=new Set(C.map(r=>r.level)),Je=new Map([["一級","L1"],["二級","L2"],["三級","L3"],["四級","L4"],["五級","L5"],["一般職等","L1"],["資深職等","L2"],["主管職等","L3"]]);function fe(r){if(!r&&r!==0)return"";if(typeof r=="string"){const e=r.trim();return e?Me.has(e)?e:ve.get(e)??e:""}return r}function ye(r){if(!r&&r!==0)return"";if(typeof r=="string"){const e=r.trim();return e?qe.has(e)?e:Fe.get(e)??e:""}return r}function be(r){if(!r&&r!==0)return"";if(typeof r=="string"){const e=r.trim();return e?He.has(e)?e:Je.get(e)??e:""}return r}function We(r){return r?`${r.level}｜${r.description}`:""}function Ke(r){return r?`${r.id}｜${r.label}`:""}const ee=N("account"),R=N([]),F=N([]),le=N([]),Ve=N([]),x=N(!1),ae=N(!1);let H=null,te="";function Qe(r){const e=F.value.find(t=>t._id===r);return e?`${e.name}(${e.code})`:r}function J(r){return r.status===401?(Y.error("登入逾時，請重新登入"),M.push("/manager/login"),!0):!1}function ge(r){return new Promise((e,t)=>{const d=new FileReader;d.onload=()=>e(typeof d.result=="string"?d.result:""),d.onerror=()=>t(new Error("READ_ERROR")),d.readAsDataURL(r)})}function _e(r=[]){const e=r.slice(-1).map(t=>{var h;const d=t.response,g=typeof d=="object"&&d!==null&&"url"in d&&d.url||typeof d=="object"&&d!==null&&"data"in d&&((h=d.data)==null?void 0:h.url)||(typeof d=="string"?d:"");return{...t,url:t.url||g||"",status:"success",percentage:t.percentage??100}});o.value.photoList=e,o.value.photo=e.length&&e[0].url||""}async function Xe({file:r,onSuccess:e,onError:t}){ae.value=!0;try{const d=await ge(r);e==null||e({url:d})}catch(d){t==null||t(d),Y.error("照片載入失敗，請重新選擇檔案")}finally{ae.value=!1}}function Ze(r,e,t){var d;e.url||(typeof r=="string"?e.url=r:r&&typeof r=="object"&&(e.url=r.url||((d=r==null?void 0:r.data)==null?void 0:d.url)||e.url||"")),_e(t)}function el(r,e){_e(e)}function ll(){Y.warning("僅能上傳一張照片")}function al(r,e=""){return r?{name:e?`${e} 照片`:"員工照片",url:r,status:"success",percentage:100}:null}function oe(r=[]){return(Array.isArray(r)?r:[r]).map(e=>{var d;if(!e)return"";if(typeof e=="string")return e;if(e.url)return e.url;const t=e.response;if(typeof t=="string")return t;if(typeof t=="object"&&t!==null){if("url"in t&&t.url)return t.url;if("data"in t&&((d=t.data)!=null&&d.url))return t.data.url}return""}).filter(e=>typeof e=="string"&&e)}function tl(r=[]){return oe(r)}function he(r=[],e="附件"){return(Array.isArray(r)?r:[r]).map((t,d)=>{var g;if(!t)return null;if(typeof t=="string")return{name:`${e}${d+1}`,url:t,status:"success",percentage:100,uid:`${e}-${d}`};if(typeof t=="object"){let h=t.url;if(!h){const i=t.response;typeof i=="string"?h=i:i&&typeof i=="object"&&(h=i.url||((g=i==null?void 0:i.data)==null?void 0:g.url)||"")}if(!h)return null;const f={...t,name:t.name||`${e}${d+1}`,url:h,status:"success",percentage:t.percentage??100};return f.uid||(f.uid=`${e}-${d}`),f}return null}).filter(t=>t&&typeof t.url=="string"&&t.url)}function Ue(r,e="附件"){if(!r)return[];const t=Array.isArray(r)?r:[r];return he(t,e)}function j(r){return Array.isArray(r)?r.filter(e=>e!==""&&e!==null&&e!==void 0):r===""||r===null||r===void 0?[]:[r]}function ol(r,e){return r==="licenses"?`證照${e+1}-附件`:`教育訓練${e+1}-附件`}function Le(r,e,t){const d=r==="licenses"?o.value.licenses:o.value.trainings;if(!Array.isArray(d)||!d[e])return;const g=ol(r,e);d[e].fileList=he(t,g)}async function Ae({file:r,onSuccess:e,onError:t}){try{const d=await ge(r);e==null||e({url:d})}catch(d){t==null||t(d),Y.error("檔案載入失敗，請重新選擇")}}function we(r,e,t,d,g){var h;d.url||(typeof t=="string"?d.url=t:t&&typeof t=="object"&&(d.url=t.url||((h=t==null?void 0:t.data)==null?void 0:h.url)||d.url||"")),Le(r,e,g)}function De(r,e,t,d){Le(r,e,d)}function k(r){if(r===""||r===null||r===void 0)return null;const e=Number(r);return Number.isFinite(e)?e:null}function se(r){return r==null?"":String(r)}function B(r){return r==null||r===""?"":r}function sl(r=[]){return Array.isArray(r)?r.map((e={},t)=>({name:(e==null?void 0:e.name)??"",number:(e==null?void 0:e.number)??"",startDate:(e==null?void 0:e.startDate)??(e==null?void 0:e.issueDate)??"",endDate:(e==null?void 0:e.endDate)??(e==null?void 0:e.expiryDate)??"",fileList:Ue((e==null?void 0:e.fileList)??(e==null?void 0:e.files)??(e!=null&&e.file?[e.file]:[]),`證照${t+1}-附件`)})):[]}function ul(r=[]){return Array.isArray(r)?r.map((e={},t)=>({course:(e==null?void 0:e.course)??(e==null?void 0:e.name)??"",courseNo:(e==null?void 0:e.courseNo)??(e==null?void 0:e.code)??"",date:(e==null?void 0:e.date)??"",category:j((e==null?void 0:e.category)??(e==null?void 0:e.categories)),score:k(e==null?void 0:e.score),fileList:Ue((e==null?void 0:e.fileList)??(e==null?void 0:e.files)??(e!=null&&e.file?[e.file]:[]),`教育訓練${t+1}-附件`)})):[]}async function ke(){const r=await $("/api/departments");J(r)||r.ok&&(F.value=await r.json())}async function ue(r=""){const e=r?`/api/sub-departments?department=${r}`:"/api/sub-departments",t=await $(e);J(t)||t.ok&&(le.value=await t.json())}async function rl(){const r=await $("/api/organizations");J(r)||r.ok&&(Ve.value=await r.json())}async function Se(){const r=await $("/api/employees");if(!J(r)&&r.ok){const e=await r.json();R.value=e.map(t=>{var g,h,f,i,s,D,T,p,y,S,I,L,E,G,W;const d=(t==null?void 0:t.appointment)??{};return{...t,permissionGrade:be(t==null?void 0:t.permissionGrade),signRole:fe(t==null?void 0:t.signRole),signLevel:ye(t==null?void 0:t.signLevel),organization:((g=t.organization)==null?void 0:g._id)||t.organization||"",department:((h=t.department)==null?void 0:h._id)||t.department||"",subDepartment:((f=t.subDepartment)==null?void 0:f._id)||t.subDepartment||"",laborPensionSelf:k(t==null?void 0:t.laborPensionSelf)??0,employeeAdvance:k(t==null?void 0:t.employeeAdvance)??0,salaryItems:j(t==null?void 0:t.salaryItems).filter(ne=>O.includes(ne)),height:k(((i=t==null?void 0:t.medicalCheck)==null?void 0:i.height)??(t==null?void 0:t.height)),weight:k(((s=t==null?void 0:t.medicalCheck)==null?void 0:s.weight)??(t==null?void 0:t.weight)),medicalBloodType:((D=t==null?void 0:t.medicalCheck)==null?void 0:D.bloodType)??(t==null?void 0:t.medicalBloodType)??"",educationLevel:((T=t==null?void 0:t.education)==null?void 0:T.level)??(t==null?void 0:t.educationLevel)??"",schoolName:((p=t==null?void 0:t.education)==null?void 0:p.school)??(t==null?void 0:t.schoolName)??"",major:((y=t==null?void 0:t.education)==null?void 0:y.major)??(t==null?void 0:t.major)??"",graduationStatus:((S=t==null?void 0:t.education)==null?void 0:S.status)??(t==null?void 0:t.graduationStatus)??"",graduationYear:se(((I=t==null?void 0:t.education)==null?void 0:I.graduationYear)??(t==null?void 0:t.graduationYear)??""),serviceType:((L=t==null?void 0:t.militaryService)==null?void 0:L.serviceType)??(t==null?void 0:t.serviceType)??"",militaryBranch:((E=t==null?void 0:t.militaryService)==null?void 0:E.branch)??(t==null?void 0:t.militaryBranch)??"",militaryRank:((G=t==null?void 0:t.militaryService)==null?void 0:G.rank)??(t==null?void 0:t.militaryRank)??"",dischargeYear:k(((W=t==null?void 0:t.militaryService)==null?void 0:W.dischargeYear)??(t==null?void 0:t.dischargeYear)),hireDate:B((d==null?void 0:d.hireDate)??(t==null?void 0:t.hireDate)),appointDate:B((d==null?void 0:d.appointDate)??(d==null?void 0:d.startDate)??(t==null?void 0:t.appointDate)),resignDate:B((d==null?void 0:d.resignationDate)??(t==null?void 0:t.resignDate)),dismissDate:B((d==null?void 0:d.dismissalDate)??(t==null?void 0:t.dismissDate)),reAppointDate:B((d==null?void 0:d.reAppointDate)??(d==null?void 0:d.rehireStartDate)??(t==null?void 0:t.reAppointDate)),reDismissDate:B((d==null?void 0:d.reDismissDate)??(d==null?void 0:d.rehireEndDate)??(t==null?void 0:t.reDismissDate)),employmentNote:se((d==null?void 0:d.remark)??(t==null?void 0:t.employmentNote)??"")}})}}Sl(()=>{ke(),Se(),rl(),ue()});const re={username:"",password:"",role:"employee",permissionGrade:"",signRole:"",signTags:[],signLevel:"",employeeNo:"",name:"",gender:"",birthday:"",idNumber:"",birthplace:"",bloodType:"",languages:[],disabilityLevel:"",identityCategory:[],maritalStatus:"",dependents:0,email:"",phone:"",landline:"",householdAddress:"",contactAddress:"",lineId:"",photo:"",photoList:[],organization:"",department:"",supervisor:null,subDepartment:"",title:"",practiceTitle:"",isPartTime:!1,isClocking:!1,employmentStatus:"",probationDays:"",height:null,weight:null,medicalBloodType:"",educationLevel:"",schoolName:"",major:"",graduationStatus:"",graduationYear:"",serviceType:"",militaryBranch:"",militaryRank:"",dischargeYear:null,emergency1:{name:"",relation:"",phone1:"",phone2:""},emergency2:{name:"",relation:"",phone1:"",phone2:""},keywords:"",experiences:[],licenses:[],trainings:[],hireDate:"",appointDate:"",resignDate:"",dismissDate:"",reAppointDate:"",reDismissDate:"",employmentNote:"",salaryType:"",salaryAmount:0,laborPensionSelf:0,employeeAdvance:0,salaryAccountA:{bank:"",acct:""},salaryAccountB:{bank:"",acct:""},salaryItems:[]},o=N({...re}),Te=N(),Ee=r=>({validator:(e,t)=>t===""||t===null||t===void 0?Promise.resolve():typeof t!="number"||!Number.isFinite(t)||t<0?Promise.reject(new Error(`請輸入正確的${r}`)):Promise.resolve(),trigger:["blur","change"]}),nl={username:[{required:!0,message:"請輸入登入帳號",trigger:"blur"}],password:[{required:!0,message:"請輸入登入密碼",trigger:"blur"}],role:[{required:!0,message:"請選擇系統權限",trigger:"change"}],organization:[{required:!0,message:"請選擇所屬機構",trigger:"change"}],department:[{required:!0,message:"請選擇所屬部門",trigger:"change"}],gender:[{required:!0,message:"請選擇性別",trigger:"change"}],name:[{required:!0,message:"請輸入員工姓名",trigger:"blur"}],email:[{required:!0,message:"請輸入有效 Email",type:"email",trigger:["blur","change"]}],laborPensionSelf:[Ee("勞退自提")],employeeAdvance:[Ee("員工預支")],salaryItems:[{validator:(r,e)=>e===""||e===null||e===void 0?Promise.resolve():Array.isArray(e)?e.some(d=>!O.includes(d))?Promise.reject(new Error("請選擇有效的薪資項目")):Promise.resolve():Promise.reject(new Error("請選擇有效的薪資項目")),trigger:"change"}]},dl=K(()=>o.value.organization?F.value.filter(r=>r.organization===o.value.organization):[]),il=K(()=>o.value.department?le.value.filter(r=>r.department===o.value.department):[]),ml=K(()=>o.value.organization&&o.value.department?R.value.filter(r=>r.role==="supervisor"&&r.organization===o.value.organization&&r.department===o.value.department):[]);Tl(()=>o.value.department,async r=>{r?await ue(r):le.value=[],o.value.subDepartment=""});function pl(){o.value.graduationStatus=""}async function Ne(r=null){var e,t,d,g,h;if(r!==null){H=r;const f=R.value[r];te=f._id||"",o.value={...structuredClone(re),...f,password:"",photoList:[]},o.value.permissionGrade=be(o.value.permissionGrade),o.value.signRole=fe(o.value.signRole),o.value.signLevel=ye(o.value.signLevel),o.value.photo=o.value.photo||"";const i=al(o.value.photo,o.value.name);o.value.photoList=i?[i]:[],o.value.licenses=sl(f.licenses??[]),o.value.trainings=ul(f.trainings??[]),o.value.laborPensionSelf=k(o.value.laborPensionSelf)??0,o.value.employeeAdvance=k(o.value.employeeAdvance)??0,o.value.salaryItems=j(o.value.salaryItems).filter(p=>O.includes(p));const s=f.education??{};!o.value.educationLevel&&s.level&&(o.value.educationLevel=s.level),!o.value.schoolName&&s.school&&(o.value.schoolName=s.school),!o.value.major&&s.major&&(o.value.major=s.major),!o.value.graduationStatus&&s.status&&(o.value.graduationStatus=s.status),o.value.graduationYear=se(o.value.graduationYear||s.graduationYear||""),o.value.identityCategory=Array.isArray(o.value.identityCategory)?[...o.value.identityCategory]:[],o.value.height=k(f.height??((e=f.medicalCheck)==null?void 0:e.height)),o.value.weight=k(f.weight??((t=f.medicalCheck)==null?void 0:t.weight)),o.value.medicalBloodType=f.medicalBloodType??((d=f.medicalCheck)==null?void 0:d.bloodType)??"";const D=f.militaryService??{};o.value.serviceType=o.value.serviceType||D.serviceType||"",o.value.militaryBranch=o.value.militaryBranch||D.branch||"",o.value.militaryRank=o.value.militaryRank||D.rank||"";const T=o.value.dischargeYear===""||o.value.dischargeYear===null||o.value.dischargeYear===void 0?D.dischargeYear:o.value.dischargeYear;o.value.dischargeYear=k(T),o.value.department=((g=f.department)==null?void 0:g._id)||f.department||"",o.value.subDepartment=((h=f.subDepartment)==null?void 0:h._id)||f.subDepartment||""}else H=null,te="",ee.value="account",o.value={...structuredClone(re)},o.value.licenses=[],o.value.trainings=[];if(await ke(),o.value.department&&!/^[0-9a-fA-F]{24}$/.test(o.value.department)){const f=F.value.find(i=>i.name===o.value.department);f&&(o.value.department=f._id)}await ue(o.value.department),x.value=!0}async function cl(){var i;let r;try{await((i=Te.value)==null?void 0:i.validate())}catch(s){r=s}if(r){const s=Object.values(r).flat().map(D=>D.message.replace(/^請(?:輸入|選擇)(?:有效)?\s*/,""));Nl.alert(`請補齊：${s.join("、")}`);return}const e=o.value,t={...e},d=tl(e.photoList);d.length?(t.photoList=d,t.photo=d[0]):H!==null?(t.photoList=[],t.photo=""):(delete t.photoList,e.photo||delete t.photo),t.identityCategory=Array.isArray(e.identityCategory)?[...e.identityCategory]:[],t.laborPensionSelf=k(e.laborPensionSelf)??0,t.employeeAdvance=k(e.employeeAdvance)??0,t.salaryItems=Array.isArray(e.salaryItems)?e.salaryItems.filter(s=>O.includes(s)):j(e.salaryItems).filter(s=>O.includes(s)),t.dischargeYear=k(e.dischargeYear),(t.supervisor===""||t.supervisor===null)&&delete t.supervisor;const g=(Array.isArray(e.licenses)?e.licenses:[]).map(s=>{const D=oe((s==null?void 0:s.fileList)??[]),T=typeof(s==null?void 0:s.name)=="string"?s.name.trim():(s==null?void 0:s.name)??"",p=typeof(s==null?void 0:s.number)=="string"?s.number.trim():(s==null?void 0:s.number)??"",y=(s==null?void 0:s.startDate)||"",S=(s==null?void 0:s.endDate)||"";return{name:T,number:p,startDate:y,endDate:S,fileList:D}}).filter(s=>s.name||s.number||s.startDate||s.endDate||Array.isArray(s.fileList)&&s.fileList.length);t.licenses=g;const h=(Array.isArray(e.trainings)?e.trainings:[]).map(s=>{const D=oe((s==null?void 0:s.fileList)??[]),T=j((s==null?void 0:s.category)??(s==null?void 0:s.categories)),p=typeof(s==null?void 0:s.course)=="string"?s.course.trim():(s==null?void 0:s.course)??"",y=typeof(s==null?void 0:s.courseNo)=="string"?s.courseNo.trim():(s==null?void 0:s.courseNo)??"",S=(s==null?void 0:s.date)||"",I=k(s==null?void 0:s.score),L={course:p,courseNo:y,date:S,category:T,fileList:D};return I!==null&&(L.score=I),L}).filter(s=>s.course||s.courseNo||s.date||Array.isArray(s.category)&&s.category.length||Array.isArray(s.fileList)&&s.fileList.length||s.score!==void 0);t.trainings=h;let f;H===null?f=await $("/api/employees",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}):f=await $(`/api/employees/${te}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),f&&f.ok?(await Se(),x.value=!1,Y.success("儲存成功")):Y.error("儲存失敗")}async function vl(r){const e=R.value[r];(await $(`/api/employees/${e._id}`,{method:"DELETE"})).ok&&R.value.splice(r,1)}function fl(){o.value.experiences.push({unit:"",title:"",start:"",end:""})}function yl(r){o.value.experiences.splice(r,1)}function bl(){o.value.licenses.push({name:"",number:"",startDate:"",endDate:"",fileList:[]})}function Vl(r){o.value.licenses.splice(r,1)}function gl(){o.value.trainings.push({course:"",courseNo:"",date:"",fileList:[],category:[],score:null})}function _l(r){o.value.trainings.splice(r,1)}const hl=K(()=>R.value.filter(r=>r.employmentStatus==="正職員工"||r.employmentStatus==="試用期員工").length);function Ul(r){return{admin:"danger",supervisor:"warning",employee:"success"}[r]||"info"}function Ll(r){return{admin:"管理員",supervisor:"主管",employee:"員工"}[r]||r}function Al(r){return{admin:"",supervisor:"",employee:""}[r]||""}function wl(r){return{正職員工:"success",試用期員工:"warning",離職員工:"danger",留職停薪:"info"}[r]||"default"}return(r,e)=>{const t=U("el-button"),d=U("el-avatar"),g=U("el-table-column"),h=U("el-tag"),f=U("el-table"),i=U("el-input"),s=U("el-form-item"),D=U("el-radio"),T=U("el-radio-group"),p=U("el-option"),y=U("el-select"),S=U("el-tab-pane"),I=U("el-upload"),L=U("el-date-picker"),E=U("el-input-number"),G=U("el-switch"),W=U("el-tabs"),ne=U("el-form"),Dl=U("el-dialog");return c(),z(S,{label:"員工管理",name:"employeeMgmt"},{default:n(()=>[u("div",Il,[u("div",Rl,[e[78]||(e[78]=u("div",{class:"header-content"},[u("h1",{class:"page-title"},"員工管理系統"),u("p",{class:"page-description"},"管理員工資料、權限設定、部門分配和薪資配置")],-1)),u("div",Cl,[u("div",Pl,[u("div",$l,_(R.value.length),1),e[76]||(e[76]=u("div",{class:"stat-label"},"總員工數",-1))]),u("div",Ol,[u("div",Bl,_(hl.value),1),e[77]||(e[77]=u("div",{class:"stat-label"},"在職員工",-1))])])]),u("div",zl,[e[80]||(e[80]=u("h2",{class:"section-title"},"員工列表",-1)),a(t,{type:"primary",onClick:e[0]||(e[0]=l=>Ne()),class:"add-btn"},{default:n(()=>e[79]||(e[79]=[u("i",{class:"el-icon-plus"},null,-1),w(" 新增員工 ")])),_:1})]),u("div",Yl,[a(f,{data:R.value,class:"employee-table","header-cell-style":{background:"#f8fafc",color:"#475569",fontWeight:"600"},"row-style":{height:"64px"}},{default:n(()=>[a(g,{prop:"name",label:"員工資訊","min-width":"200"},{default:n(({row:l})=>[u("div",xl,[a(d,{size:40,class:"employee-avatar"},{default:n(()=>[w(_(l.name?l.name.charAt(0):"N"),1)]),_:2},1024),u("div",jl,[u("div",Gl,_(l.name||"未設定"),1),u("div",Ml,_(l.employeeNo||"無編號"),1)])])]),_:1}),a(g,{label:"部門",width:"180"},{default:n(({row:l})=>[u("div",ql,[e[81]||(e[81]=u("i",{class:"el-icon-s-grid dept-icon"},null,-1)),u("span",null,_(Qe(l.department)),1)])]),_:1}),a(g,{prop:"title",label:"職稱",width:"150"},{default:n(({row:l})=>[l.title?(c(),z(h,{key:0,type:"info",class:"title-tag"},{default:n(()=>[w(_(l.title),1)]),_:2},1024)):(c(),v("span",Fl,"未設定"))]),_:1}),a(g,{prop:"role",label:"系統權限",width:"120"},{default:n(({row:l})=>[a(h,{type:Ul(l.role),class:"role-tag"},{default:n(()=>[w(_(Ll(l.role)),1)]),_:2},1032,["type"])]),_:1}),a(g,{prop:"employmentStatus",label:"在職狀態",width:"130"},{default:n(({row:l})=>[a(h,{type:wl(l.employmentStatus),class:"status-tag"},{default:n(()=>[w(_(l.employmentStatus||"未設定"),1)]),_:2},1032,["type"])]),_:1}),a(g,{label:"聯絡方式",width:"200"},{default:n(({row:l})=>[u("div",Hl,[l.email?(c(),v("div",Jl,[e[82]||(e[82]=u("i",{class:"el-icon-message"},null,-1)),u("span",null,_(l.email),1)])):ie("",!0),l.phone?(c(),v("div",Wl,[e[83]||(e[83]=u("i",{class:"el-icon-phone"},null,-1)),u("span",null,_(l.phone),1)])):ie("",!0),!l.email&&!l.phone?(c(),v("div",Kl," 無聯絡資訊 ")):ie("",!0)])]),_:1}),a(g,{label:"操作",width:"200",fixed:"right"},{default:n(({row:l,$index:A})=>[u("div",Ql,[a(t,{type:"primary",size:"small",onClick:m=>Ne(A),class:"edit-btn"},{default:n(()=>e[84]||(e[84]=[u("i",{class:"el-icon-edit"},null,-1),w(" 編輯 ")])),_:2},1032,["onClick"]),a(t,{type:"danger",size:"small",onClick:m=>vl(A),class:"delete-btn"},{default:n(()=>e[85]||(e[85]=[u("i",{class:"el-icon-delete"},null,-1),w(" 刪除 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])]),a(Dl,{modelValue:x.value,"onUpdate:modelValue":e[75]||(e[75]=l=>x.value=l),title:"員工資料管理",width:"1200px",class:"employee-dialog","close-on-click-modal":!1},{footer:n(()=>[u("div",Pt,[a(t,{onClick:e[74]||(e[74]=l=>x.value=!1),class:"cancel-btn"},{default:n(()=>e[124]||(e[124]=[w("取消")])),_:1}),a(t,{type:"primary",onClick:cl,class:"save-btn"},{default:n(()=>e[125]||(e[125]=[u("i",{class:"el-icon-check"},null,-1),w(" 儲存員工資料 ")])),_:1})])]),default:n(()=>[a(ne,{ref_key:"formRef",ref:Te,model:o.value,rules:nl,"label-width":"140px",class:"employee-form"},{default:n(()=>[a(W,{modelValue:ee.value,"onUpdate:modelValue":e[73]||(e[73]=l=>ee.value=l),type:"border-card",class:"employee-tabs"},{default:n(()=>[a(S,{name:"account"},{label:n(()=>e[86]||(e[86]=[u("div",{class:"tab-label"},[u("i",{class:"el-icon-user"}),u("span",null,"帳號權限")],-1)])),default:n(()=>[u("div",Xl,[u("div",Zl,[u("div",ea,[e[87]||(e[87]=u("h3",{class:"form-group-title"},"登入資訊",-1)),a(s,{label:"登入帳號",required:"",prop:"username"},{default:n(()=>[a(i,{modelValue:o.value.username,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.username=l),placeholder:"請輸入登入帳號"},null,8,["modelValue"])]),_:1}),a(s,{label:"登入密碼",required:"",prop:"password"},{default:n(()=>[a(i,{modelValue:o.value.password,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.password=l),type:"password",placeholder:"請輸入密碼","show-password":""},null,8,["modelValue"])]),_:1})]),u("div",la,[e[88]||(e[88]=u("h3",{class:"form-group-title"},"權限設定",-1)),a(s,{label:"系統權限",required:"",prop:"role"},{default:n(()=>[a(T,{modelValue:o.value.role,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.role=l),class:"role-radio-group"},{default:n(()=>[(c(),v(b,null,V(me,l=>a(D,{key:l.value,label:l.value,class:"role-radio"},{default:n(()=>[u("div",aa,[u("div",ta,_(l.label),1),u("div",oa,_(Al(l.value)),1)])]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"權限職等"},{default:n(()=>[a(y,{modelValue:o.value.permissionGrade,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.permissionGrade=l),placeholder:"選擇職等",class:"code-select"},{default:n(()=>[(c(),v(b,null,V(C,l=>a(p,{key:l.level,label:We(l),value:l.level},{default:n(()=>[u("div",sa,[u("div",ua,_(l.level)+"｜"+_(l.description),1)])]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})])])])]),_:1}),a(S,{name:"approval"},{label:n(()=>e[89]||(e[89]=[u("div",{class:"tab-label"},[u("i",{class:"el-icon-document-checked"}),u("span",null,"簽核設定")],-1)])),default:n(()=>[u("div",ra,[u("div",na,[u("div",da,[e[90]||(e[90]=u("h3",{class:"form-group-title"},"簽核權限",-1)),a(s,{label:"簽核角色"},{default:n(()=>[a(T,{modelValue:o.value.signRole,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.signRole=l),class:"sign-role-group"},{default:n(()=>[(c(),v(b,null,V(q,l=>a(D,{key:l.id,label:l.id,class:"sign-role-radio"},{default:n(()=>[u("div",ia,[u("div",ma,_(l.id)+"｜"+_(l.label),1),u("div",pa,_(l.description),1)])]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"簽核層級"},{default:n(()=>[a(y,{modelValue:o.value.signLevel,"onUpdate:modelValue":e[6]||(e[6]=l=>o.value.signLevel=l),placeholder:"選擇層級",class:"code-select"},{default:n(()=>[(c(),v(b,null,V(Z,l=>a(p,{key:l.id,label:Ke(l),value:l.id},{default:n(()=>[u("div",ca,[u("div",va,_(l.id)+"｜"+_(l.label),1),u("div",fa,_(l.description),1)])]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"員工標籤"},{default:n(()=>[a(y,{modelValue:o.value.signTags,"onUpdate:modelValue":e[7]||(e[7]=l=>o.value.signTags=l),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"選擇或新增標籤",class:"tag-select"},{default:n(()=>[(c(),v(b,null,V(xe,l=>a(p,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})])])])]),_:1}),a(S,{name:"personal"},{label:n(()=>e[91]||(e[91]=[u("div",{class:"tab-label"},[u("i",{class:"el-icon-user-solid"}),u("span",null,"個人資訊")],-1)])),default:n(()=>[u("div",ya,[u("div",ba,[u("div",Va,[e[93]||(e[93]=u("h3",{class:"form-group-title"},"基本資料",-1)),a(s,{label:"個人照片",class:"photo-upload-item"},{default:n(()=>[a(I,{class:"employee-photo-upload","file-list":o.value.photoList,"onUpdate:fileList":e[8]||(e[8]=l=>o.value.photoList=l),"http-request":Xe,"on-success":Ze,"on-remove":el,"on-exceed":ll,"list-type":"picture-card",limit:1,accept:"image/*",disabled:ae.value},{default:n(()=>e[92]||(e[92]=[u("div",{class:"upload-placeholder"},[u("i",{class:"el-icon-plus"}),u("span",null,"上傳照片")],-1)])),_:1},8,["file-list","disabled"])]),_:1}),u("div",ga,[a(s,{label:"員工編號"},{default:n(()=>[a(i,{modelValue:o.value.employeeNo,"onUpdate:modelValue":e[9]||(e[9]=l=>o.value.employeeNo=l),placeholder:"請輸入員工編號"},null,8,["modelValue"])]),_:1}),a(s,{label:"員工姓名",required:"",prop:"name"},{default:n(()=>[a(i,{modelValue:o.value.name,"onUpdate:modelValue":e[10]||(e[10]=l=>o.value.name=l),placeholder:"請輸入員工姓名"},null,8,["modelValue"])]),_:1})]),u("div",_a,[a(s,{label:"性別",required:"",prop:"gender"},{default:n(()=>[a(y,{modelValue:o.value.gender,"onUpdate:modelValue":e[11]||(e[11]=l=>o.value.gender=l),placeholder:"選擇性別"},{default:n(()=>[a(p,{label:"男",value:"M"}),a(p,{label:"女",value:"F"})]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"生日"},{default:n(()=>[a(L,{modelValue:o.value.birthday,"onUpdate:modelValue":e[12]||(e[12]=l=>o.value.birthday=l),type:"date",placeholder:"選擇生日"},null,8,["modelValue"])]),_:1})]),u("div",ha,[a(s,{label:"身分證號"},{default:n(()=>[a(i,{modelValue:o.value.idNumber,"onUpdate:modelValue":e[13]||(e[13]=l=>o.value.idNumber=l),placeholder:"請輸入身分證號"},null,8,["modelValue"])]),_:1}),a(s,{label:"出生地"},{default:n(()=>[a(i,{modelValue:o.value.birthplace,"onUpdate:modelValue":e[14]||(e[14]=l=>o.value.birthplace=l),placeholder:"請輸入出生地"},null,8,["modelValue"])]),_:1})]),u("div",Ua,[a(s,{label:"血型"},{default:n(()=>[a(y,{modelValue:o.value.bloodType,"onUpdate:modelValue":e[15]||(e[15]=l=>o.value.bloodType=l),placeholder:"選擇血型"},{default:n(()=>[(c(),v(b,null,V(ce,l=>a(p,{key:l,value:l,label:l},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"婚姻狀態"},{default:n(()=>[a(y,{modelValue:o.value.maritalStatus,"onUpdate:modelValue":e[16]||(e[16]=l=>o.value.maritalStatus=l),placeholder:"選擇婚姻狀態"},{default:n(()=>[a(p,{label:"未婚",value:"未婚"}),a(p,{label:"已婚",value:"已婚"}),a(p,{label:"離婚",value:"離婚"}),a(p,{label:"喪偶",value:"喪偶"})]),_:1},8,["modelValue"])]),_:1})]),a(s,{label:"語言能力"},{default:n(()=>[a(y,{modelValue:o.value.languages,"onUpdate:modelValue":e[17]||(e[17]=l=>o.value.languages=l),multiple:"",filterable:"",placeholder:"選擇語言"},{default:n(()=>[(c(),v(b,null,V(Ce,l=>a(p,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),u("div",La,[a(s,{label:"身心障礙等級"},{default:n(()=>[a(y,{modelValue:o.value.disabilityLevel,"onUpdate:modelValue":e[18]||(e[18]=l=>o.value.disabilityLevel=l),placeholder:"選擇等級",clearable:""},{default:n(()=>[(c(),v(b,null,V(Pe,l=>a(p,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"身分註記"},{default:n(()=>[a(y,{modelValue:o.value.identityCategory,"onUpdate:modelValue":e[19]||(e[19]=l=>o.value.identityCategory=l),multiple:"",filterable:"","collapse-tags":"",placeholder:"選擇身份別"},{default:n(()=>[(c(),v(b,null,V($e,l=>a(p,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),a(s,{label:"扶養人數"},{default:n(()=>[a(E,{modelValue:o.value.dependents,"onUpdate:modelValue":e[20]||(e[20]=l=>o.value.dependents=l),min:0},null,8,["modelValue"])]),_:1})]),u("div",Aa,[e[94]||(e[94]=u("h3",{class:"form-group-title"},"聯絡資訊",-1)),u("div",wa,[a(s,{label:"Email",required:"",prop:"email"},{default:n(()=>[a(i,{modelValue:o.value.email,"onUpdate:modelValue":e[21]||(e[21]=l=>o.value.email=l),placeholder:"請輸入Email"},null,8,["modelValue"])]),_:1}),a(s,{label:"行動電話"},{default:n(()=>[a(i,{modelValue:o.value.phone,"onUpdate:modelValue":e[22]||(e[22]=l=>o.value.phone=l),placeholder:"請輸入行動電話"},null,8,["modelValue"])]),_:1})]),u("div",Da,[a(s,{label:"市內電話"},{default:n(()=>[a(i,{modelValue:o.value.landline,"onUpdate:modelValue":e[23]||(e[23]=l=>o.value.landline=l),placeholder:"請輸入市內電話"},null,8,["modelValue"])]),_:1}),a(s,{label:"LINE ID"},{default:n(()=>[a(i,{modelValue:o.value.lineId,"onUpdate:modelValue":e[24]||(e[24]=l=>o.value.lineId=l),placeholder:"請輸入LINE ID"},null,8,["modelValue"])]),_:1})]),a(s,{label:"戶籍地址"},{default:n(()=>[a(i,{modelValue:o.value.householdAddress,"onUpdate:modelValue":e[25]||(e[25]=l=>o.value.householdAddress=l),placeholder:"請輸入戶籍地址"},null,8,["modelValue"])]),_:1}),a(s,{label:"聯絡地址"},{default:n(()=>[a(i,{modelValue:o.value.contactAddress,"onUpdate:modelValue":e[26]||(e[26]=l=>o.value.contactAddress=l),placeholder:"請輸入聯絡地址"},null,8,["modelValue"])]),_:1})])])])]),_:1}),a(S,{name:"employment"},{label:n(()=>e[95]||(e[95]=[u("div",{class:"tab-label"},[u("i",{class:"el-icon-office-building"}),u("span",null,"任職資訊")],-1)])),default:n(()=>[u("div",ka,[u("div",Sa,[u("div",Ta,[e[96]||(e[96]=u("h3",{class:"form-group-title"},"組織架構",-1)),u("div",Ea,[a(s,{label:"所屬機構",required:"",prop:"organization"},{default:n(()=>[a(y,{modelValue:o.value.organization,"onUpdate:modelValue":e[27]||(e[27]=l=>o.value.organization=l),placeholder:"選擇機構"},{default:n(()=>[(c(!0),v(b,null,V(Ve.value,l=>(c(),z(p,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"所屬部門",required:"",prop:"department"},{default:n(()=>[a(y,{modelValue:o.value.department,"onUpdate:modelValue":e[28]||(e[28]=l=>o.value.department=l),placeholder:"選擇部門"},{default:n(()=>[(c(!0),v(b,null,V(dl.value,l=>(c(),z(p,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),u("div",Na,[a(s,{label:"小單位"},{default:n(()=>[a(y,{modelValue:o.value.subDepartment,"onUpdate:modelValue":e[29]||(e[29]=l=>o.value.subDepartment=l),placeholder:"選擇小單位"},{default:n(()=>[(c(!0),v(b,null,V(il.value,l=>(c(),z(p,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"直屬主管"},{default:n(()=>[a(y,{modelValue:o.value.supervisor,"onUpdate:modelValue":e[30]||(e[30]=l=>o.value.supervisor=l),placeholder:"選擇主管"},{default:n(()=>[(c(!0),v(b,null,V(ml.value,l=>(c(),z(p,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})])]),u("div",Ia,[e[97]||(e[97]=u("h3",{class:"form-group-title"},"職務資訊",-1)),u("div",Ra,[a(s,{label:"職稱"},{default:n(()=>[a(y,{modelValue:o.value.title,"onUpdate:modelValue":e[31]||(e[31]=l=>o.value.title=l),placeholder:"選擇職稱"},{default:n(()=>[(c(),v(b,null,V(Q,l=>a(p,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"執業職稱"},{default:n(()=>[a(y,{modelValue:o.value.practiceTitle,"onUpdate:modelValue":e[32]||(e[32]=l=>o.value.practiceTitle=l),placeholder:"選擇執業職稱"},{default:n(()=>[(c(),v(b,null,V(X,l=>a(p,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),u("div",Ca,[a(s,{label:"兼職人員"},{default:n(()=>[a(G,{modelValue:o.value.isPartTime,"onUpdate:modelValue":e[33]||(e[33]=l=>o.value.isPartTime=l),"active-text":"是","inactive-text":"否","active-color":"#10b981"},null,8,["modelValue"])]),_:1}),a(s,{label:"需要打卡"},{default:n(()=>[a(G,{modelValue:o.value.isClocking,"onUpdate:modelValue":e[34]||(e[34]=l=>o.value.isClocking=l),"active-text":"是","inactive-text":"否","active-color":"#10b981"},null,8,["modelValue"])]),_:1})])]),u("div",Pa,[e[98]||(e[98]=u("h3",{class:"form-group-title"},"聘用狀態",-1)),u("div",$a,[a(s,{label:"在職狀態"},{default:n(()=>[a(y,{modelValue:o.value.employmentStatus,"onUpdate:modelValue":e[35]||(e[35]=l=>o.value.employmentStatus=l),placeholder:"選擇狀態"},{default:n(()=>[a(p,{label:"正職員工",value:"正職員工"}),a(p,{label:"試用期員工",value:"試用期員工"}),a(p,{label:"離職員工",value:"離職員工"}),a(p,{label:"留職停薪",value:"留職停薪"})]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"試用期"},{default:n(()=>[a(y,{modelValue:o.value.probationDays,"onUpdate:modelValue":e[36]||(e[36]=l=>o.value.probationDays=l),placeholder:"選擇天數"},{default:n(()=>[a(p,{label:"無",value:""}),a(p,{label:"30天",value:"30"}),a(p,{label:"60天",value:"60"}),a(p,{label:"90天",value:"90"})]),_:1},8,["modelValue"])]),_:1})]),u("div",Oa,[a(s,{label:"到職日期"},{default:n(()=>[a(L,{modelValue:o.value.hireDate,"onUpdate:modelValue":e[37]||(e[37]=l=>o.value.hireDate=l),type:"date",placeholder:"選擇到職日期"},null,8,["modelValue"])]),_:1}),a(s,{label:"起聘日期"},{default:n(()=>[a(L,{modelValue:o.value.appointDate,"onUpdate:modelValue":e[38]||(e[38]=l=>o.value.appointDate=l),type:"date",placeholder:"選擇起聘日期"},null,8,["modelValue"])]),_:1})]),u("div",Ba,[a(s,{label:"離職日期"},{default:n(()=>[a(L,{modelValue:o.value.resignDate,"onUpdate:modelValue":e[39]||(e[39]=l=>o.value.resignDate=l),type:"date",placeholder:"選擇離職日期"},null,8,["modelValue"])]),_:1}),a(s,{label:"解聘日期"},{default:n(()=>[a(L,{modelValue:o.value.dismissDate,"onUpdate:modelValue":e[40]||(e[40]=l=>o.value.dismissDate=l),type:"date",placeholder:"選擇解聘日期"},null,8,["modelValue"])]),_:1})]),u("div",za,[a(s,{label:"再任起聘"},{default:n(()=>[a(L,{modelValue:o.value.reAppointDate,"onUpdate:modelValue":e[41]||(e[41]=l=>o.value.reAppointDate=l),type:"date",placeholder:"選擇再任起聘日期"},null,8,["modelValue"])]),_:1}),a(s,{label:"再任解聘"},{default:n(()=>[a(L,{modelValue:o.value.reDismissDate,"onUpdate:modelValue":e[42]||(e[42]=l=>o.value.reDismissDate=l),type:"date",placeholder:"選擇再任解聘日期"},null,8,["modelValue"])]),_:1})]),u("div",Ya,[a(s,{label:"聘任備註",class:"full-width-item"},{default:n(()=>[a(i,{modelValue:o.value.employmentNote,"onUpdate:modelValue":e[43]||(e[43]=l=>o.value.employmentNote=l),type:"textarea",rows:2,placeholder:"請輸入聘任備註"},null,8,["modelValue"])]),_:1})])])])])]),_:1}),a(S,{name:"more"},{label:n(()=>e[99]||(e[99]=[u("div",{class:"tab-label"},[u("i",{class:"el-icon-more"}),u("span",null,"更多資訊")],-1)])),default:n(()=>[u("div",xa,[u("div",ja,[u("div",Ga,[e[100]||(e[100]=u("h3",{class:"form-group-title"},"身體檢查",-1)),u("div",Ma,[a(s,{label:"身高 (cm)"},{default:n(()=>[a(E,{modelValue:o.value.height,"onUpdate:modelValue":e[44]||(e[44]=l=>o.value.height=l),min:0,max:250,step:.1,precision:1,"value-on-clear":null,"controls-position":"right",placeholder:"請輸入身高"},null,8,["modelValue"])]),_:1}),a(s,{label:"體重 (kg)"},{default:n(()=>[a(E,{modelValue:o.value.weight,"onUpdate:modelValue":e[45]||(e[45]=l=>o.value.weight=l),min:0,max:300,step:.1,precision:1,"value-on-clear":null,"controls-position":"right",placeholder:"請輸入體重"},null,8,["modelValue"])]),_:1})]),u("div",qa,[a(s,{label:"體檢血型"},{default:n(()=>[a(y,{modelValue:o.value.medicalBloodType,"onUpdate:modelValue":e[46]||(e[46]=l=>o.value.medicalBloodType=l),placeholder:"選擇血型",clearable:""},{default:n(()=>[(c(),v(b,null,V(ce,l=>a(p,{key:`medical-${l}`,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})])]),u("div",Fa,[e[101]||(e[101]=u("h3",{class:"form-group-title"},"學歷資訊",-1)),u("div",Ha,[a(s,{label:"教育程度"},{default:n(()=>[a(y,{modelValue:o.value.educationLevel,"onUpdate:modelValue":e[47]||(e[47]=l=>o.value.educationLevel=l),placeholder:"選擇教育程度"},{default:n(()=>[(c(),v(b,null,V(Oe,l=>a(p,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"學校名稱"},{default:n(()=>[a(i,{modelValue:o.value.schoolName,"onUpdate:modelValue":e[48]||(e[48]=l=>o.value.schoolName=l),placeholder:"請輸入學校名稱"},null,8,["modelValue"])]),_:1})]),u("div",Ja,[a(s,{label:"主修科系"},{default:n(()=>[a(i,{modelValue:o.value.major,"onUpdate:modelValue":e[49]||(e[49]=l=>o.value.major=l),placeholder:"請輸入主修科系"},null,8,["modelValue"])]),_:1}),a(s,{label:"畢業狀態"},{default:n(()=>[a(y,{modelValue:o.value.graduationStatus,"onUpdate:modelValue":e[50]||(e[50]=l=>o.value.graduationStatus=l),placeholder:"選擇畢業狀態",clearable:"",onClear:pl},{default:n(()=>[(c(),v(b,null,V(Be,l=>a(p,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),u("div",Wa,[a(s,{label:"畢業年度",class:"full-width-item"},{default:n(()=>[a(i,{modelValue:o.value.graduationYear,"onUpdate:modelValue":e[51]||(e[51]=l=>o.value.graduationYear=l),placeholder:"請輸入畢業年度"},null,8,["modelValue"])]),_:1})])]),u("div",Ka,[e[102]||(e[102]=u("h3",{class:"form-group-title"},"役別資訊",-1)),u("div",Qa,[a(s,{label:"役別類型"},{default:n(()=>[a(y,{modelValue:o.value.serviceType,"onUpdate:modelValue":e[52]||(e[52]=l=>o.value.serviceType=l),placeholder:"選擇或輸入役別類型",filterable:"","allow-create":"","default-first-option":"",clearable:""},{default:n(()=>[(c(),v(b,null,V(je,l=>a(p,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"軍種"},{default:n(()=>[a(i,{modelValue:o.value.militaryBranch,"onUpdate:modelValue":e[53]||(e[53]=l=>o.value.militaryBranch=l),placeholder:"請輸入軍種"},null,8,["modelValue"])]),_:1})]),u("div",Xa,[a(s,{label:"軍階"},{default:n(()=>[a(i,{modelValue:o.value.militaryRank,"onUpdate:modelValue":e[54]||(e[54]=l=>o.value.militaryRank=l),placeholder:"請輸入軍階"},null,8,["modelValue"])]),_:1}),a(s,{label:"退伍年"},{default:n(()=>[a(E,{modelValue:o.value.dischargeYear,"onUpdate:modelValue":e[55]||(e[55]=l=>o.value.dischargeYear=l),min:1900,max:El(Ge)+10,step:1,"value-on-clear":null,"controls-position":"right",placeholder:"請輸入退伍年"},null,8,["modelValue","max"])]),_:1})])]),u("div",Za,[e[105]||(e[105]=u("h3",{class:"form-group-title"},"緊急聯絡人",-1)),u("div",et,[e[103]||(e[103]=u("h4",{class:"contact-subtitle"},"聯絡人一",-1)),u("div",lt,[a(s,{label:"姓名"},{default:n(()=>[a(i,{modelValue:o.value.emergency1.name,"onUpdate:modelValue":e[56]||(e[56]=l=>o.value.emergency1.name=l),placeholder:"請輸入姓名"},null,8,["modelValue"])]),_:1}),a(s,{label:"關係"},{default:n(()=>[a(y,{modelValue:o.value.emergency1.relation,"onUpdate:modelValue":e[57]||(e[57]=l=>o.value.emergency1.relation=l),placeholder:"選擇關係"},{default:n(()=>[(c(),v(b,null,V(pe,l=>a(p,{key:"r1-"+l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),u("div",at,[a(s,{label:"電話一"},{default:n(()=>[a(i,{modelValue:o.value.emergency1.phone1,"onUpdate:modelValue":e[58]||(e[58]=l=>o.value.emergency1.phone1=l),placeholder:"請輸入電話"},null,8,["modelValue"])]),_:1}),a(s,{label:"電話二"},{default:n(()=>[a(i,{modelValue:o.value.emergency1.phone2,"onUpdate:modelValue":e[59]||(e[59]=l=>o.value.emergency1.phone2=l),placeholder:"請輸入電話"},null,8,["modelValue"])]),_:1})])]),u("div",tt,[e[104]||(e[104]=u("h4",{class:"contact-subtitle"},"聯絡人二",-1)),u("div",ot,[a(s,{label:"姓名"},{default:n(()=>[a(i,{modelValue:o.value.emergency2.name,"onUpdate:modelValue":e[60]||(e[60]=l=>o.value.emergency2.name=l),placeholder:"請輸入姓名"},null,8,["modelValue"])]),_:1}),a(s,{label:"關係"},{default:n(()=>[a(y,{modelValue:o.value.emergency2.relation,"onUpdate:modelValue":e[61]||(e[61]=l=>o.value.emergency2.relation=l),placeholder:"選擇關係"},{default:n(()=>[(c(),v(b,null,V(pe,l=>a(p,{key:"r2-"+l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),u("div",st,[a(s,{label:"電話一"},{default:n(()=>[a(i,{modelValue:o.value.emergency2.phone1,"onUpdate:modelValue":e[62]||(e[62]=l=>o.value.emergency2.phone1=l),placeholder:"請輸入電話"},null,8,["modelValue"])]),_:1}),a(s,{label:"電話二"},{default:n(()=>[a(i,{modelValue:o.value.emergency2.phone2,"onUpdate:modelValue":e[63]||(e[63]=l=>o.value.emergency2.phone2=l),placeholder:"請輸入電話"},null,8,["modelValue"])]),_:1})])])]),u("div",ut,[e[108]||(e[108]=u("h3",{class:"form-group-title"},"工作經歷",-1)),u("div",rt,[(c(!0),v(b,null,V(o.value.experiences,(l,A)=>(c(),v("div",{key:A,class:"experience-item"},[u("div",nt,[u("h4",dt,"經歷 "+_(A+1),1),a(t,{type:"danger",size:"small",onClick:m=>yl(A),class:"remove-btn"},{default:n(()=>e[106]||(e[106]=[u("i",{class:"el-icon-delete"},null,-1),w(" 刪除 ")])),_:2},1032,["onClick"])]),u("div",it,[a(s,{label:"單位名稱"},{default:n(()=>[a(i,{modelValue:l.unit,"onUpdate:modelValue":m=>l.unit=m,placeholder:"請輸入單位名稱"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(s,{label:"職稱"},{default:n(()=>[a(i,{modelValue:l.title,"onUpdate:modelValue":m=>l.title=m,placeholder:"請輸入職稱"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),u("div",mt,[a(s,{label:"到職年月"},{default:n(()=>[a(L,{modelValue:l.start,"onUpdate:modelValue":m=>l.start=m,type:"month",placeholder:"選擇到職年月"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(s,{label:"離職年月"},{default:n(()=>[a(L,{modelValue:l.end,"onUpdate:modelValue":m=>l.end=m,type:"month",placeholder:"選擇離職年月"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]))),128))]),a(t,{type:"primary",onClick:fl,class:"add-item-btn"},{default:n(()=>e[107]||(e[107]=[u("i",{class:"el-icon-plus"},null,-1),w(" 新增經歷 ")])),_:1})]),u("div",pt,[e[113]||(e[113]=u("h3",{class:"form-group-title"},"證照",-1)),u("div",ct,[(c(!0),v(b,null,V(o.value.licenses,(l,A)=>(c(),v("div",{key:`license-${A}`,class:"experience-item"},[u("div",vt,[u("h4",ft,"證照 "+_(A+1),1),a(t,{type:"danger",size:"small",onClick:m=>Vl(A),class:"remove-btn"},{default:n(()=>e[109]||(e[109]=[u("i",{class:"el-icon-delete"},null,-1),w(" 刪除 ")])),_:2},1032,["onClick"])]),u("div",yt,[a(s,{label:"證照名稱"},{default:n(()=>[a(i,{modelValue:l.name,"onUpdate:modelValue":m=>l.name=m,placeholder:"請輸入證照名稱"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(s,{label:"證照字號"},{default:n(()=>[a(i,{modelValue:l.number,"onUpdate:modelValue":m=>l.number=m,placeholder:"請輸入證照字號"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),u("div",bt,[a(s,{label:"核發日期"},{default:n(()=>[a(L,{modelValue:l.startDate,"onUpdate:modelValue":m=>l.startDate=m,type:"date",placeholder:"選擇核發日期"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(s,{label:"有效期限"},{default:n(()=>[a(L,{modelValue:l.endDate,"onUpdate:modelValue":m=>l.endDate=m,type:"date",placeholder:"選擇有效期限"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),u("div",Vt,[a(s,{label:"證照檔案",class:"full-width-item"},{default:n(()=>[a(I,{"file-list":l.fileList,"onUpdate:fileList":m=>l.fileList=m,action:"#",multiple:"","list-type":"text","http-request":Ae,"on-success":(m,P,de)=>we("licenses",A,m,P,de),"on-remove":(m,P)=>De("licenses",A,m,P)},{tip:n(()=>e[111]||(e[111]=[u("div",{class:"upload-tip"},"可上傳多個檔案，將以連結形式儲存",-1)])),default:n(()=>[a(t,{type:"primary",plain:""},{default:n(()=>e[110]||(e[110]=[u("i",{class:"el-icon-upload2"},null,-1),w(" 上傳檔案 ")])),_:1})]),_:2},1032,["file-list","onUpdate:fileList","on-success","on-remove"])]),_:2},1024)])]))),128))]),a(t,{type:"primary",onClick:bl,class:"add-item-btn"},{default:n(()=>e[112]||(e[112]=[u("i",{class:"el-icon-plus"},null,-1),w(" 新增證照 ")])),_:1})]),u("div",gt,[e[118]||(e[118]=u("h3",{class:"form-group-title"},"教育訓練",-1)),u("div",_t,[(c(!0),v(b,null,V(o.value.trainings,(l,A)=>(c(),v("div",{key:`training-${A}`,class:"experience-item"},[u("div",ht,[u("h4",Ut,"教育訓練 "+_(A+1),1),a(t,{type:"danger",size:"small",onClick:m=>_l(A),class:"remove-btn"},{default:n(()=>e[114]||(e[114]=[u("i",{class:"el-icon-delete"},null,-1),w(" 刪除 ")])),_:2},1032,["onClick"])]),u("div",Lt,[a(s,{label:"課程名稱"},{default:n(()=>[a(i,{modelValue:l.course,"onUpdate:modelValue":m=>l.course=m,placeholder:"請輸入課程名稱"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(s,{label:"課程代碼"},{default:n(()=>[a(i,{modelValue:l.courseNo,"onUpdate:modelValue":m=>l.courseNo=m,placeholder:"請輸入課程代碼"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),u("div",At,[a(s,{label:"上課日期"},{default:n(()=>[a(L,{modelValue:l.date,"onUpdate:modelValue":m=>l.date=m,type:"date",placeholder:"選擇日期"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(s,{label:"積分類別",class:"full-width-item"},{default:n(()=>[a(y,{modelValue:l.category,"onUpdate:modelValue":m=>l.category=m,multiple:"","collapse-tags":"",placeholder:"選擇積分類別"},{default:n(()=>[(c(),v(b,null,V(ze,m=>a(p,{key:m,label:m,value:m},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),u("div",wt,[a(s,{label:"積分"},{default:n(()=>[a(E,{modelValue:l.score,"onUpdate:modelValue":m=>l.score=m,min:0,step:.5,"value-on-clear":null},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(s,{label:"訓練檔案",class:"full-width-item"},{default:n(()=>[a(I,{"file-list":l.fileList,"onUpdate:fileList":m=>l.fileList=m,action:"#",multiple:"","list-type":"text","http-request":Ae,"on-success":(m,P,de)=>we("trainings",A,m,P,de),"on-remove":(m,P)=>De("trainings",A,m,P)},{tip:n(()=>e[116]||(e[116]=[u("div",{class:"upload-tip"},"支援多檔上傳，將以連結形式儲存",-1)])),default:n(()=>[a(t,{type:"primary",plain:""},{default:n(()=>e[115]||(e[115]=[u("i",{class:"el-icon-upload2"},null,-1),w(" 上傳檔案 ")])),_:1})]),_:2},1032,["file-list","onUpdate:fileList","on-success","on-remove"])]),_:2},1024)])]))),128))]),a(t,{type:"primary",onClick:gl,class:"add-item-btn"},{default:n(()=>e[117]||(e[117]=[u("i",{class:"el-icon-plus"},null,-1),w(" 新增教育訓練 ")])),_:1})])])])]),_:1}),a(S,{name:"salary"},{label:n(()=>e[119]||(e[119]=[u("div",{class:"tab-label"},[u("i",{class:"el-icon-money"}),u("span",null,"薪資設定")],-1)])),default:n(()=>[u("div",Dt,[u("div",kt,[u("div",St,[e[120]||(e[120]=u("h3",{class:"form-group-title"},"薪資資訊",-1)),u("div",Tt,[a(s,{label:"薪資類別"},{default:n(()=>[a(y,{modelValue:o.value.salaryType,"onUpdate:modelValue":e[64]||(e[64]=l=>o.value.salaryType=l),placeholder:"選擇類別"},{default:n(()=>[(c(),v(b,null,V(Ye,l=>a(p,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"薪資金額"},{default:n(()=>[a(E,{modelValue:o.value.salaryAmount,"onUpdate:modelValue":e[65]||(e[65]=l=>o.value.salaryAmount=l),min:0,step:1e3,formatter:l=>`$ ${l??0}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:l=>l?l.replace(/\$\s?|(,*)/g,""):""},null,8,["modelValue","formatter","parser"])]),_:1}),a(s,{label:"勞退自提",prop:"laborPensionSelf"},{default:n(()=>[a(E,{modelValue:o.value.laborPensionSelf,"onUpdate:modelValue":e[66]||(e[66]=l=>o.value.laborPensionSelf=l),min:0,step:100,formatter:l=>`$ ${l??0}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:l=>l?l.replace(/\$\s?|(,*)/g,""):""},null,8,["modelValue","formatter","parser"])]),_:1}),a(s,{label:"員工預支",prop:"employeeAdvance"},{default:n(()=>[a(E,{modelValue:o.value.employeeAdvance,"onUpdate:modelValue":e[67]||(e[67]=l=>o.value.employeeAdvance=l),min:0,step:100,formatter:l=>`$ ${l??0}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:l=>l?l.replace(/\$\s?|(,*)/g,""):""},null,8,["modelValue","formatter","parser"])]),_:1}),a(s,{class:"full-width-item",label:"薪資項目",prop:"salaryItems"},{default:n(()=>[a(y,{modelValue:o.value.salaryItems,"onUpdate:modelValue":e[68]||(e[68]=l=>o.value.salaryItems=l),multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"選擇薪資項目"},{default:n(()=>[(c(),v(b,null,V(O,l=>a(p,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})])]),u("div",Et,[e[123]||(e[123]=u("h3",{class:"form-group-title"},"銀行帳戶",-1)),u("div",Nt,[e[121]||(e[121]=u("h4",{class:"account-subtitle"},"薪資帳戶 A",-1)),u("div",It,[a(s,{label:"銀行代碼/名稱"},{default:n(()=>[a(i,{modelValue:o.value.salaryAccountA.bank,"onUpdate:modelValue":e[69]||(e[69]=l=>o.value.salaryAccountA.bank=l),placeholder:"請輸入銀行資訊"},null,8,["modelValue"])]),_:1}),a(s,{label:"帳號"},{default:n(()=>[a(i,{modelValue:o.value.salaryAccountA.acct,"onUpdate:modelValue":e[70]||(e[70]=l=>o.value.salaryAccountA.acct=l),placeholder:"請輸入帳號"},null,8,["modelValue"])]),_:1})])]),u("div",Rt,[e[122]||(e[122]=u("h4",{class:"account-subtitle"},"薪資帳戶 B",-1)),u("div",Ct,[a(s,{label:"銀行代碼/名稱"},{default:n(()=>[a(i,{modelValue:o.value.salaryAccountB.bank,"onUpdate:modelValue":e[71]||(e[71]=l=>o.value.salaryAccountB.bank=l),placeholder:"請輸入銀行資訊"},null,8,["modelValue"])]),_:1}),a(s,{label:"帳號"},{default:n(()=>[a(i,{modelValue:o.value.salaryAccountB.acct,"onUpdate:modelValue":e[72]||(e[72]=l=>o.value.salaryAccountB.acct=l),placeholder:"請輸入帳號"},null,8,["modelValue"])]),_:1})])])])])])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])]),_:1})}}},Ot=Ie($t,[["__scopeId","data-v-14c61383"]]),Bt={class:"hr-management-system-setting"},zt={__name:"HRManagementSystemSetting",setup(Re){const M=N("employeeMgmt");return(me,C)=>{const Q=U("el-tabs");return c(),v("div",Bt,[C[1]||(C[1]=u("h2",null,"人事管理與系統設定",-1)),a(Q,{modelValue:M.value,"onUpdate:modelValue":C[0]||(C[0]=X=>M.value=X),type:"card"},{default:n(()=>[a(Ot)]),_:1},8,["modelValue"])])}}},jt=Ie(zt,[["__scopeId","data-v-8631704d"]]);export{jt as default};
