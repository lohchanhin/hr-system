import{a as I}from"./api-6fBn2dnK.js";import{_ as re,r as k,x as L,j as me,k as X,c as N,o as b,b as n,d as a,t as f,w as o,e as _,g as V,F as x,p as j,l as M,m as pe}from"./index-BsavUnBu.js";const ve={class:"org-dept-setting"},fe={class:"page-header"},be={class:"header-stats"},ce={class:"stat-item"},Ve={class:"stat-number"},ge={class:"stat-item"},_e={class:"stat-number"},ke={class:"stat-item"},ye={class:"stat-number"},we={class:"tab-content"},he={class:"content-header"},Ne={class:"table-container"},Ue={class:"org-info"},Ce={class:"org-details"},Ie={class:"org-name"},xe={class:"org-unit"},Be={class:"action-buttons"},$e={class:"tab-content"},Me={class:"content-header"},Se={class:"header-actions"},Te={class:"table-container"},ze={class:"dept-info"},je={class:"dept-details"},Oe={class:"dept-name"},Pe={class:"dept-unit"},Le={class:"action-buttons"},De={class:"tab-content"},Ae={class:"content-header"},Ge={class:"header-actions"},Fe={key:0,class:"current-dept"},Re={class:"table-container"},qe={class:"sub-info"},Ee={class:"sub-details"},Je={class:"sub-name"},We={class:"sub-unit"},He={class:"headcount-info"},Ke={class:"action-buttons"},Qe={class:"form-section"},Xe={class:"form-section"},Ye={class:"form-section"},Ze={class:"form-section"},el={class:"form-section"},ll={class:"form-section"},al={class:"form-section"},tl={key:2,class:"form-section"},ol={class:"dialog-footer"},nl={__name:"OrgDepartmentSetting",setup(Y){const D=k("org"),U=k([]),w=k([]),B=k([]),C=k(""),h=k(""),q=k([]),E=k(!1),O=k(!1),t=k(G("org")),y=k("org"),S=k(null),J=k([]),Z=L(()=>C.value?w.value.filter(u=>u.organization===C.value):w.value),ee=L(()=>h.value?B.value.filter(u=>u.department===h.value):B.value),W=L(()=>{const u=w.value.find(e=>e._id===h.value);return u?u.name:""}),le=L(()=>{var m;if(!h.value)return"";const u=w.value.find(p=>p._id===h.value);if(!u)return"";const e=u.organization,d=(m=U.value.find(p=>p._id===e))==null?void 0:m.name,s=u.name;return!d||!s?"":`${d}-${s}`}),ae=L(()=>{const u=y.value==="org"?"機構":y.value==="dept"?"部門":"小單位";return`${S.value===null?"新增":"編輯"}${u}`});function A(u){return u==="org"?"/api/organizations":u==="dept"?"/api/departments":"/api/sub-departments"}async function $(u,e){let d=A(u);e&&(d+=`?${u==="dept"?"organization":"department"}=${e}`);const s=await I(d);if(s.ok){const m=await s.json();u==="org"?U.value=m:u==="dept"?w.value=m.map(p=>{const g=p.organization;let c="";return typeof g=="string"?c=g:g&&typeof g=="object"?c=g._id||g.id||"":"organizationId"in p&&(c=p.organizationId),!c&&e&&(c=e),{...p,organization:c}}):B.value=m.map(p=>({...p,shiftId:p.shiftId??p.shift??""}))}}async function H(){await Promise.all([$("org"),$("dept",C.value),$("sub",h.value)]),await K()}function G(u){return u==="org"?{name:"",systemCode:"",unitName:"",orgCode:"",taxIdNumber:"",laborInsuranceNo:"",healthInsuranceNo:"",taxCode:"",address:"",phone:"",principal:""}:u==="dept"?{name:"",code:"",unitName:"",institutionCode:"",uniformNumber:"",laborInsuranceNumber:"",healthInsuranceNumber:"",taxRegistrationNumber:"",location:"",phone:"",responsiblePerson:"",manager:"",organization:"",defaultTwoDayOff:!0,tempChangeAllowed:!1,deptManager:"",scheduleNotes:"",enableGlobalBreak:!1,breakMinutes:60,allowMultiBreak:!1,breakSettingId:""}:{name:"",code:"",unitName:"",institutionCode:"",uniformNumber:"",laborInsuranceNumber:"",healthInsuranceNumber:"",taxRegistrationNumber:"",location:"",phone:"",responsiblePerson:"",manager:"",headcount:0,shiftId:"",department:""}}async function T(u,e=null){if(y.value=u,u==="sub"&&await K(!0),e!==null){S.value=e;const d=u==="org"?U.value[e]:u==="dept"?w.value[e]:B.value[e];if(t.value={...G(u),...d},u==="sub"){const s=(d==null?void 0:d.shiftId)??(d==null?void 0:d.shift)??"";t.value.shiftId=s?s.toString():"",delete t.value.shift}if(u==="dept"){const s=await ue(d==null?void 0:d._id);s&&(t.value={...t.value,...s})}}else S.value=null,t.value=G(u),u==="dept"&&(t.value.organization=C.value),u==="sub"&&(t.value.department=h.value);O.value=!0}async function te(){var p,g,c;const u=A(y.value),e=y.value==="org"?U:y.value==="dept"?w:B;let d={...t.value};if(y.value==="dept"){const{enableGlobalBreak:v,breakMinutes:R,allowMultiBreak:r,breakSettingId:i,...z}=d;d=z}y.value==="sub"&&delete d.shift;let s;if(S.value===null)s=await I(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});else{const v=e.value[S.value]._id;s=await I(`${u}/${v}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})}let m=null;if(s&&s.ok&&y.value==="dept"&&(((g=(p=s.headers)==null?void 0:p.get)==null?void 0:g.call(p,"content-type"))||"").includes("application/json")&&typeof s.json=="function")try{m=await s.json()}catch{m=null}if(s&&s.ok){if(y.value==="dept"){const v=t.value._id||(m==null?void 0:m._id)||(m==null?void 0:m.id)||((c=e.value[S.value])==null?void 0:c._id);v&&await de(v)}await H(),O.value=!1}}function F(u,e){const d=u==="org"?U:u==="dept"?w:B,s=d.value[e]._id;I(`${A(u)}/${s}`,{method:"DELETE"}).then(m=>{m.ok&&d.value.splice(e,1)})}async function oe(){const u=await I("/api/dept-managers");u.ok&&(J.value=await u.json())}function ne(u){if(!u)return"";const e=u.name||"",d=u.code||"";return e&&d?`${e} (${d})`:e||d||"未命名班別"}async function K(u=!1){if(!(E.value&&!u))try{const e=await I("/api/shifts");if(e.ok){const d=await e.json();q.value=Array.isArray(d==null?void 0:d.shifts)?d.shifts:Array.isArray(d)?d:[],E.value=!0}}catch(e){console.error(e)}}async function ue(u){if(!u)return null;try{const e=await I(`/api/break-settings?department=${u}`);if(e.ok){const d=await e.json(),s=Array.isArray(d)?d[0]:d;if(s)return{breakSettingId:s._id||"",enableGlobalBreak:!!s.enableGlobalBreak,breakMinutes:typeof s.breakMinutes=="number"?s.breakMinutes:60,allowMultiBreak:!!s.allowMultiBreak}}}catch(e){console.error(e)}return null}async function de(u){var p,g;const e={department:u,enableGlobalBreak:!!t.value.enableGlobalBreak,breakMinutes:Number(t.value.breakMinutes??0),allowMultiBreak:!!t.value.allowMultiBreak};let d="/api/break-settings",s="POST";t.value.breakSettingId&&(d+=`/${t.value.breakSettingId}`,s="PUT");const m=await I(d,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(m&&m.ok){if((((g=(p=m.headers)==null?void 0:p.get)==null?void 0:g.call(p,"content-type"))||"").includes("application/json")&&typeof m.json=="function")try{const v=await m.json();v!=null&&v._id&&(t.value.breakSettingId=v._id)}catch(v){console.error(v)}return!0}return!1}return me(()=>{H(),oe()}),X(C,u=>{$("dept",u)}),X(h,u=>{$("sub",u)}),(u,e)=>{const d=_("el-button"),s=_("el-table-column"),m=_("el-tag"),p=_("el-table"),g=_("el-tab-pane"),c=_("el-option"),v=_("el-select"),R=_("el-tabs"),r=_("el-input"),i=_("el-form-item"),z=_("el-switch"),Q=_("el-input-number"),se=_("el-form"),ie=_("el-dialog");return b(),N("div",ve,[n("div",fe,[e[59]||(e[59]=n("div",{class:"header-content"},[n("h1",{class:"page-title"},"機構與部門設定"),n("p",{class:"page-description"},"管理組織架構、部門層級和小單位配置")],-1)),n("div",be,[n("div",ce,[n("div",Ve,f(U.value.length),1),e[56]||(e[56]=n("div",{class:"stat-label"},"機構",-1))]),n("div",ge,[n("div",_e,f(w.value.length),1),e[57]||(e[57]=n("div",{class:"stat-label"},"部門",-1))]),n("div",ke,[n("div",ye,f(B.value.length),1),e[58]||(e[58]=n("div",{class:"stat-label"},"小單位",-1))])])]),a(R,{modelValue:D.value,"onUpdate:modelValue":e[7]||(e[7]=l=>D.value=l),type:"card",class:"org-tabs"},{default:o(()=>[a(g,{name:"org"},{label:o(()=>e[60]||(e[60]=[n("div",{class:"tab-label"},[n("i",{class:"el-icon-office-building"}),n("span",null,"機構管理")],-1)])),default:o(()=>[n("div",we,[n("div",he,[e[62]||(e[62]=n("h2",{class:"section-title"},"機構列表",-1)),a(d,{type:"primary",onClick:e[0]||(e[0]=l=>T("org")),class:"add-btn"},{default:o(()=>e[61]||(e[61]=[n("i",{class:"el-icon-plus"},null,-1),V(" 新增機構 ")])),_:1})]),n("div",Ne,[a(p,{data:U.value,class:"data-table","header-cell-style":{background:"#f8fafc",color:"#475569",fontWeight:"600"},"row-style":{height:"56px"}},{default:o(()=>[a(s,{prop:"name",label:"機構名稱","min-width":"200"},{default:o(({row:l})=>[n("div",Ue,[e[63]||(e[63]=n("div",{class:"org-icon"},[n("i",{class:"el-icon-office-building"})],-1)),n("div",Ce,[n("div",Ie,f(l.name),1),n("div",xe,f(l.unitName||"未設定"),1)])])]),_:1}),a(s,{prop:"systemCode",label:"系統代碼",width:"140"},{default:o(({row:l})=>[a(m,{class:"code-tag"},{default:o(()=>[V(f(l.systemCode||"-"),1)]),_:2},1024)]),_:1}),a(s,{prop:"phone",label:"聯絡電話",width:"150"}),a(s,{prop:"principal",label:"負責人",width:"120"}),a(s,{label:"操作",width:"200",fixed:"right"},{default:o(({$index:l})=>[n("div",Be,[a(d,{type:"primary",size:"small",onClick:P=>T("org",l),class:"edit-btn"},{default:o(()=>e[64]||(e[64]=[n("i",{class:"el-icon-edit"},null,-1),V(" 編輯 ")])),_:2},1032,["onClick"]),a(d,{type:"danger",size:"small",onClick:P=>F("org",l),class:"delete-btn"},{default:o(()=>e[65]||(e[65]=[n("i",{class:"el-icon-delete"},null,-1),V(" 刪除 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])])]),_:1}),a(g,{name:"dept"},{label:o(()=>e[66]||(e[66]=[n("div",{class:"tab-label"},[n("i",{class:"el-icon-s-grid"}),n("span",null,"部門管理")],-1)])),default:o(()=>[n("div",$e,[n("div",Me,[e[68]||(e[68]=n("h2",{class:"section-title"},"部門列表",-1)),n("div",Se,[a(v,{modelValue:C.value,"onUpdate:modelValue":e[1]||(e[1]=l=>C.value=l),placeholder:"篩選機構",class:"filter-select",onChange:e[2]||(e[2]=l=>$("dept",C.value)),clearable:""},{default:o(()=>[(b(!0),N(x,null,j(U.value,l=>(b(),M(c,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(d,{type:"primary",onClick:e[3]||(e[3]=l=>T("dept")),class:"add-btn"},{default:o(()=>e[67]||(e[67]=[n("i",{class:"el-icon-plus"},null,-1),V(" 新增部門 ")])),_:1})])]),n("div",Te,[a(p,{data:Z.value,class:"data-table","header-cell-style":{background:"#f8fafc",color:"#475569",fontWeight:"600"},"row-style":{height:"56px"}},{default:o(()=>[a(s,{prop:"name",label:"部門名稱","min-width":"200"},{default:o(({row:l})=>[n("div",ze,[e[69]||(e[69]=n("div",{class:"dept-icon"},[n("i",{class:"el-icon-s-grid"})],-1)),n("div",je,[n("div",Oe,f(l.name),1),n("div",Pe,f(l.unitName||"未設定"),1)])])]),_:1}),a(s,{prop:"code",label:"部門代碼",width:"140"},{default:o(({row:l})=>[a(m,{type:"success",class:"code-tag"},{default:o(()=>[V(f(l.code||"-"),1)]),_:2},1024)]),_:1}),a(s,{prop:"institutionCode",label:"機構代碼",width:"140"},{default:o(({row:l})=>[a(m,{type:"warning",class:"code-tag"},{default:o(()=>[V(f(l.institutionCode||"-"),1)]),_:2},1024)]),_:1}),a(s,{prop:"uniformNumber",label:"統一編號",width:"160"},{default:o(({row:l})=>[n("span",null,f(l.uniformNumber||"-"),1)]),_:1}),a(s,{prop:"location",label:"位置",width:"150"}),a(s,{prop:"responsiblePerson",label:"負責人",width:"120"}),a(s,{prop:"manager",label:"部門主管",width:"120"}),a(s,{label:"操作",width:"200",fixed:"right"},{default:o(({$index:l})=>[n("div",Le,[a(d,{type:"primary",size:"small",onClick:P=>T("dept",l),class:"edit-btn"},{default:o(()=>e[70]||(e[70]=[n("i",{class:"el-icon-edit"},null,-1),V(" 編輯 ")])),_:2},1032,["onClick"]),a(d,{type:"danger",size:"small",onClick:P=>F("dept",l),class:"delete-btn"},{default:o(()=>e[71]||(e[71]=[n("i",{class:"el-icon-delete"},null,-1),V(" 刪除 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])])]),_:1}),a(g,{name:"sub"},{label:o(()=>e[72]||(e[72]=[n("div",{class:"tab-label"},[n("i",{class:"el-icon-menu"}),n("span",null,"小單位管理")],-1)])),default:o(()=>[n("div",De,[n("div",Ae,[e[74]||(e[74]=n("h2",{class:"section-title"},"小單位列表",-1)),n("div",Ge,[a(m,{type:"info",class:"dept-context-tag"},{default:o(()=>[V(f(le.value||"請選擇部門"),1)]),_:1}),a(v,{modelValue:h.value,"onUpdate:modelValue":e[4]||(e[4]=l=>h.value=l),placeholder:"篩選部門",class:"filter-select",onChange:e[5]||(e[5]=l=>$("sub",h.value)),clearable:""},{default:o(()=>[(b(!0),N(x,null,j(w.value,l=>(b(),M(c,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(d,{type:"primary",onClick:e[6]||(e[6]=l=>T("sub")),class:"add-btn"},{default:o(()=>e[73]||(e[73]=[n("i",{class:"el-icon-plus"},null,-1),V(" 新增小單位 ")])),_:1})])]),W.value?(b(),N("div",Fe,"目前部門："+f(W.value),1)):pe("",!0),n("div",Re,[a(p,{data:ee.value,class:"data-table","header-cell-style":{background:"#f8fafc",color:"#475569",fontWeight:"600"},"row-style":{height:"56px"}},{default:o(()=>[a(s,{prop:"name",label:"小單位名稱","min-width":"200"},{default:o(({row:l})=>[n("div",qe,[e[75]||(e[75]=n("div",{class:"sub-icon"},[n("i",{class:"el-icon-menu"})],-1)),n("div",Ee,[n("div",Je,f(l.name),1),n("div",We,f(l.unitName||"未設定"),1)])])]),_:1}),a(s,{prop:"code",label:"代碼",width:"120"},{default:o(({row:l})=>[a(m,{type:"info",class:"code-tag"},{default:o(()=>[V(f(l.code||"-"),1)]),_:2},1024)]),_:1}),a(s,{prop:"institutionCode",label:"機構代碼",width:"140"},{default:o(({row:l})=>[n("span",null,f(l.institutionCode||"-"),1)]),_:1}),a(s,{prop:"uniformNumber",label:"統一編號",width:"160"},{default:o(({row:l})=>[n("span",null,f(l.uniformNumber||"-"),1)]),_:1}),a(s,{prop:"headcount",label:"人力需求",width:"100"},{default:o(({row:l})=>[n("div",He,[e[76]||(e[76]=n("i",{class:"el-icon-user"},null,-1)),V(" "+f(l.headcount||0),1)])]),_:1}),a(s,{prop:"responsiblePerson",label:"負責人",width:"120"}),a(s,{prop:"manager",label:"主管",width:"120"}),a(s,{label:"操作",width:"200",fixed:"right"},{default:o(({$index:l})=>[n("div",Ke,[a(d,{type:"primary",size:"small",onClick:P=>T("sub",l),class:"edit-btn"},{default:o(()=>e[77]||(e[77]=[n("i",{class:"el-icon-edit"},null,-1),V(" 編輯 ")])),_:2},1032,["onClick"]),a(d,{type:"danger",size:"small",onClick:P=>F("sub",l),class:"delete-btn"},{default:o(()=>e[78]||(e[78]=[n("i",{class:"el-icon-delete"},null,-1),V(" 刪除 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])])]),_:1})]),_:1},8,["modelValue"]),a(ie,{modelValue:O.value,"onUpdate:modelValue":e[55]||(e[55]=l=>O.value=l),title:ae.value,width:"600px",class:"form-dialog"},{footer:o(()=>[n("div",ol,[a(d,{onClick:e[54]||(e[54]=l=>O.value=!1),class:"cancel-btn"},{default:o(()=>e[87]||(e[87]=[V("取消")])),_:1}),a(d,{type:"primary",onClick:te,class:"save-btn"},{default:o(()=>e[88]||(e[88]=[n("i",{class:"el-icon-check"},null,-1),V(" 儲存 ")])),_:1})])]),default:o(()=>[a(se,{model:t.value,"label-width":"120px",class:"dialog-form"},{default:o(()=>[y.value==="org"?(b(),N(x,{key:0},[n("div",Qe,[e[79]||(e[79]=n("h3",{class:"form-section-title"},"基本資訊",-1)),a(i,{label:"機構名稱",required:""},{default:o(()=>[a(r,{modelValue:t.value.name,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.name=l),placeholder:"請輸入機構名稱"},null,8,["modelValue"])]),_:1}),a(i,{label:"系統代碼"},{default:o(()=>[a(r,{modelValue:t.value.systemCode,"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.systemCode=l),placeholder:"請輸入系統代碼"},null,8,["modelValue"])]),_:1}),a(i,{label:"單位名稱"},{default:o(()=>[a(r,{modelValue:t.value.unitName,"onUpdate:modelValue":e[10]||(e[10]=l=>t.value.unitName=l),placeholder:"請輸入單位名稱"},null,8,["modelValue"])]),_:1}),a(i,{label:"機構代碼"},{default:o(()=>[a(r,{modelValue:t.value.orgCode,"onUpdate:modelValue":e[11]||(e[11]=l=>t.value.orgCode=l),placeholder:"請輸入機構代碼"},null,8,["modelValue"])]),_:1})]),n("div",Xe,[e[80]||(e[80]=n("h3",{class:"form-section-title"},"證照資訊",-1)),a(i,{label:"統一編號"},{default:o(()=>[a(r,{modelValue:t.value.taxIdNumber,"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.taxIdNumber=l),placeholder:"請輸入統一編號"},null,8,["modelValue"])]),_:1}),a(i,{label:"勞保編號"},{default:o(()=>[a(r,{modelValue:t.value.laborInsuranceNo,"onUpdate:modelValue":e[13]||(e[13]=l=>t.value.laborInsuranceNo=l),placeholder:"請輸入勞保編號"},null,8,["modelValue"])]),_:1}),a(i,{label:"健保編號"},{default:o(()=>[a(r,{modelValue:t.value.healthInsuranceNo,"onUpdate:modelValue":e[14]||(e[14]=l=>t.value.healthInsuranceNo=l),placeholder:"請輸入健保編號"},null,8,["modelValue"])]),_:1}),a(i,{label:"稅籍編號"},{default:o(()=>[a(r,{modelValue:t.value.taxCode,"onUpdate:modelValue":e[15]||(e[15]=l=>t.value.taxCode=l),placeholder:"請輸入稅籍編號"},null,8,["modelValue"])]),_:1})]),n("div",Ye,[e[81]||(e[81]=n("h3",{class:"form-section-title"},"聯絡資訊",-1)),a(i,{label:"位置"},{default:o(()=>[a(r,{modelValue:t.value.address,"onUpdate:modelValue":e[16]||(e[16]=l=>t.value.address=l),placeholder:"請輸入地址"},null,8,["modelValue"])]),_:1}),a(i,{label:"連絡電話"},{default:o(()=>[a(r,{modelValue:t.value.phone,"onUpdate:modelValue":e[17]||(e[17]=l=>t.value.phone=l),placeholder:"請輸入連絡電話"},null,8,["modelValue"])]),_:1}),a(i,{label:"負責人"},{default:o(()=>[a(r,{modelValue:t.value.principal,"onUpdate:modelValue":e[18]||(e[18]=l=>t.value.principal=l),placeholder:"請輸入負責人姓名"},null,8,["modelValue"])]),_:1})])],64)):y.value==="dept"?(b(),N(x,{key:1},[n("div",Ze,[e[82]||(e[82]=n("h3",{class:"form-section-title"},"部門資訊",-1)),a(i,{label:"所屬機構",required:""},{default:o(()=>[a(v,{modelValue:t.value.organization,"onUpdate:modelValue":e[19]||(e[19]=l=>t.value.organization=l),placeholder:"選擇機構",style:{width:"100%"}},{default:o(()=>[(b(!0),N(x,null,j(U.value,l=>(b(),M(c,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"部門名稱",required:""},{default:o(()=>[a(r,{modelValue:t.value.name,"onUpdate:modelValue":e[20]||(e[20]=l=>t.value.name=l),placeholder:"請輸入部門名稱"},null,8,["modelValue"])]),_:1}),a(i,{label:"部門代碼"},{default:o(()=>[a(r,{modelValue:t.value.code,"onUpdate:modelValue":e[21]||(e[21]=l=>t.value.code=l),placeholder:"請輸入部門代碼"},null,8,["modelValue"])]),_:1}),a(i,{label:"單位名稱"},{default:o(()=>[a(r,{modelValue:t.value.unitName,"onUpdate:modelValue":e[22]||(e[22]=l=>t.value.unitName=l),placeholder:"請輸入單位名稱"},null,8,["modelValue"])]),_:1}),a(i,{label:"位置"},{default:o(()=>[a(r,{modelValue:t.value.location,"onUpdate:modelValue":e[23]||(e[23]=l=>t.value.location=l),placeholder:"請輸入部門位置"},null,8,["modelValue"])]),_:1}),a(i,{label:"連絡電話"},{default:o(()=>[a(r,{modelValue:t.value.phone,"onUpdate:modelValue":e[24]||(e[24]=l=>t.value.phone=l),placeholder:"請輸入連絡電話"},null,8,["modelValue"])]),_:1}),a(i,{label:"部門主管"},{default:o(()=>[a(r,{modelValue:t.value.manager,"onUpdate:modelValue":e[25]||(e[25]=l=>t.value.manager=l),placeholder:"請輸入部門主管姓名"},null,8,["modelValue"])]),_:1}),a(i,{label:"負責人"},{default:o(()=>[a(r,{modelValue:t.value.responsiblePerson,"onUpdate:modelValue":e[26]||(e[26]=l=>t.value.responsiblePerson=l),placeholder:"請輸入負責人姓名"},null,8,["modelValue"])]),_:1}),a(i,{label:"機構代碼"},{default:o(()=>[a(r,{modelValue:t.value.institutionCode,"onUpdate:modelValue":e[27]||(e[27]=l=>t.value.institutionCode=l),placeholder:"請輸入機構代碼"},null,8,["modelValue"])]),_:1})]),n("div",el,[e[83]||(e[83]=n("h3",{class:"form-section-title"},"法規資訊",-1)),a(i,{label:"統一編號"},{default:o(()=>[a(r,{modelValue:t.value.uniformNumber,"onUpdate:modelValue":e[28]||(e[28]=l=>t.value.uniformNumber=l),placeholder:"請輸入統一編號",maxlength:"8"},null,8,["modelValue"])]),_:1}),a(i,{label:"勞保證號"},{default:o(()=>[a(r,{modelValue:t.value.laborInsuranceNumber,"onUpdate:modelValue":e[29]||(e[29]=l=>t.value.laborInsuranceNumber=l),placeholder:"請輸入勞保證號"},null,8,["modelValue"])]),_:1}),a(i,{label:"健保編號"},{default:o(()=>[a(r,{modelValue:t.value.healthInsuranceNumber,"onUpdate:modelValue":e[30]||(e[30]=l=>t.value.healthInsuranceNumber=l),placeholder:"請輸入健保編號"},null,8,["modelValue"])]),_:1}),a(i,{label:"稅籍編號"},{default:o(()=>[a(r,{modelValue:t.value.taxRegistrationNumber,"onUpdate:modelValue":e[31]||(e[31]=l=>t.value.taxRegistrationNumber=l),placeholder:"請輸入稅籍編號"},null,8,["modelValue"])]),_:1})]),n("div",ll,[e[84]||(e[84]=n("h3",{class:"form-section-title"},"排班規則",-1)),a(i,{label:"預設週休二日"},{default:o(()=>[a(z,{modelValue:t.value.defaultTwoDayOff,"onUpdate:modelValue":e[32]||(e[32]=l=>t.value.defaultTwoDayOff=l),"active-text":"啟用","inactive-text":"停用","active-color":"#10b981"},null,8,["modelValue"])]),_:1}),a(i,{label:"允許臨時調班"},{default:o(()=>[a(z,{modelValue:t.value.tempChangeAllowed,"onUpdate:modelValue":e[33]||(e[33]=l=>t.value.tempChangeAllowed=l),"active-text":"允許","inactive-text":"禁止","active-color":"#10b981"},null,8,["modelValue"])]),_:1}),a(i,{label:"排班管理者"},{default:o(()=>[a(v,{modelValue:t.value.deptManager,"onUpdate:modelValue":e[34]||(e[34]=l=>t.value.deptManager=l),placeholder:"選擇管理者",style:{width:"100%"},clearable:""},{default:o(()=>[(b(!0),N(x,null,j(J.value,l=>(b(),M(c,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"排班備註"},{default:o(()=>[a(r,{modelValue:t.value.scheduleNotes,"onUpdate:modelValue":e[35]||(e[35]=l=>t.value.scheduleNotes=l),type:"textarea",rows:3,placeholder:"例如換班審核流程、注意事項"},null,8,["modelValue"])]),_:1})]),n("div",al,[e[85]||(e[85]=n("h3",{class:"form-section-title"},"中場休息設定",-1)),a(i,{label:"是否啟用全局中場休息設定"},{default:o(()=>[a(z,{modelValue:t.value.enableGlobalBreak,"onUpdate:modelValue":e[36]||(e[36]=l=>t.value.enableGlobalBreak=l),"active-text":"啟用","inactive-text":"停用","active-color":"#10b981"},null,8,["modelValue"])]),_:1}),a(i,{label:"全局休息時間 (分鐘)"},{default:o(()=>[a(Q,{modelValue:t.value.breakMinutes,"onUpdate:modelValue":e[37]||(e[37]=l=>t.value.breakMinutes=l),min:0,max:240,disabled:!t.value.enableGlobalBreak,style:{width:"200px"}},null,8,["modelValue","disabled"])]),_:1}),a(i,{label:"是否允許多段休息"},{default:o(()=>[a(z,{modelValue:t.value.allowMultiBreak,"onUpdate:modelValue":e[38]||(e[38]=l=>t.value.allowMultiBreak=l),disabled:!t.value.enableGlobalBreak,"active-text":"允許","inactive-text":"不允許","active-color":"#10b981"},null,8,["modelValue","disabled"])]),_:1})])],64)):(b(),N("div",tl,[e[86]||(e[86]=n("h3",{class:"form-section-title"},"小單位資訊",-1)),a(i,{label:"所屬部門",required:""},{default:o(()=>[a(v,{modelValue:t.value.department,"onUpdate:modelValue":e[39]||(e[39]=l=>t.value.department=l),placeholder:"選擇部門",style:{width:"100%"}},{default:o(()=>[(b(!0),N(x,null,j(w.value,l=>(b(),M(c,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"小單位名稱",required:""},{default:o(()=>[a(r,{modelValue:t.value.name,"onUpdate:modelValue":e[40]||(e[40]=l=>t.value.name=l),placeholder:"請輸入小單位名稱"},null,8,["modelValue"])]),_:1}),a(i,{label:"代碼"},{default:o(()=>[a(r,{modelValue:t.value.code,"onUpdate:modelValue":e[41]||(e[41]=l=>t.value.code=l),placeholder:"請輸入代碼"},null,8,["modelValue"])]),_:1}),a(i,{label:"單位名稱"},{default:o(()=>[a(r,{modelValue:t.value.unitName,"onUpdate:modelValue":e[42]||(e[42]=l=>t.value.unitName=l),placeholder:"請輸入單位名稱"},null,8,["modelValue"])]),_:1}),a(i,{label:"位置"},{default:o(()=>[a(r,{modelValue:t.value.location,"onUpdate:modelValue":e[43]||(e[43]=l=>t.value.location=l),placeholder:"請輸入位置"},null,8,["modelValue"])]),_:1}),a(i,{label:"連絡電話"},{default:o(()=>[a(r,{modelValue:t.value.phone,"onUpdate:modelValue":e[44]||(e[44]=l=>t.value.phone=l),placeholder:"請輸入連絡電話"},null,8,["modelValue"])]),_:1}),a(i,{label:"部門主管"},{default:o(()=>[a(r,{modelValue:t.value.manager,"onUpdate:modelValue":e[45]||(e[45]=l=>t.value.manager=l),placeholder:"請輸入主管姓名"},null,8,["modelValue"])]),_:1}),a(i,{label:"負責人"},{default:o(()=>[a(r,{modelValue:t.value.responsiblePerson,"onUpdate:modelValue":e[46]||(e[46]=l=>t.value.responsiblePerson=l),placeholder:"請輸入負責人姓名"},null,8,["modelValue"])]),_:1}),a(i,{label:"機構代碼"},{default:o(()=>[a(r,{modelValue:t.value.institutionCode,"onUpdate:modelValue":e[47]||(e[47]=l=>t.value.institutionCode=l),placeholder:"請輸入機構代碼"},null,8,["modelValue"])]),_:1}),a(i,{label:"統一編號"},{default:o(()=>[a(r,{modelValue:t.value.uniformNumber,"onUpdate:modelValue":e[48]||(e[48]=l=>t.value.uniformNumber=l),placeholder:"請輸入統一編號",maxlength:"8"},null,8,["modelValue"])]),_:1}),a(i,{label:"勞保證號"},{default:o(()=>[a(r,{modelValue:t.value.laborInsuranceNumber,"onUpdate:modelValue":e[49]||(e[49]=l=>t.value.laborInsuranceNumber=l),placeholder:"請輸入勞保證號"},null,8,["modelValue"])]),_:1}),a(i,{label:"健保編號"},{default:o(()=>[a(r,{modelValue:t.value.healthInsuranceNumber,"onUpdate:modelValue":e[50]||(e[50]=l=>t.value.healthInsuranceNumber=l),placeholder:"請輸入健保編號"},null,8,["modelValue"])]),_:1}),a(i,{label:"稅籍編號"},{default:o(()=>[a(r,{modelValue:t.value.taxRegistrationNumber,"onUpdate:modelValue":e[51]||(e[51]=l=>t.value.taxRegistrationNumber=l),placeholder:"請輸入稅籍編號"},null,8,["modelValue"])]),_:1}),a(i,{label:"人力需求數"},{default:o(()=>[a(Q,{modelValue:t.value.headcount,"onUpdate:modelValue":e[52]||(e[52]=l=>t.value.headcount=l),min:0,placeholder:"請輸入人力需求數"},null,8,["modelValue"])]),_:1}),a(i,{label:"班表拉選"},{default:o(()=>[a(v,{modelValue:t.value.shiftId,"onUpdate:modelValue":e[53]||(e[53]=l=>t.value.shiftId=l),placeholder:"選擇班別",style:{width:"100%"},clearable:""},{default:o(()=>[(b(!0),N(x,null,j(q.value,l=>(b(),M(c,{key:l._id,label:ne(l),value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]))]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ul=re(nl,[["__scopeId","data-v-308ccbe8"]]),il={__name:"OrgDepartmentSettingView",setup(Y){return(D,U)=>(b(),M(ul))}};export{il as default};
