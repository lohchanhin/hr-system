import{a as x}from"./api-D_KH7keX.js";import{_ as ie,r as g,x as A,j as re,q as X,c as k,o as p,b as o,d as a,t as c,w as n,e as V,g as b,F as I,l as O,y as me,k as $}from"./index-CNfrKmRS.js";const ve={class:"org-dept-setting"},pe={class:"page-header"},fe={class:"header-stats"},be={class:"stat-item"},ce={class:"stat-number"},Ve={class:"stat-item"},ge={class:"stat-number"},_e={class:"stat-item"},ke={class:"stat-number"},ye={class:"tab-content"},we={class:"content-header"},he={class:"table-container"},Ue={class:"org-info"},Ce={class:"org-details"},Ne={class:"org-name"},xe={class:"org-unit"},Ie={class:"action-buttons"},Be={class:"tab-content"},Me={class:"content-header"},$e={class:"header-actions"},Se={class:"table-container"},Te={class:"dept-info"},je={class:"dept-details"},Oe={class:"dept-name"},ze={class:"dept-unit"},Le={class:"action-buttons"},Ae={class:"tab-content"},De={class:"content-header"},Ge={class:"header-actions"},qe={key:0,class:"current-dept"},Fe={class:"table-container"},Pe={class:"sub-info"},Ee={class:"sub-details"},Je={class:"sub-name"},We={class:"sub-unit"},He={class:"headcount-info"},Ke={class:"action-buttons"},Qe={class:"form-section"},Re={class:"form-section"},Xe={class:"form-section"},Ye={class:"form-section"},Ze={class:"form-section"},el={class:"form-section"},ll={key:2,class:"form-section"},al={class:"dialog-footer"},tl={__name:"OrgDepartmentSetting",setup(Y){const D=g("org"),h=g([]),y=g([]),B=g([]),N=g(""),U=g(""),E=g([]),J=g(!1),z=g(!1),t=g(q("org")),_=g("org"),S=g(null),W=g([]),Z=A(()=>N.value?y.value.filter(s=>s.organization===N.value):y.value),ee=A(()=>U.value?B.value.filter(s=>s.department===U.value):B.value),H=A(()=>{const s=y.value.find(e=>e._id===U.value);return s?s.name:""}),le=A(()=>{const s=_.value==="org"?"機構":_.value==="dept"?"部門":"小單位";return`${S.value===null?"新增":"編輯"}${s}`});function G(s){return s==="org"?"/api/organizations":s==="dept"?"/api/departments":"/api/sub-departments"}async function M(s,e){let d=G(s);e&&(d+=`?${s==="dept"?"organization":"department"}=${e}`);const u=await x(d);if(u.ok){const r=await u.json();s==="org"?h.value=r:s==="dept"?y.value=r:B.value=r.map(f=>({...f,shiftId:f.shiftId??f.shift??""}))}}async function K(){await Promise.all([M("org"),M("dept",N.value),M("sub",U.value)]),await Q()}function q(s){return s==="org"?{name:"",systemCode:"",unitName:"",orgCode:"",taxIdNumber:"",laborInsuranceNo:"",healthInsuranceNo:"",taxCode:"",address:"",phone:"",principal:""}:s==="dept"?{name:"",code:"",unitName:"",location:"",phone:"",manager:"",organization:"",defaultTwoDayOff:!0,tempChangeAllowed:!1,deptManager:"",scheduleNotes:"",enableGlobalBreak:!1,breakMinutes:60,allowMultiBreak:!1,breakSettingId:""}:{name:"",code:"",unitName:"",location:"",phone:"",manager:"",headcount:0,shiftId:"",department:""}}async function T(s,e=null){if(_.value=s,s==="sub"&&await Q(!0),e!==null){S.value=e;const d=s==="org"?h.value[e]:s==="dept"?y.value[e]:B.value[e];if(t.value={...q(s),...d},s==="sub"){const u=(d==null?void 0:d.shiftId)??(d==null?void 0:d.shift)??"";t.value.shiftId=u?u.toString():"",delete t.value.shift}if(s==="dept"){const u=await ne(d==null?void 0:d._id);u&&(t.value={...t.value,...u})}}else S.value=null,t.value=q(s),s==="dept"&&(t.value.organization=N.value),s==="sub"&&(t.value.department=U.value);z.value=!0}async function ae(){var f,C,w;const s=G(_.value),e=_.value==="org"?h:_.value==="dept"?y:B;let d={...t.value};if(_.value==="dept"){const{enableGlobalBreak:v,breakMinutes:P,allowMultiBreak:m,breakSettingId:i,...j}=d;d=j}_.value==="sub"&&delete d.shift;let u;if(S.value===null)u=await x(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});else{const v=e.value[S.value]._id;u=await x(`${s}/${v}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})}let r=null;if(u&&u.ok&&_.value==="dept"&&(((C=(f=u.headers)==null?void 0:f.get)==null?void 0:C.call(f,"content-type"))||"").includes("application/json")&&typeof u.json=="function")try{r=await u.json()}catch{r=null}if(u&&u.ok){if(_.value==="dept"){const v=t.value._id||(r==null?void 0:r._id)||(r==null?void 0:r.id)||((w=e.value[S.value])==null?void 0:w._id);v&&await se(v)}await K(),z.value=!1}}function F(s,e){const d=s==="org"?h:s==="dept"?y:B,u=d.value[e]._id;x(`${G(s)}/${u}`,{method:"DELETE"}).then(r=>{r.ok&&d.value.splice(e,1)})}async function te(){const s=await x("/api/dept-managers");s.ok&&(W.value=await s.json())}function oe(s){if(!s)return"";const e=s.name||"",d=s.code||"";return e&&d?`${e} (${d})`:e||d||"未命名班別"}async function Q(s=!1){if(!(J.value&&!s))try{const e=await x("/api/shifts");if(e.ok){const d=await e.json();E.value=Array.isArray(d==null?void 0:d.shifts)?d.shifts:Array.isArray(d)?d:[],J.value=!0}}catch(e){console.error(e)}}async function ne(s){if(!s)return null;try{const e=await x(`/api/break-settings?department=${s}`);if(e.ok){const d=await e.json(),u=Array.isArray(d)?d[0]:d;if(u)return{breakSettingId:u._id||"",enableGlobalBreak:!!u.enableGlobalBreak,breakMinutes:typeof u.breakMinutes=="number"?u.breakMinutes:60,allowMultiBreak:!!u.allowMultiBreak}}}catch(e){console.error(e)}return null}async function se(s){var f,C;const e={department:s,enableGlobalBreak:!!t.value.enableGlobalBreak,breakMinutes:Number(t.value.breakMinutes??0),allowMultiBreak:!!t.value.allowMultiBreak};let d="/api/break-settings",u="POST";t.value.breakSettingId&&(d+=`/${t.value.breakSettingId}`,u="PUT");const r=await x(d,{method:u,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(r&&r.ok){if((((C=(f=r.headers)==null?void 0:f.get)==null?void 0:C.call(f,"content-type"))||"").includes("application/json")&&typeof r.json=="function")try{const v=await r.json();v!=null&&v._id&&(t.value.breakSettingId=v._id)}catch(v){console.error(v)}return!0}return!1}return re(()=>{K(),te()}),X(N,s=>{M("dept",s)}),X(U,s=>{M("sub",s)}),(s,e)=>{const d=V("el-button"),u=V("el-table-column"),r=V("el-tag"),f=V("el-table"),C=V("el-tab-pane"),w=V("el-option"),v=V("el-select"),P=V("el-tabs"),m=V("el-input"),i=V("el-form-item"),j=V("el-switch"),R=V("el-input-number"),de=V("el-form"),ue=V("el-dialog");return p(),k("div",ve,[o("div",pe,[e[47]||(e[47]=o("div",{class:"header-content"},[o("h1",{class:"page-title"},"機構與部門設定"),o("p",{class:"page-description"},"管理組織架構、部門層級和小單位配置")],-1)),o("div",fe,[o("div",be,[o("div",ce,c(h.value.length),1),e[44]||(e[44]=o("div",{class:"stat-label"},"機構",-1))]),o("div",Ve,[o("div",ge,c(y.value.length),1),e[45]||(e[45]=o("div",{class:"stat-label"},"部門",-1))]),o("div",_e,[o("div",ke,c(B.value.length),1),e[46]||(e[46]=o("div",{class:"stat-label"},"小單位",-1))])])]),a(P,{modelValue:D.value,"onUpdate:modelValue":e[7]||(e[7]=l=>D.value=l),type:"card",class:"org-tabs"},{default:n(()=>[a(C,{name:"org"},{label:n(()=>e[48]||(e[48]=[o("div",{class:"tab-label"},[o("i",{class:"el-icon-office-building"}),o("span",null,"機構管理")],-1)])),default:n(()=>[o("div",ye,[o("div",we,[e[50]||(e[50]=o("h2",{class:"section-title"},"機構列表",-1)),a(d,{type:"primary",onClick:e[0]||(e[0]=l=>T("org")),class:"add-btn"},{default:n(()=>e[49]||(e[49]=[o("i",{class:"el-icon-plus"},null,-1),b(" 新增機構 ")])),_:1})]),o("div",he,[a(f,{data:h.value,class:"data-table","header-cell-style":{background:"#f8fafc",color:"#475569",fontWeight:"600"},"row-style":{height:"56px"}},{default:n(()=>[a(u,{prop:"name",label:"機構名稱","min-width":"200"},{default:n(({row:l})=>[o("div",Ue,[e[51]||(e[51]=o("div",{class:"org-icon"},[o("i",{class:"el-icon-office-building"})],-1)),o("div",Ce,[o("div",Ne,c(l.name),1),o("div",xe,c(l.unitName||"未設定"),1)])])]),_:1}),a(u,{prop:"systemCode",label:"系統代碼",width:"140"},{default:n(({row:l})=>[a(r,{class:"code-tag"},{default:n(()=>[b(c(l.systemCode||"-"),1)]),_:2},1024)]),_:1}),a(u,{prop:"phone",label:"聯絡電話",width:"150"}),a(u,{prop:"principal",label:"負責人",width:"120"}),a(u,{label:"操作",width:"200",fixed:"right"},{default:n(({$index:l})=>[o("div",Ie,[a(d,{type:"primary",size:"small",onClick:L=>T("org",l),class:"edit-btn"},{default:n(()=>e[52]||(e[52]=[o("i",{class:"el-icon-edit"},null,-1),b(" 編輯 ")])),_:2},1032,["onClick"]),a(d,{type:"danger",size:"small",onClick:L=>F("org",l),class:"delete-btn"},{default:n(()=>e[53]||(e[53]=[o("i",{class:"el-icon-delete"},null,-1),b(" 刪除 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])])]),_:1}),a(C,{name:"dept"},{label:n(()=>e[54]||(e[54]=[o("div",{class:"tab-label"},[o("i",{class:"el-icon-s-grid"}),o("span",null,"部門管理")],-1)])),default:n(()=>[o("div",Be,[o("div",Me,[e[56]||(e[56]=o("h2",{class:"section-title"},"部門列表",-1)),o("div",$e,[a(v,{modelValue:N.value,"onUpdate:modelValue":e[1]||(e[1]=l=>N.value=l),placeholder:"篩選機構",class:"filter-select",onChange:e[2]||(e[2]=l=>M("dept",N.value)),clearable:""},{default:n(()=>[(p(!0),k(I,null,O(h.value,l=>(p(),$(w,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(d,{type:"primary",onClick:e[3]||(e[3]=l=>T("dept")),class:"add-btn"},{default:n(()=>e[55]||(e[55]=[o("i",{class:"el-icon-plus"},null,-1),b(" 新增部門 ")])),_:1})])]),o("div",Se,[a(f,{data:Z.value,class:"data-table","header-cell-style":{background:"#f8fafc",color:"#475569",fontWeight:"600"},"row-style":{height:"56px"}},{default:n(()=>[a(u,{prop:"name",label:"部門名稱","min-width":"200"},{default:n(({row:l})=>[o("div",Te,[e[57]||(e[57]=o("div",{class:"dept-icon"},[o("i",{class:"el-icon-s-grid"})],-1)),o("div",je,[o("div",Oe,c(l.name),1),o("div",ze,c(l.unitName||"未設定"),1)])])]),_:1}),a(u,{prop:"code",label:"部門代碼",width:"140"},{default:n(({row:l})=>[a(r,{type:"success",class:"code-tag"},{default:n(()=>[b(c(l.code||"-"),1)]),_:2},1024)]),_:1}),a(u,{prop:"location",label:"位置",width:"150"}),a(u,{prop:"manager",label:"部門主管",width:"120"}),a(u,{label:"操作",width:"200",fixed:"right"},{default:n(({$index:l})=>[o("div",Le,[a(d,{type:"primary",size:"small",onClick:L=>T("dept",l),class:"edit-btn"},{default:n(()=>e[58]||(e[58]=[o("i",{class:"el-icon-edit"},null,-1),b(" 編輯 ")])),_:2},1032,["onClick"]),a(d,{type:"danger",size:"small",onClick:L=>F("dept",l),class:"delete-btn"},{default:n(()=>e[59]||(e[59]=[o("i",{class:"el-icon-delete"},null,-1),b(" 刪除 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])])]),_:1}),a(C,{name:"sub"},{label:n(()=>e[60]||(e[60]=[o("div",{class:"tab-label"},[o("i",{class:"el-icon-menu"}),o("span",null,"小單位管理")],-1)])),default:n(()=>[o("div",Ae,[o("div",De,[e[62]||(e[62]=o("h2",{class:"section-title"},"小單位列表",-1)),o("div",Ge,[a(v,{modelValue:U.value,"onUpdate:modelValue":e[4]||(e[4]=l=>U.value=l),placeholder:"篩選部門",class:"filter-select",onChange:e[5]||(e[5]=l=>M("sub",U.value)),clearable:""},{default:n(()=>[(p(!0),k(I,null,O(y.value,l=>(p(),$(w,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(d,{type:"primary",onClick:e[6]||(e[6]=l=>T("sub")),class:"add-btn"},{default:n(()=>e[61]||(e[61]=[o("i",{class:"el-icon-plus"},null,-1),b(" 新增小單位 ")])),_:1})])]),H.value?(p(),k("div",qe,"目前部門："+c(H.value),1)):me("",!0),o("div",Fe,[a(f,{data:ee.value,class:"data-table","header-cell-style":{background:"#f8fafc",color:"#475569",fontWeight:"600"},"row-style":{height:"56px"}},{default:n(()=>[a(u,{prop:"name",label:"小單位名稱","min-width":"200"},{default:n(({row:l})=>[o("div",Pe,[e[63]||(e[63]=o("div",{class:"sub-icon"},[o("i",{class:"el-icon-menu"})],-1)),o("div",Ee,[o("div",Je,c(l.name),1),o("div",We,c(l.unitName||"未設定"),1)])])]),_:1}),a(u,{prop:"code",label:"代碼",width:"120"},{default:n(({row:l})=>[a(r,{type:"info",class:"code-tag"},{default:n(()=>[b(c(l.code||"-"),1)]),_:2},1024)]),_:1}),a(u,{prop:"headcount",label:"人力需求",width:"100"},{default:n(({row:l})=>[o("div",He,[e[64]||(e[64]=o("i",{class:"el-icon-user"},null,-1)),b(" "+c(l.headcount||0),1)])]),_:1}),a(u,{prop:"manager",label:"主管",width:"120"}),a(u,{label:"操作",width:"200",fixed:"right"},{default:n(({$index:l})=>[o("div",Ke,[a(d,{type:"primary",size:"small",onClick:L=>T("sub",l),class:"edit-btn"},{default:n(()=>e[65]||(e[65]=[o("i",{class:"el-icon-edit"},null,-1),b(" 編輯 ")])),_:2},1032,["onClick"]),a(d,{type:"danger",size:"small",onClick:L=>F("sub",l),class:"delete-btn"},{default:n(()=>e[66]||(e[66]=[o("i",{class:"el-icon-delete"},null,-1),b(" 刪除 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])])]),_:1})]),_:1},8,["modelValue"]),a(ue,{modelValue:z.value,"onUpdate:modelValue":e[43]||(e[43]=l=>z.value=l),title:le.value,width:"600px",class:"form-dialog"},{footer:n(()=>[o("div",al,[a(d,{onClick:e[42]||(e[42]=l=>z.value=!1),class:"cancel-btn"},{default:n(()=>e[74]||(e[74]=[b("取消")])),_:1}),a(d,{type:"primary",onClick:ae,class:"save-btn"},{default:n(()=>e[75]||(e[75]=[o("i",{class:"el-icon-check"},null,-1),b(" 儲存 ")])),_:1})])]),default:n(()=>[a(de,{model:t.value,"label-width":"120px",class:"dialog-form"},{default:n(()=>[_.value==="org"?(p(),k(I,{key:0},[o("div",Qe,[e[67]||(e[67]=o("h3",{class:"form-section-title"},"基本資訊",-1)),a(i,{label:"機構名稱",required:""},{default:n(()=>[a(m,{modelValue:t.value.name,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.name=l),placeholder:"請輸入機構名稱"},null,8,["modelValue"])]),_:1}),a(i,{label:"系統代碼"},{default:n(()=>[a(m,{modelValue:t.value.systemCode,"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.systemCode=l),placeholder:"請輸入系統代碼"},null,8,["modelValue"])]),_:1}),a(i,{label:"單位名稱"},{default:n(()=>[a(m,{modelValue:t.value.unitName,"onUpdate:modelValue":e[10]||(e[10]=l=>t.value.unitName=l),placeholder:"請輸入單位名稱"},null,8,["modelValue"])]),_:1}),a(i,{label:"機構代碼"},{default:n(()=>[a(m,{modelValue:t.value.orgCode,"onUpdate:modelValue":e[11]||(e[11]=l=>t.value.orgCode=l),placeholder:"請輸入機構代碼"},null,8,["modelValue"])]),_:1})]),o("div",Re,[e[68]||(e[68]=o("h3",{class:"form-section-title"},"證照資訊",-1)),a(i,{label:"統一編號"},{default:n(()=>[a(m,{modelValue:t.value.taxIdNumber,"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.taxIdNumber=l),placeholder:"請輸入統一編號"},null,8,["modelValue"])]),_:1}),a(i,{label:"勞保編號"},{default:n(()=>[a(m,{modelValue:t.value.laborInsuranceNo,"onUpdate:modelValue":e[13]||(e[13]=l=>t.value.laborInsuranceNo=l),placeholder:"請輸入勞保編號"},null,8,["modelValue"])]),_:1}),a(i,{label:"健保編號"},{default:n(()=>[a(m,{modelValue:t.value.healthInsuranceNo,"onUpdate:modelValue":e[14]||(e[14]=l=>t.value.healthInsuranceNo=l),placeholder:"請輸入健保編號"},null,8,["modelValue"])]),_:1}),a(i,{label:"稅籍編號"},{default:n(()=>[a(m,{modelValue:t.value.taxCode,"onUpdate:modelValue":e[15]||(e[15]=l=>t.value.taxCode=l),placeholder:"請輸入稅籍編號"},null,8,["modelValue"])]),_:1})]),o("div",Xe,[e[69]||(e[69]=o("h3",{class:"form-section-title"},"聯絡資訊",-1)),a(i,{label:"位置"},{default:n(()=>[a(m,{modelValue:t.value.address,"onUpdate:modelValue":e[16]||(e[16]=l=>t.value.address=l),placeholder:"請輸入地址"},null,8,["modelValue"])]),_:1}),a(i,{label:"連絡電話"},{default:n(()=>[a(m,{modelValue:t.value.phone,"onUpdate:modelValue":e[17]||(e[17]=l=>t.value.phone=l),placeholder:"請輸入連絡電話"},null,8,["modelValue"])]),_:1}),a(i,{label:"負責人"},{default:n(()=>[a(m,{modelValue:t.value.principal,"onUpdate:modelValue":e[18]||(e[18]=l=>t.value.principal=l),placeholder:"請輸入負責人姓名"},null,8,["modelValue"])]),_:1})])],64)):_.value==="dept"?(p(),k(I,{key:1},[o("div",Ye,[e[70]||(e[70]=o("h3",{class:"form-section-title"},"部門資訊",-1)),a(i,{label:"所屬機構",required:""},{default:n(()=>[a(v,{modelValue:t.value.organization,"onUpdate:modelValue":e[19]||(e[19]=l=>t.value.organization=l),placeholder:"選擇機構",style:{width:"100%"}},{default:n(()=>[(p(!0),k(I,null,O(h.value,l=>(p(),$(w,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"部門名稱",required:""},{default:n(()=>[a(m,{modelValue:t.value.name,"onUpdate:modelValue":e[20]||(e[20]=l=>t.value.name=l),placeholder:"請輸入部門名稱"},null,8,["modelValue"])]),_:1}),a(i,{label:"部門代碼"},{default:n(()=>[a(m,{modelValue:t.value.code,"onUpdate:modelValue":e[21]||(e[21]=l=>t.value.code=l),placeholder:"請輸入部門代碼"},null,8,["modelValue"])]),_:1}),a(i,{label:"單位名稱"},{default:n(()=>[a(m,{modelValue:t.value.unitName,"onUpdate:modelValue":e[22]||(e[22]=l=>t.value.unitName=l),placeholder:"請輸入單位名稱"},null,8,["modelValue"])]),_:1}),a(i,{label:"位置"},{default:n(()=>[a(m,{modelValue:t.value.location,"onUpdate:modelValue":e[23]||(e[23]=l=>t.value.location=l),placeholder:"請輸入部門位置"},null,8,["modelValue"])]),_:1}),a(i,{label:"連絡電話"},{default:n(()=>[a(m,{modelValue:t.value.phone,"onUpdate:modelValue":e[24]||(e[24]=l=>t.value.phone=l),placeholder:"請輸入連絡電話"},null,8,["modelValue"])]),_:1}),a(i,{label:"部門主管"},{default:n(()=>[a(m,{modelValue:t.value.manager,"onUpdate:modelValue":e[25]||(e[25]=l=>t.value.manager=l),placeholder:"請輸入部門主管姓名"},null,8,["modelValue"])]),_:1})]),o("div",Ze,[e[71]||(e[71]=o("h3",{class:"form-section-title"},"排班規則",-1)),a(i,{label:"預設週休二日"},{default:n(()=>[a(j,{modelValue:t.value.defaultTwoDayOff,"onUpdate:modelValue":e[26]||(e[26]=l=>t.value.defaultTwoDayOff=l),"active-text":"啟用","inactive-text":"停用","active-color":"#10b981"},null,8,["modelValue"])]),_:1}),a(i,{label:"允許臨時調班"},{default:n(()=>[a(j,{modelValue:t.value.tempChangeAllowed,"onUpdate:modelValue":e[27]||(e[27]=l=>t.value.tempChangeAllowed=l),"active-text":"允許","inactive-text":"禁止","active-color":"#10b981"},null,8,["modelValue"])]),_:1}),a(i,{label:"排班管理者"},{default:n(()=>[a(v,{modelValue:t.value.deptManager,"onUpdate:modelValue":e[28]||(e[28]=l=>t.value.deptManager=l),placeholder:"選擇管理者",style:{width:"100%"},clearable:""},{default:n(()=>[(p(!0),k(I,null,O(W.value,l=>(p(),$(w,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"排班備註"},{default:n(()=>[a(m,{modelValue:t.value.scheduleNotes,"onUpdate:modelValue":e[29]||(e[29]=l=>t.value.scheduleNotes=l),type:"textarea",rows:3,placeholder:"例如換班審核流程、注意事項"},null,8,["modelValue"])]),_:1})]),o("div",el,[e[72]||(e[72]=o("h3",{class:"form-section-title"},"中場休息設定",-1)),a(i,{label:"是否啟用全局中場休息設定"},{default:n(()=>[a(j,{modelValue:t.value.enableGlobalBreak,"onUpdate:modelValue":e[30]||(e[30]=l=>t.value.enableGlobalBreak=l),"active-text":"啟用","inactive-text":"停用","active-color":"#10b981"},null,8,["modelValue"])]),_:1}),a(i,{label:"全局休息時間 (分鐘)"},{default:n(()=>[a(R,{modelValue:t.value.breakMinutes,"onUpdate:modelValue":e[31]||(e[31]=l=>t.value.breakMinutes=l),min:0,max:240,disabled:!t.value.enableGlobalBreak,style:{width:"200px"}},null,8,["modelValue","disabled"])]),_:1}),a(i,{label:"是否允許多段休息"},{default:n(()=>[a(j,{modelValue:t.value.allowMultiBreak,"onUpdate:modelValue":e[32]||(e[32]=l=>t.value.allowMultiBreak=l),disabled:!t.value.enableGlobalBreak,"active-text":"允許","inactive-text":"不允許","active-color":"#10b981"},null,8,["modelValue","disabled"])]),_:1})])],64)):(p(),k("div",ll,[e[73]||(e[73]=o("h3",{class:"form-section-title"},"小單位資訊",-1)),a(i,{label:"所屬部門",required:""},{default:n(()=>[a(v,{modelValue:t.value.department,"onUpdate:modelValue":e[33]||(e[33]=l=>t.value.department=l),placeholder:"選擇部門",style:{width:"100%"}},{default:n(()=>[(p(!0),k(I,null,O(y.value,l=>(p(),$(w,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(i,{label:"小單位名稱",required:""},{default:n(()=>[a(m,{modelValue:t.value.name,"onUpdate:modelValue":e[34]||(e[34]=l=>t.value.name=l),placeholder:"請輸入小單位名稱"},null,8,["modelValue"])]),_:1}),a(i,{label:"代碼"},{default:n(()=>[a(m,{modelValue:t.value.code,"onUpdate:modelValue":e[35]||(e[35]=l=>t.value.code=l),placeholder:"請輸入代碼"},null,8,["modelValue"])]),_:1}),a(i,{label:"單位名稱"},{default:n(()=>[a(m,{modelValue:t.value.unitName,"onUpdate:modelValue":e[36]||(e[36]=l=>t.value.unitName=l),placeholder:"請輸入單位名稱"},null,8,["modelValue"])]),_:1}),a(i,{label:"位置"},{default:n(()=>[a(m,{modelValue:t.value.location,"onUpdate:modelValue":e[37]||(e[37]=l=>t.value.location=l),placeholder:"請輸入位置"},null,8,["modelValue"])]),_:1}),a(i,{label:"連絡電話"},{default:n(()=>[a(m,{modelValue:t.value.phone,"onUpdate:modelValue":e[38]||(e[38]=l=>t.value.phone=l),placeholder:"請輸入連絡電話"},null,8,["modelValue"])]),_:1}),a(i,{label:"部門主管"},{default:n(()=>[a(m,{modelValue:t.value.manager,"onUpdate:modelValue":e[39]||(e[39]=l=>t.value.manager=l),placeholder:"請輸入主管姓名"},null,8,["modelValue"])]),_:1}),a(i,{label:"人力需求數"},{default:n(()=>[a(R,{modelValue:t.value.headcount,"onUpdate:modelValue":e[40]||(e[40]=l=>t.value.headcount=l),min:0,placeholder:"請輸入人力需求數"},null,8,["modelValue"])]),_:1}),a(i,{label:"班表拉選"},{default:n(()=>[a(v,{modelValue:t.value.shiftId,"onUpdate:modelValue":e[41]||(e[41]=l=>t.value.shiftId=l),placeholder:"選擇班別",style:{width:"100%"},clearable:""},{default:n(()=>[(p(!0),k(I,null,O(E.value,l=>(p(),$(w,{key:l._id,label:oe(l),value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]))]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ol=ie(tl,[["__scopeId","data-v-95b5a5db"]]),dl={__name:"OrgDepartmentSettingView",setup(Y){return(D,h)=>(p(),$(ol))}};export{dl as default};
