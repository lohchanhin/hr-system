import{_ as y,r as i,j as b,p as k,B as d,c as p,k as v,w,e as _,o as n,d as h}from"./index-CDuqm2t1.js";import{a as m}from"./api-C7rdPyNE.js";const M={class:"my-schedule"},Y={key:1},j={__name:"MySchedule",setup(x){const o=i([]),r=i({});async function u(){try{const t=await m("/api/attendance-settings");if(t.ok){const e=await t.json(),a=Array.isArray(e==null?void 0:e.shifts)?e.shifts:e;r.value=Object.fromEntries(a.map(s=>[s._id,s.name]))}}catch(t){console.error(t)}}return b(async()=>{const t=k();if(t)try{await u();const e=JSON.parse(atob(t.split(".")[1])),a=e.id||e._id||e.sub,s=d().format("YYYY-MM"),l=await m(`/api/schedules/monthly?month=${s}&employee=${a}`);if(l.ok){const f=await l.json();o.value=f.map(c=>({...c,date:d(c.date).format("YYYY/MM/DD"),shiftName:r.value[c.shiftId]||""}))}}catch(e){console.error(e)}}),(t,e)=>{const a=_("el-table-column"),s=_("el-table");return n(),p("div",M,[o.value.length?(n(),v(s,{key:0,data:o.value,class:"schedule-table"},{default:w(()=>[h(a,{prop:"date",label:"日期",width:"120"}),h(a,{prop:"shiftName",label:"班別"})]),_:1},8,["data"])):(n(),p("p",Y,"目前無排班資料"))])}}},S=y(j,[["__scopeId","data-v-1b6b0a93"]]);export{S as default};
