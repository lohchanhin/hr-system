import{_ as w,r as f,c as V,a as o,w as l,b as a,u as k,o as x,d as F,e as d,s as S}from"./index-DoO9I7c3.js";import{u as I}from"./menu-Baduhk_s.js";import{a as C}from"./api-ZZnZ46lj.js";const N={class:"front-login-container"},T={__name:"FrontLogin",setup(B){const s=k(),p=I(),t=f({role:"employee",username:"",password:""}),_=f(null);async function c(){const m=await C("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.value.username,password:t.value.password})});if(m.ok){const e=await m.json();switch(S(e.token),localStorage.setItem("role",e.user.role),localStorage.setItem("employeeId",e.user.employeeId),await p.fetchMenu(),e.user.role){case"employee":s.push("/front/attendance");break;case"supervisor":s.push("/front/schedule");break;case"admin":const n=p.items[0];n?s.push({name:n.name}):s.push("/layout");break;default:s.push("/front/attendance");break}}else alert("登入失敗")}return(m,e)=>{const n=a("el-radio"),b=a("el-radio-group"),u=a("el-form-item"),i=a("el-input"),g=a("el-button"),v=a("el-form"),y=a("el-card");return x(),V("div",N,[o(y,{class:"login-card"},{default:l(()=>[e[7]||(e[7]=F("h2",null,"前台登入",-1)),o(v,{model:t.value,ref_key:"loginFormRef",ref:_,"label-width":"80px"},{default:l(()=>[o(u,{label:"角色"},{default:l(()=>[o(b,{modelValue:t.value.role,"onUpdate:modelValue":e[0]||(e[0]=r=>t.value.role=r)},{default:l(()=>[o(n,{label:"employee"},{default:l(()=>e[3]||(e[3]=[d("員工")])),_:1}),o(n,{label:"supervisor"},{default:l(()=>e[4]||(e[4]=[d("主管")])),_:1}),o(n,{label:"admin"},{default:l(()=>e[5]||(e[5]=[d("管理員")])),_:1})]),_:1},8,["modelValue"])]),_:1}),o(u,{label:"帳號"},{default:l(()=>[o(i,{modelValue:t.value.username,"onUpdate:modelValue":e[1]||(e[1]=r=>t.value.username=r),placeholder:"隨意輸入"},null,8,["modelValue"])]),_:1}),o(u,{label:"密碼"},{default:l(()=>[o(i,{modelValue:t.value.password,"onUpdate:modelValue":e[2]||(e[2]=r=>t.value.password=r),type:"password",placeholder:"目前不做驗證"},null,8,["modelValue"])]),_:1}),o(u,null,{default:l(()=>[o(g,{type:"primary",onClick:c},{default:l(()=>e[6]||(e[6]=[d("登入")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},h=w(T,[["__scopeId","data-v-cdebc977"]]);export{h as default};
