import{a as L}from"./api-BDdHQu4t.js";import{_ as se,r as g,j as A,k as ie,m as K,c as N,o as p,b as n,d as a,v as m,w as o,e as c,g as f,F as k,t as O,n as $,q as re}from"./index-BMMrXOOS.js";const me={class:"org-dept-setting"},pe={class:"page-header"},ve={class:"header-stats"},fe={class:"stat-item"},be={class:"stat-number"},ce={class:"stat-item"},Ve={class:"stat-number"},ge={class:"stat-item"},_e={class:"stat-number"},ye={class:"tab-content"},Ne={class:"content-header"},he={class:"table-container"},we={class:"org-info"},Ce={class:"org-details"},Ue={class:"org-name"},ke={class:"org-unit"},Ie={class:"action-buttons"},xe={class:"tab-content"},$e={class:"content-header"},ze={class:"header-actions"},De={class:"table-container"},Le={class:"dept-info"},Oe={class:"dept-details"},Te={class:"dept-name"},Pe={class:"dept-unit"},Se={class:"action-buttons"},Ae={class:"tab-content"},je={class:"content-header"},qe={class:"header-actions"},Re={key:0,class:"current-dept"},Fe={class:"table-container"},Me={class:"sub-info"},Be={class:"sub-details"},Ee={class:"sub-name"},We={class:"sub-unit"},Je={class:"headcount-info"},Ge={class:"action-buttons"},He={class:"form-section"},Ke={class:"form-section"},Qe={class:"form-section"},Xe={class:"form-section"},Ye={class:"form-section"},Ze={class:"form-section"},el={key:2,class:"form-section"},ll={class:"dialog-footer"},al={__name:"OrgDepartmentSetting",setup(Q){const j=g("org"),h=g([]),_=g([]),I=g([]),U=g(""),y=g(""),M=g([]),B=g(!1),T=g(!1),t=g(R("org")),C=g("org"),P=g(null),E=g([]),X=A(()=>U.value?_.value.filter(u=>u.organization===U.value):_.value),Y=A(()=>y.value?I.value.filter(u=>u.department===y.value):I.value),W=A(()=>{const u=_.value.find(e=>e._id===y.value);return u?u.name:""}),Z=A(()=>{var v;if(!y.value)return"";const u=_.value.find(b=>b._id===y.value);if(!u)return"";const e=u.organization,d=(v=h.value.find(b=>b._id===e))==null?void 0:v.name,i=u.name;return!d||!i?"":`${d}-${i}`}),ee=A(()=>{const u=C.value==="org"?"機構":C.value==="dept"?"部門":"小單位";return`${P.value===null?"新增":"編輯"}${u}`});function q(u){return u==="org"?"/api/organizations":u==="dept"?"/api/departments":"/api/sub-departments"}async function x(u,e){let d=q(u);e&&(d+=`?${u==="dept"?"organization":"department"}=${e}`);const i=await L(d);if(i.ok){const v=await i.json();u==="org"?h.value=v:u==="dept"?_.value=v.map(b=>{const w=b.organization;let V="";return typeof w=="string"?V=w:w&&typeof w=="object"?V=w._id||w.id||"":"organizationId"in b&&(V=b.organizationId),!V&&e&&(V=e),{...b,organization:V}}):I.value=v.map(b=>({...b,shiftId:b.shiftId??b.shift??""}))}}async function J(){await Promise.all([x("org"),x("dept",U.value),x("sub",y.value)]),await G()}function R(u){return u==="org"?{name:"",systemCode:"",unitName:"",orgCode:"",taxIdNumber:"",laborInsuranceNo:"",healthInsuranceNo:"",taxCode:"",address:"",phone:"",principal:""}:u==="dept"?{name:"",code:"",unitName:"",institutionCode:"",uniformNumber:"",laborInsuranceNumber:"",healthInsuranceNumber:"",taxRegistrationNumber:"",location:"",phone:"",responsiblePerson:"",manager:"",organization:"",defaultTwoDayOff:!0,tempChangeAllowed:!1,deptManager:"",scheduleNotes:""}:{name:"",code:"",unitName:"",institutionCode:"",uniformNumber:"",laborInsuranceNumber:"",healthInsuranceNumber:"",taxRegistrationNumber:"",location:"",phone:"",responsiblePerson:"",manager:"",headcount:0,shiftId:"",department:""}}async function z(u,e=null){if(C.value=u,u==="sub"&&await G(!0),e!==null){P.value=e;const d=u==="org"?h.value[e]:u==="dept"?_.value[e]:I.value[e];if(t.value={...R(u),...d},u==="sub"){const i=(d==null?void 0:d.shiftId)??(d==null?void 0:d.shift)??"";t.value.shiftId=i?i.toString():"",delete t.value.shift}}else P.value=null,t.value=R(u),u==="dept"&&(t.value.organization=U.value),u==="sub"&&(t.value.department=y.value);T.value=!0}async function le(){const u=q(C.value),e=C.value==="org"?h:C.value==="dept"?_:I;let d={...t.value};C.value==="sub"&&delete d.shift;let i;if(P.value===null)i=await L(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});else{const v=e.value[P.value]._id;i=await L(`${u}/${v}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})}i&&i.ok&&(await J(),T.value=!1)}function F(u,e){const d=u==="org"?h:u==="dept"?_:I,i=d.value[e]._id;L(`${q(u)}/${i}`,{method:"DELETE"}).then(v=>{v.ok&&d.value.splice(e,1)})}async function ae(){const u=await L("/api/dept-managers");u.ok&&(E.value=await u.json())}function te(u){if(!u)return"";const e=u.name||"",d=u.code||"";return e&&d?`${e} (${d})`:e||d||"未命名班別"}async function G(u=!1){if(!(B.value&&!u))try{const e=await L("/api/shifts");if(e.ok){const d=await e.json();M.value=Array.isArray(d==null?void 0:d.shifts)?d.shifts:Array.isArray(d)?d:[],B.value=!0}}catch(e){console.error(e)}}return ie(()=>{J(),ae()}),K(U,u=>{x("dept",u)}),K(y,u=>{x("sub",u)}),(u,e)=>{const d=c("el-button"),i=c("el-table-column"),v=c("el-tag"),b=c("el-table"),w=c("el-tab-pane"),V=c("el-option"),D=c("el-select"),oe=c("el-tabs"),r=c("el-input"),s=c("el-form-item"),H=c("el-switch"),ne=c("el-input-number"),ue=c("el-form"),de=c("el-dialog");return p(),N("div",me,[n("div",pe,[e[56]||(e[56]=n("div",{class:"header-content"},[n("h1",{class:"page-title"},"機構與部門設定"),n("p",{class:"page-description"},"管理組織架構、部門層級和小單位配置")],-1)),n("div",ve,[n("div",fe,[n("div",be,m(h.value.length),1),e[53]||(e[53]=n("div",{class:"stat-label"},"機構",-1))]),n("div",ce,[n("div",Ve,m(_.value.length),1),e[54]||(e[54]=n("div",{class:"stat-label"},"部門",-1))]),n("div",ge,[n("div",_e,m(I.value.length),1),e[55]||(e[55]=n("div",{class:"stat-label"},"小單位",-1))])])]),a(oe,{modelValue:j.value,"onUpdate:modelValue":e[7]||(e[7]=l=>j.value=l),type:"card",class:"org-tabs"},{default:o(()=>[a(w,{name:"org"},{label:o(()=>e[57]||(e[57]=[n("div",{class:"tab-label"},[n("i",{class:"el-icon-office-building"}),n("span",null,"機構管理")],-1)])),default:o(()=>[n("div",ye,[n("div",Ne,[e[59]||(e[59]=n("h2",{class:"section-title"},"機構列表",-1)),a(d,{type:"primary",onClick:e[0]||(e[0]=l=>z("org")),class:"add-btn"},{default:o(()=>e[58]||(e[58]=[n("i",{class:"el-icon-plus"},null,-1),f(" 新增機構 ")])),_:1})]),n("div",he,[a(b,{data:h.value,class:"data-table","header-cell-style":{background:"#f8fafc",color:"#475569",fontWeight:"600"},"row-style":{height:"56px"}},{default:o(()=>[a(i,{prop:"name",label:"機構名稱","min-width":"200"},{default:o(({row:l})=>[n("div",we,[e[60]||(e[60]=n("div",{class:"org-icon"},[n("i",{class:"el-icon-office-building"})],-1)),n("div",Ce,[n("div",Ue,m(l.name),1),n("div",ke,m(l.unitName||"未設定"),1)])])]),_:1}),a(i,{prop:"systemCode",label:"系統代碼",width:"140"},{default:o(({row:l})=>[a(v,{class:"code-tag"},{default:o(()=>[f(m(l.systemCode||"-"),1)]),_:2},1024)]),_:1}),a(i,{prop:"phone",label:"聯絡電話",width:"150"}),a(i,{prop:"principal",label:"負責人",width:"120"}),a(i,{label:"操作",width:"200",fixed:"right"},{default:o(({$index:l})=>[n("div",Ie,[a(d,{type:"primary",size:"small",onClick:S=>z("org",l),class:"edit-btn"},{default:o(()=>e[61]||(e[61]=[n("i",{class:"el-icon-edit"},null,-1),f(" 編輯 ")])),_:2},1032,["onClick"]),a(d,{type:"danger",size:"small",onClick:S=>F("org",l),class:"delete-btn"},{default:o(()=>e[62]||(e[62]=[n("i",{class:"el-icon-delete"},null,-1),f(" 刪除 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])])]),_:1}),a(w,{name:"dept"},{label:o(()=>e[63]||(e[63]=[n("div",{class:"tab-label"},[n("i",{class:"el-icon-s-grid"}),n("span",null,"部門管理")],-1)])),default:o(()=>[n("div",xe,[n("div",$e,[e[65]||(e[65]=n("h2",{class:"section-title"},"部門列表",-1)),n("div",ze,[a(D,{modelValue:U.value,"onUpdate:modelValue":e[1]||(e[1]=l=>U.value=l),placeholder:"篩選機構",class:"filter-select",onChange:e[2]||(e[2]=l=>x("dept",U.value)),clearable:""},{default:o(()=>[(p(!0),N(k,null,O(h.value,l=>(p(),$(V,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(d,{type:"primary",onClick:e[3]||(e[3]=l=>z("dept")),class:"add-btn"},{default:o(()=>e[64]||(e[64]=[n("i",{class:"el-icon-plus"},null,-1),f(" 新增部門 ")])),_:1})])]),n("div",De,[a(b,{data:X.value,class:"data-table","header-cell-style":{background:"#f8fafc",color:"#475569",fontWeight:"600"},"row-style":{height:"56px"}},{default:o(()=>[a(i,{prop:"name",label:"部門名稱","min-width":"200"},{default:o(({row:l})=>[n("div",Le,[e[66]||(e[66]=n("div",{class:"dept-icon"},[n("i",{class:"el-icon-s-grid"})],-1)),n("div",Oe,[n("div",Te,m(l.name),1),n("div",Pe,m(l.unitName||"未設定"),1)])])]),_:1}),a(i,{prop:"code",label:"部門代碼",width:"140"},{default:o(({row:l})=>[a(v,{type:"success",class:"code-tag"},{default:o(()=>[f(m(l.code||"-"),1)]),_:2},1024)]),_:1}),a(i,{prop:"institutionCode",label:"機構代碼",width:"140"},{default:o(({row:l})=>[a(v,{type:"warning",class:"code-tag"},{default:o(()=>[f(m(l.institutionCode||"-"),1)]),_:2},1024)]),_:1}),a(i,{prop:"uniformNumber",label:"統一編號",width:"160"},{default:o(({row:l})=>[n("span",null,m(l.uniformNumber||"-"),1)]),_:1}),a(i,{prop:"location",label:"位置",width:"150"}),a(i,{prop:"responsiblePerson",label:"負責人",width:"120"}),a(i,{prop:"manager",label:"部門主管",width:"120"}),a(i,{label:"操作",width:"200",fixed:"right"},{default:o(({$index:l})=>[n("div",Se,[a(d,{type:"primary",size:"small",onClick:S=>z("dept",l),class:"edit-btn"},{default:o(()=>e[67]||(e[67]=[n("i",{class:"el-icon-edit"},null,-1),f(" 編輯 ")])),_:2},1032,["onClick"]),a(d,{type:"danger",size:"small",onClick:S=>F("dept",l),class:"delete-btn"},{default:o(()=>e[68]||(e[68]=[n("i",{class:"el-icon-delete"},null,-1),f(" 刪除 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])])]),_:1}),a(w,{name:"sub"},{label:o(()=>e[69]||(e[69]=[n("div",{class:"tab-label"},[n("i",{class:"el-icon-menu"}),n("span",null,"小單位管理")],-1)])),default:o(()=>[n("div",Ae,[n("div",je,[e[71]||(e[71]=n("h2",{class:"section-title"},"小單位列表",-1)),n("div",qe,[a(v,{type:"info",class:"dept-context-tag"},{default:o(()=>[f(m(Z.value||"請選擇部門"),1)]),_:1}),a(D,{modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=l=>y.value=l),placeholder:"篩選部門",class:"filter-select",onChange:e[5]||(e[5]=l=>x("sub",y.value)),clearable:""},{default:o(()=>[(p(!0),N(k,null,O(_.value,l=>(p(),$(V,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(d,{type:"primary",onClick:e[6]||(e[6]=l=>z("sub")),class:"add-btn"},{default:o(()=>e[70]||(e[70]=[n("i",{class:"el-icon-plus"},null,-1),f(" 新增小單位 ")])),_:1})])]),W.value?(p(),N("div",Re,"目前部門："+m(W.value),1)):re("",!0),n("div",Fe,[a(b,{data:Y.value,class:"data-table","header-cell-style":{background:"#f8fafc",color:"#475569",fontWeight:"600"},"row-style":{height:"56px"}},{default:o(()=>[a(i,{prop:"name",label:"小單位名稱","min-width":"200"},{default:o(({row:l})=>[n("div",Me,[e[72]||(e[72]=n("div",{class:"sub-icon"},[n("i",{class:"el-icon-menu"})],-1)),n("div",Be,[n("div",Ee,m(l.name),1),n("div",We,m(l.unitName||"未設定"),1)])])]),_:1}),a(i,{prop:"code",label:"代碼",width:"120"},{default:o(({row:l})=>[a(v,{type:"info",class:"code-tag"},{default:o(()=>[f(m(l.code||"-"),1)]),_:2},1024)]),_:1}),a(i,{prop:"institutionCode",label:"機構代碼",width:"140"},{default:o(({row:l})=>[n("span",null,m(l.institutionCode||"-"),1)]),_:1}),a(i,{prop:"uniformNumber",label:"統一編號",width:"160"},{default:o(({row:l})=>[n("span",null,m(l.uniformNumber||"-"),1)]),_:1}),a(i,{prop:"headcount",label:"人力需求",width:"100"},{default:o(({row:l})=>[n("div",Je,[e[73]||(e[73]=n("i",{class:"el-icon-user"},null,-1)),f(" "+m(l.headcount||0),1)])]),_:1}),a(i,{prop:"responsiblePerson",label:"負責人",width:"120"}),a(i,{prop:"manager",label:"主管",width:"120"}),a(i,{label:"操作",width:"200",fixed:"right"},{default:o(({$index:l})=>[n("div",Ge,[a(d,{type:"primary",size:"small",onClick:S=>z("sub",l),class:"edit-btn"},{default:o(()=>e[74]||(e[74]=[n("i",{class:"el-icon-edit"},null,-1),f(" 編輯 ")])),_:2},1032,["onClick"]),a(d,{type:"danger",size:"small",onClick:S=>F("sub",l),class:"delete-btn"},{default:o(()=>e[75]||(e[75]=[n("i",{class:"el-icon-delete"},null,-1),f(" 刪除 ")])),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])])])]),_:1})]),_:1},8,["modelValue"]),a(de,{modelValue:T.value,"onUpdate:modelValue":e[52]||(e[52]=l=>T.value=l),title:ee.value,width:"600px",class:"form-dialog"},{footer:o(()=>[n("div",ll,[a(d,{onClick:e[51]||(e[51]=l=>T.value=!1),class:"cancel-btn"},{default:o(()=>e[83]||(e[83]=[f("取消")])),_:1}),a(d,{type:"primary",onClick:le,class:"save-btn"},{default:o(()=>e[84]||(e[84]=[n("i",{class:"el-icon-check"},null,-1),f(" 儲存 ")])),_:1})])]),default:o(()=>[a(ue,{model:t.value,"label-width":"120px",class:"dialog-form"},{default:o(()=>[C.value==="org"?(p(),N(k,{key:0},[n("div",He,[e[76]||(e[76]=n("h3",{class:"form-section-title"},"基本資訊",-1)),a(s,{label:"機構名稱",required:""},{default:o(()=>[a(r,{modelValue:t.value.name,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.name=l),placeholder:"請輸入機構名稱"},null,8,["modelValue"])]),_:1}),a(s,{label:"系統代碼"},{default:o(()=>[a(r,{modelValue:t.value.systemCode,"onUpdate:modelValue":e[9]||(e[9]=l=>t.value.systemCode=l),placeholder:"請輸入系統代碼"},null,8,["modelValue"])]),_:1}),a(s,{label:"單位名稱"},{default:o(()=>[a(r,{modelValue:t.value.unitName,"onUpdate:modelValue":e[10]||(e[10]=l=>t.value.unitName=l),placeholder:"請輸入單位名稱"},null,8,["modelValue"])]),_:1}),a(s,{label:"機構代碼"},{default:o(()=>[a(r,{modelValue:t.value.orgCode,"onUpdate:modelValue":e[11]||(e[11]=l=>t.value.orgCode=l),placeholder:"請輸入機構代碼"},null,8,["modelValue"])]),_:1})]),n("div",Ke,[e[77]||(e[77]=n("h3",{class:"form-section-title"},"證照資訊",-1)),a(s,{label:"統一編號"},{default:o(()=>[a(r,{modelValue:t.value.taxIdNumber,"onUpdate:modelValue":e[12]||(e[12]=l=>t.value.taxIdNumber=l),placeholder:"請輸入統一編號"},null,8,["modelValue"])]),_:1}),a(s,{label:"勞保編號"},{default:o(()=>[a(r,{modelValue:t.value.laborInsuranceNo,"onUpdate:modelValue":e[13]||(e[13]=l=>t.value.laborInsuranceNo=l),placeholder:"請輸入勞保編號"},null,8,["modelValue"])]),_:1}),a(s,{label:"健保編號"},{default:o(()=>[a(r,{modelValue:t.value.healthInsuranceNo,"onUpdate:modelValue":e[14]||(e[14]=l=>t.value.healthInsuranceNo=l),placeholder:"請輸入健保編號"},null,8,["modelValue"])]),_:1}),a(s,{label:"稅籍編號"},{default:o(()=>[a(r,{modelValue:t.value.taxCode,"onUpdate:modelValue":e[15]||(e[15]=l=>t.value.taxCode=l),placeholder:"請輸入稅籍編號"},null,8,["modelValue"])]),_:1})]),n("div",Qe,[e[78]||(e[78]=n("h3",{class:"form-section-title"},"聯絡資訊",-1)),a(s,{label:"位置"},{default:o(()=>[a(r,{modelValue:t.value.address,"onUpdate:modelValue":e[16]||(e[16]=l=>t.value.address=l),placeholder:"請輸入地址"},null,8,["modelValue"])]),_:1}),a(s,{label:"連絡電話"},{default:o(()=>[a(r,{modelValue:t.value.phone,"onUpdate:modelValue":e[17]||(e[17]=l=>t.value.phone=l),placeholder:"請輸入連絡電話"},null,8,["modelValue"])]),_:1}),a(s,{label:"負責人"},{default:o(()=>[a(r,{modelValue:t.value.principal,"onUpdate:modelValue":e[18]||(e[18]=l=>t.value.principal=l),placeholder:"請輸入負責人姓名"},null,8,["modelValue"])]),_:1})])],64)):C.value==="dept"?(p(),N(k,{key:1},[n("div",Xe,[e[79]||(e[79]=n("h3",{class:"form-section-title"},"部門資訊",-1)),a(s,{label:"所屬機構",required:""},{default:o(()=>[a(D,{modelValue:t.value.organization,"onUpdate:modelValue":e[19]||(e[19]=l=>t.value.organization=l),placeholder:"選擇機構",style:{width:"100%"}},{default:o(()=>[(p(!0),N(k,null,O(h.value,l=>(p(),$(V,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"部門名稱",required:""},{default:o(()=>[a(r,{modelValue:t.value.name,"onUpdate:modelValue":e[20]||(e[20]=l=>t.value.name=l),placeholder:"請輸入部門名稱"},null,8,["modelValue"])]),_:1}),a(s,{label:"部門代碼"},{default:o(()=>[a(r,{modelValue:t.value.code,"onUpdate:modelValue":e[21]||(e[21]=l=>t.value.code=l),placeholder:"請輸入部門代碼"},null,8,["modelValue"])]),_:1}),a(s,{label:"單位名稱"},{default:o(()=>[a(r,{modelValue:t.value.unitName,"onUpdate:modelValue":e[22]||(e[22]=l=>t.value.unitName=l),placeholder:"請輸入單位名稱"},null,8,["modelValue"])]),_:1}),a(s,{label:"位置"},{default:o(()=>[a(r,{modelValue:t.value.location,"onUpdate:modelValue":e[23]||(e[23]=l=>t.value.location=l),placeholder:"請輸入部門位置"},null,8,["modelValue"])]),_:1}),a(s,{label:"連絡電話"},{default:o(()=>[a(r,{modelValue:t.value.phone,"onUpdate:modelValue":e[24]||(e[24]=l=>t.value.phone=l),placeholder:"請輸入連絡電話"},null,8,["modelValue"])]),_:1}),a(s,{label:"部門主管"},{default:o(()=>[a(r,{modelValue:t.value.manager,"onUpdate:modelValue":e[25]||(e[25]=l=>t.value.manager=l),placeholder:"請輸入部門主管姓名"},null,8,["modelValue"])]),_:1}),a(s,{label:"負責人"},{default:o(()=>[a(r,{modelValue:t.value.responsiblePerson,"onUpdate:modelValue":e[26]||(e[26]=l=>t.value.responsiblePerson=l),placeholder:"請輸入負責人姓名"},null,8,["modelValue"])]),_:1}),a(s,{label:"機構代碼"},{default:o(()=>[a(r,{modelValue:t.value.institutionCode,"onUpdate:modelValue":e[27]||(e[27]=l=>t.value.institutionCode=l),placeholder:"請輸入機構代碼"},null,8,["modelValue"])]),_:1})]),n("div",Ye,[e[80]||(e[80]=n("h3",{class:"form-section-title"},"法規資訊",-1)),a(s,{label:"統一編號"},{default:o(()=>[a(r,{modelValue:t.value.uniformNumber,"onUpdate:modelValue":e[28]||(e[28]=l=>t.value.uniformNumber=l),placeholder:"請輸入統一編號",maxlength:"8"},null,8,["modelValue"])]),_:1}),a(s,{label:"勞保證號"},{default:o(()=>[a(r,{modelValue:t.value.laborInsuranceNumber,"onUpdate:modelValue":e[29]||(e[29]=l=>t.value.laborInsuranceNumber=l),placeholder:"請輸入勞保證號"},null,8,["modelValue"])]),_:1}),a(s,{label:"健保編號"},{default:o(()=>[a(r,{modelValue:t.value.healthInsuranceNumber,"onUpdate:modelValue":e[30]||(e[30]=l=>t.value.healthInsuranceNumber=l),placeholder:"請輸入健保編號"},null,8,["modelValue"])]),_:1}),a(s,{label:"稅籍編號"},{default:o(()=>[a(r,{modelValue:t.value.taxRegistrationNumber,"onUpdate:modelValue":e[31]||(e[31]=l=>t.value.taxRegistrationNumber=l),placeholder:"請輸入稅籍編號"},null,8,["modelValue"])]),_:1})]),n("div",Ze,[e[81]||(e[81]=n("h3",{class:"form-section-title"},"排班規則",-1)),a(s,{label:"預設週休二日"},{default:o(()=>[a(H,{modelValue:t.value.defaultTwoDayOff,"onUpdate:modelValue":e[32]||(e[32]=l=>t.value.defaultTwoDayOff=l),"active-text":"啟用","inactive-text":"停用","active-color":"#10b981"},null,8,["modelValue"])]),_:1}),a(s,{label:"允許臨時調班"},{default:o(()=>[a(H,{modelValue:t.value.tempChangeAllowed,"onUpdate:modelValue":e[33]||(e[33]=l=>t.value.tempChangeAllowed=l),"active-text":"允許","inactive-text":"禁止","active-color":"#10b981"},null,8,["modelValue"])]),_:1}),a(s,{label:"排班管理者"},{default:o(()=>[a(D,{modelValue:t.value.deptManager,"onUpdate:modelValue":e[34]||(e[34]=l=>t.value.deptManager=l),placeholder:"選擇管理者",style:{width:"100%"},clearable:""},{default:o(()=>[(p(!0),N(k,null,O(E.value,l=>(p(),$(V,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"排班備註"},{default:o(()=>[a(r,{modelValue:t.value.scheduleNotes,"onUpdate:modelValue":e[35]||(e[35]=l=>t.value.scheduleNotes=l),type:"textarea",rows:3,placeholder:"例如換班審核流程、注意事項"},null,8,["modelValue"])]),_:1})])],64)):(p(),N("div",el,[e[82]||(e[82]=n("h3",{class:"form-section-title"},"小單位資訊",-1)),a(s,{label:"所屬部門",required:""},{default:o(()=>[a(D,{modelValue:t.value.department,"onUpdate:modelValue":e[36]||(e[36]=l=>t.value.department=l),placeholder:"選擇部門",style:{width:"100%"}},{default:o(()=>[(p(!0),N(k,null,O(_.value,l=>(p(),$(V,{key:l._id,label:l.name,value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"小單位名稱",required:""},{default:o(()=>[a(r,{modelValue:t.value.name,"onUpdate:modelValue":e[37]||(e[37]=l=>t.value.name=l),placeholder:"請輸入小單位名稱"},null,8,["modelValue"])]),_:1}),a(s,{label:"代碼"},{default:o(()=>[a(r,{modelValue:t.value.code,"onUpdate:modelValue":e[38]||(e[38]=l=>t.value.code=l),placeholder:"請輸入代碼"},null,8,["modelValue"])]),_:1}),a(s,{label:"單位名稱"},{default:o(()=>[a(r,{modelValue:t.value.unitName,"onUpdate:modelValue":e[39]||(e[39]=l=>t.value.unitName=l),placeholder:"請輸入單位名稱"},null,8,["modelValue"])]),_:1}),a(s,{label:"位置"},{default:o(()=>[a(r,{modelValue:t.value.location,"onUpdate:modelValue":e[40]||(e[40]=l=>t.value.location=l),placeholder:"請輸入位置"},null,8,["modelValue"])]),_:1}),a(s,{label:"連絡電話"},{default:o(()=>[a(r,{modelValue:t.value.phone,"onUpdate:modelValue":e[41]||(e[41]=l=>t.value.phone=l),placeholder:"請輸入連絡電話"},null,8,["modelValue"])]),_:1}),a(s,{label:"部門主管"},{default:o(()=>[a(r,{modelValue:t.value.manager,"onUpdate:modelValue":e[42]||(e[42]=l=>t.value.manager=l),placeholder:"請輸入主管姓名"},null,8,["modelValue"])]),_:1}),a(s,{label:"負責人"},{default:o(()=>[a(r,{modelValue:t.value.responsiblePerson,"onUpdate:modelValue":e[43]||(e[43]=l=>t.value.responsiblePerson=l),placeholder:"請輸入負責人姓名"},null,8,["modelValue"])]),_:1}),a(s,{label:"機構代碼"},{default:o(()=>[a(r,{modelValue:t.value.institutionCode,"onUpdate:modelValue":e[44]||(e[44]=l=>t.value.institutionCode=l),placeholder:"請輸入機構代碼"},null,8,["modelValue"])]),_:1}),a(s,{label:"統一編號"},{default:o(()=>[a(r,{modelValue:t.value.uniformNumber,"onUpdate:modelValue":e[45]||(e[45]=l=>t.value.uniformNumber=l),placeholder:"請輸入統一編號",maxlength:"8"},null,8,["modelValue"])]),_:1}),a(s,{label:"勞保證號"},{default:o(()=>[a(r,{modelValue:t.value.laborInsuranceNumber,"onUpdate:modelValue":e[46]||(e[46]=l=>t.value.laborInsuranceNumber=l),placeholder:"請輸入勞保證號"},null,8,["modelValue"])]),_:1}),a(s,{label:"健保編號"},{default:o(()=>[a(r,{modelValue:t.value.healthInsuranceNumber,"onUpdate:modelValue":e[47]||(e[47]=l=>t.value.healthInsuranceNumber=l),placeholder:"請輸入健保編號"},null,8,["modelValue"])]),_:1}),a(s,{label:"稅籍編號"},{default:o(()=>[a(r,{modelValue:t.value.taxRegistrationNumber,"onUpdate:modelValue":e[48]||(e[48]=l=>t.value.taxRegistrationNumber=l),placeholder:"請輸入稅籍編號"},null,8,["modelValue"])]),_:1}),a(s,{label:"人力需求數"},{default:o(()=>[a(ne,{modelValue:t.value.headcount,"onUpdate:modelValue":e[49]||(e[49]=l=>t.value.headcount=l),min:0,placeholder:"請輸入人力需求數"},null,8,["modelValue"])]),_:1}),a(s,{label:"班表拉選"},{default:o(()=>[a(D,{modelValue:t.value.shiftId,"onUpdate:modelValue":e[50]||(e[50]=l=>t.value.shiftId=l),placeholder:"選擇班別",style:{width:"100%"},clearable:""},{default:o(()=>[(p(!0),N(k,null,O(M.value,l=>(p(),$(V,{key:l._id,label:te(l),value:l._id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]))]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},tl=se(al,[["__scopeId","data-v-9f91b833"]]),ul={__name:"OrgDepartmentSettingView",setup(Q){return(j,h)=>(p(),$(tl))}};export{ul as default};
