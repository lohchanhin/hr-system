import{_ as j,r as c,g as B,c as M,d as i,a as e,w as t,b as n,x as f,o as S,e as _,t as y,j as b,v as D}from"./index-DZsOhPq3.js";import{a as V}from"./api-DfziFdQJ.js";const C={class:"leave-page"},L={__name:"Leave",setup(N){const l=c({leaveType:"",startDate:"",endDate:"",reason:""}),p=c([]);async function T(){const u=f()||"",a=await V("/api/leaves",{headers:{Authorization:`Bearer ${u}`}});a.ok&&(p.value=await a.json())}async function k(){const u={employee:localStorage.getItem("employeeId")||"000000000000000000000000",leaveType:l.value.leaveType,startDate:l.value.startDate,endDate:l.value.endDate,reason:l.value.reason},a=f()||"",s=await V("/api/leaves",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(u)});if(s.ok){const m=await s.json();p.value.push(m),l.value.leaveType="",l.value.startDate="",l.value.endDate="",l.value.reason=""}}return B(T),(u,a)=>{const s=n("el-option"),m=n("el-select"),d=n("el-form-item"),v=n("el-date-picker"),w=n("el-input"),x=n("el-button"),g=n("el-form"),Y=n("el-card"),r=n("el-table-column"),h=n("el-table");return S(),M("div",C,[a[5]||(a[5]=i("h2",null,"請假申請",-1)),a[6]||(a[6]=i("p",null,"這裡是「請假申請」的示範頁面。員工可提出請假，選擇假別、起迄日期等。",-1)),e(Y,{class:"leave-card"},{default:t(()=>[e(g,{model:l.value,"label-width":"100px"},{default:t(()=>[e(d,{label:"假別"},{default:t(()=>[e(m,{modelValue:l.value.leaveType,"onUpdate:modelValue":a[0]||(a[0]=o=>l.value.leaveType=o),placeholder:"選擇假別"},{default:t(()=>[e(s,{label:"特休",value:"特休"}),e(s,{label:"事假",value:"事假"}),e(s,{label:"病假",value:"病假"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"開始日期"},{default:t(()=>[e(v,{modelValue:l.value.startDate,"onUpdate:modelValue":a[1]||(a[1]=o=>l.value.startDate=o),type:"date",placeholder:"選擇開始日期"},null,8,["modelValue"])]),_:1}),e(d,{label:"結束日期"},{default:t(()=>[e(v,{modelValue:l.value.endDate,"onUpdate:modelValue":a[2]||(a[2]=o=>l.value.endDate=o),type:"date",placeholder:"選擇結束日期"},null,8,["modelValue"])]),_:1}),e(d,{label:"事由"},{default:t(()=>[e(w,{type:"textarea",modelValue:l.value.reason,"onUpdate:modelValue":a[3]||(a[3]=o=>l.value.reason=o),placeholder:"請輸入請假事由"},null,8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[e(x,{type:"primary",onClick:k},{default:t(()=>a[4]||(a[4]=[_("提交請假")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(h,{data:p.value,style:{"margin-top":"20px"}},{default:t(()=>[e(r,{prop:"leaveType",label:"假別",width:"100"}),e(r,{label:"開始日期",width:"120"},{default:t(({row:o})=>[_(y(b(D)(o.startDate).format("YYYY-MM-DD")),1)]),_:1}),e(r,{label:"結束日期",width:"120"},{default:t(({row:o})=>[_(y(b(D)(o.endDate).format("YYYY-MM-DD")),1)]),_:1}),e(r,{prop:"reason",label:"事由"})]),_:1},8,["data"])])}}},z=j(L,[["__scopeId","data-v-cfc3efa5"]]);export{z as default};
