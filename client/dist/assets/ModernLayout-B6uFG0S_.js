import{_ as z,i as A,r as C,j,k as I,l as h,w as n,e as c,u as q,o as d,d as r,b as l,n as f,g as D,c as v,m as M,F as E,p as P,h as k,t as $,q as G}from"./index-BsavUnBu.js";import{u as J}from"./menu-gi1CngEP.js";import{i as w,r as K}from"./menuIcons-CeyEi02D.js";import"./api-6fBn2dnK.js";const O="/HR.png",Q={class:"header-left"},U={class:"header-right"},W={class:"sidebar-content"},X={key:0,class:"sidebar-logo-text"},Y=["src","data-icon-key"],Z=["src","data-icon-key"],ee={key:2,class:"menu-text"},te={class:"main-content"},oe={__name:"ModernLayout",setup(ne){const u=q(),g=J(),{items:y}=A(g),m=C(""),a=C(!1);j(async()=>{y.value.length===0&&await g.fetchMenu()});function R(e){var o,i;!e||((i=(o=u.currentRoute)==null?void 0:o.value)==null?void 0:i.name)===e||(typeof u.replace=="function"?u.replace({name:e}):u.push({name:e}))}I(()=>y.value,e=>{var i,_,p;if(!Array.isArray(e)||e.length===0)return;const t=(i=e[0])==null?void 0:i.name;if(!t)return;const o=(p=(_=u.currentRoute)==null?void 0:_.value)==null?void 0:p.name;(!o||o==="Settings"||o==="ManagerLayout")&&R(t),m.value||(m.value=o&&o!=="Settings"?o:t)},{immediate:!0}),I(()=>{var e,t;return(t=(e=u.currentRoute)==null?void 0:e.value)==null?void 0:t.name},e=>{m.value=typeof e=="string"?e:""},{immediate:!0});function S(e){m.value=e,u.push({name:e})}function N(){a.value=!a.value}function b(e){return K(e)}function B(){G(),g.setMenu([]),sessionStorage.removeItem("role"),sessionStorage.removeItem("employeeId"),localStorage.removeItem("role"),localStorage.removeItem("employeeId"),u.push("/")}return(e,t)=>{const o=c("el-icon"),i=c("el-button"),_=c("el-header"),p=c("el-tooltip"),H=c("el-menu-item"),L=c("el-menu"),T=c("el-aside"),V=c("router-view"),F=c("el-main"),x=c("el-container");return d(),h(x,{class:"modern-layout"},{default:n(()=>[r(_,{class:"layout-header"},{default:n(()=>[l("div",Q,[r(i,{link:"",onClick:N,class:"collapse-btn"},{default:n(()=>[r(o,{size:"20"},{default:n(()=>[l("i",{class:f(a.value?"el-icon-menu":"el-icon-close")},null,2)]),_:1})]),_:1}),t[0]||(t[0]=l("h1",{class:"system-title"},"HR 管理系統",-1))]),l("div",U,[r(i,{type:"primary",onClick:B,class:"logout-btn"},{default:n(()=>[r(o,null,{default:n(()=>t[1]||(t[1]=[l("i",{class:"el-icon-switch-button"},null,-1)])),_:1}),t[2]||(t[2]=D(" 登出 "))]),_:1})])]),_:1}),r(x,null,{default:n(()=>[r(T,{class:f(["layout-aside",{collapsed:a.value}]),width:a.value?"88px":"280px"},{default:n(()=>[l("div",W,[l("div",{class:f(["sidebar-logo",{collapsed:a.value}])},[t[3]||(t[3]=l("img",{src:O,alt:"HR 管理系統",class:"sidebar-logo-image"},null,-1)),a.value?M("",!0):(d(),v("span",X,"HR 管理系統"))],2),r(L,{"default-active":m.value,collapse:a.value,class:"sidebar-menu","background-color":"transparent","text-color":"#ecfeff","active-text-color":"#ffffff"},{default:n(()=>[(d(!0),v(E,null,P(k(y),s=>(d(),h(H,{key:s.name,index:s.name,onClick:ae=>S(s.name),class:"menu-item"},{default:n(()=>[l("div",{class:f(["menu-item-inner",{"is-collapsed":a.value}])},[a.value?(d(),h(p,{key:0,content:s.label,placement:"right",effect:"dark"},{default:n(()=>[l("img",{src:b(s),class:"menu-icon","data-icon-key":k(w)[s.icon]?s.icon:"default",alt:""},null,8,Y)]),_:2},1032,["content"])):(d(),v("img",{key:1,src:b(s),class:"menu-icon","data-icon-key":k(w)[s.icon]?s.icon:"default",alt:""},null,8,Z)),a.value?M("",!0):(d(),v("span",ee,$(s.label),1))],2)]),_:2},1032,["index","onClick"]))),128))]),_:1},8,["default-active","collapse"])])]),_:1},8,["class","width"]),r(F,{class:"layout-main"},{default:n(()=>[l("div",te,[r(V)])]),_:1})]),_:1})]),_:1})}}},ue=z(oe,[["__scopeId","data-v-6c513e16"]]);export{ue as default};
