import{_ as L,i as N,r as h,j as T,k as y,l as k,w as n,e as l,u as F,o as v,d as a,b as s,n as x,g as V,c as z,F as A,m as j,h as D,t as E,p as H}from"./index-BclQli2C.js";import{u as P}from"./menu-To3cNDe_.js";import"./api-BujQ9oFr.js";const $={class:"header-left"},q={class:"header-right"},G={class:"sidebar-content"},J={class:"menu-text"},K={class:"main-content"},O={__name:"ModernLayout",setup(Q){const u=F(),f=P(),{items:p}=N(f),r=h(""),i=h(!1);T(async()=>{p.value.length===0&&await f.fetchMenu()});function b(e){var o,c;!e||((c=(o=u.currentRoute)==null?void 0:o.value)==null?void 0:c.name)===e||(typeof u.replace=="function"?u.replace({name:e}):u.push({name:e}))}y(()=>p.value,e=>{var c,_,d;if(!Array.isArray(e)||e.length===0)return;const t=(c=e[0])==null?void 0:c.name;if(!t)return;const o=(d=(_=u.currentRoute)==null?void 0:_.value)==null?void 0:d.name;(!o||o==="Settings"||o==="ManagerLayout")&&b(t),r.value||(r.value=o&&o!=="Settings"?o:t)},{immediate:!0}),y(()=>{var e,t;return(t=(e=u.currentRoute)==null?void 0:e.value)==null?void 0:t.name},e=>{r.value=typeof e=="string"?e:""},{immediate:!0});function w(e){r.value=e,u.push({name:e})}function C(){i.value=!i.value}function S(){H(),f.setMenu([]),sessionStorage.removeItem("role"),sessionStorage.removeItem("employeeId"),localStorage.removeItem("role"),localStorage.removeItem("employeeId"),u.push("/")}return(e,t)=>{const o=l("el-icon"),c=l("el-button"),_=l("el-header"),d=l("el-menu-item"),I=l("el-menu"),M=l("el-aside"),R=l("router-view"),B=l("el-main"),g=l("el-container");return v(),k(g,{class:"modern-layout"},{default:n(()=>[a(_,{class:"layout-header"},{default:n(()=>[s("div",$,[a(c,{link:"",onClick:C,class:"collapse-btn"},{default:n(()=>[a(o,{size:"20"},{default:n(()=>[s("i",{class:x(i.value?"el-icon-menu":"el-icon-close")},null,2)]),_:1})]),_:1}),t[0]||(t[0]=s("h1",{class:"system-title"},"HR 管理系統",-1))]),s("div",q,[a(c,{type:"primary",onClick:S,class:"logout-btn"},{default:n(()=>[a(o,null,{default:n(()=>t[1]||(t[1]=[s("i",{class:"el-icon-switch-button"},null,-1)])),_:1}),t[2]||(t[2]=V(" 登出 "))]),_:1})])]),_:1}),a(g,null,{default:n(()=>[a(M,{class:"layout-aside",width:i.value?"64px":"280px"},{default:n(()=>[s("div",G,[a(I,{"default-active":r.value,collapse:i.value,class:"sidebar-menu","background-color":"#164e63","text-color":"#ecfeff","active-text-color":"#ffffff"},{default:n(()=>[(v(!0),z(A,null,j(D(p),m=>(v(),k(d,{key:m.name,index:m.name,onClick:U=>w(m.name),class:"menu-item"},{default:n(()=>[a(o,null,{default:n(()=>[s("i",{class:x(m.icon)},null,2)]),_:2},1024),s("span",J,E(m.label),1)]),_:2},1032,["index","onClick"]))),128))]),_:1},8,["default-active","collapse"])])]),_:1},8,["width"]),a(B,{class:"layout-main"},{default:n(()=>[s("div",K,[a(R)])]),_:1})]),_:1})]),_:1})}}},Z=L(O,[["__scopeId","data-v-8075e4ba"]]);export{Z as default};
