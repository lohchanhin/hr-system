import{_ as I,r as M,g as O,c as j,d as m,a as e,w as n,b as r,x as _,v as k,o as B,e as i}from"./index-DoO9I7c3.js";import{a as b}from"./api-ZZnZ46lj.js";const A={class:"attendance-page"},D={__name:"Attendance",setup(H){const u={上班簽到:"clockIn",下班簽退:"clockOut",外出登記:"outing",中午休息:"breakIn"},f=Object.fromEntries(Object.entries(u).map(([s,t])=>[t,s])),p=M([]);async function y(){const s=_()||"",t=await b("/api/attendance",{headers:{Authorization:`Bearer ${s}`}});if(t.ok){const a=await t.json();p.value=a.map(o=>({action:f[o.action]||o.action,time:k(o.timestamp).format("YYYY-MM-DD HH:mm:ss"),remark:o.remark||""}))}}function w(){c("上班簽到")}function g(){c("下班簽退")}function v(){c("外出登記")}function C(){c("中午休息")}async function c(s){const t={action:u[s]||s,timestamp:new Date,remark:"",employee:localStorage.getItem("employeeId")||""},a=_()||"",o=await b("/api/attendance",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(t)});if(o.ok){const l=await o.json();p.value.push({action:f[l.action]||l.action,time:k(l.timestamp).format("YYYY-MM-DD HH:mm:ss"),remark:l.remark||""})}}return O(y),(s,t)=>{const a=r("el-button"),o=r("el-col"),l=r("el-row"),Y=r("el-card"),d=r("el-table-column"),x=r("el-table");return B(),j("div",A,[t[5]||(t[5]=m("h2",null,"出勤打卡",-1)),t[6]||(t[6]=m("p",null,"這裡是「出勤打卡」的示範頁面。員工可進行上/下班打卡、外出登記、補卡等。",-1)),e(Y,{class:"punch-card"},{default:n(()=>[t[4]||(t[4]=m("p",null,"示範按鈕區：",-1)),e(l,{gutter:10},{default:n(()=>[e(o,{span:6},{default:n(()=>[e(a,{type:"primary",onClick:w},{default:n(()=>t[0]||(t[0]=[i("上班簽到")])),_:1})]),_:1}),e(o,{span:6},{default:n(()=>[e(a,{type:"warning",onClick:g},{default:n(()=>t[1]||(t[1]=[i("下班簽退")])),_:1})]),_:1}),e(o,{span:6},{default:n(()=>[e(a,{type:"info",onClick:v},{default:n(()=>t[2]||(t[2]=[i("外出登記")])),_:1})]),_:1}),e(o,{span:6},{default:n(()=>[e(a,{type:"success",onClick:C},{default:n(()=>t[3]||(t[3]=[i("中午休息")])),_:1})]),_:1})]),_:1})]),_:1}),e(x,{data:p.value,style:{"margin-top":"20px"}},{default:n(()=>[e(d,{prop:"action",label:"動作",width:"120"}),e(d,{prop:"time",label:"時間",width:"180"}),e(d,{prop:"remark",label:"備註"})]),_:1},8,["data"])])}}},S=I(D,[["__scopeId","data-v-1cb3d877"]]);export{S as default};
