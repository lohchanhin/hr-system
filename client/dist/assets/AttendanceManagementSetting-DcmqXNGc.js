import{a as V}from"./api-2KlvJGqf.js";import{_ as w,r as _,j as A,c as M,b as f,d as l,w as a,e as d,o as N,g as i}from"./index-Bzhab6Am.js";const D={class:"attendance-mgmt-setting"},T={__name:"AttendanceManagementSetting",setup(I){const t=_({enableImport:!1,importFormat:"",importMapping:"",allowMakeUpClock:!0,makeUpDays:3,makeUpNeedApprove:!0,supervisorCrossDept:!1,hrAllDept:!0,employeeHistoryMonths:6,nonExtWorkAlert:!1,overtimeNoClockNotify:!0,notifyTargets:["員工","主管"]}),p=_("");async function k(){const m=await V("/api/attendance-settings");if(!m.ok)return;const e=await m.json(),n=Array.isArray(e)?e[0]:e;if(n){const s=n.management||n;Object.assign(t.value,s),p.value=n._id||""}}async function g(){const m={management:{...t.value}},e=await V("/api/attendance-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)});if(e.ok){const n=await e.json();n.management&&Object.assign(t.value,n.management),p.value=n._id||p.value,alert("已儲存「考勤管理設定」")}}return A(k),(m,e)=>{const n=d("el-divider"),s=d("el-switch"),u=d("el-form-item"),r=d("el-option"),x=d("el-select"),y=d("el-input"),b=d("el-input-number"),v=d("el-checkbox"),c=d("el-checkbox-group"),U=d("el-button"),C=d("el-form");return N(),M("div",D,[e[19]||(e[19]=f("h2",null,"考勤管理設定",-1)),l(C,{model:t.value,"label-width":"180px",class:"setting-form"},{default:a(()=>[l(n,{"content-position":"left"},{default:a(()=>e[12]||(e[12]=[i("資料匯入設定")])),_:1}),l(u,{label:"是否啟用外部刷卡匯入"},{default:a(()=>[l(s,{modelValue:t.value.enableImport,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.enableImport=o),"active-text":"啟用","inactive-text":"停用"},null,8,["modelValue"])]),_:1}),l(u,{label:"匯入檔案格式"},{default:a(()=>[l(x,{modelValue:t.value.importFormat,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.importFormat=o),placeholder:"選擇匯入檔格式",disabled:!t.value.enableImport},{default:a(()=>[l(r,{label:"CSV",value:"csv"}),l(r,{label:"Excel (XLSX)",value:"xlsx"}),l(r,{label:"TXT (定長欄位)",value:"txt"})]),_:1},8,["modelValue","disabled"])]),_:1}),l(u,{label:"匯入欄位對應 (範例)"},{default:a(()=>[l(y,{modelValue:t.value.importMapping,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.importMapping=o),placeholder:"如：員工編號→Column A, 日期→Column B, 上班時間→Column C...",disabled:!t.value.enableImport},null,8,["modelValue","disabled"])]),_:1}),l(n,{"content-position":"left"},{default:a(()=>e[13]||(e[13]=[i("補打卡審核設定")])),_:1}),l(u,{label:"是否允許員工提出補打卡"},{default:a(()=>[l(s,{modelValue:t.value.allowMakeUpClock,"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.allowMakeUpClock=o),"active-text":"允許","inactive-text":"不允許"},null,8,["modelValue"])]),_:1}),l(u,{label:"最晚可補打卡天數"},{default:a(()=>[l(b,{modelValue:t.value.makeUpDays,"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.makeUpDays=o),min:0,disabled:!t.value.allowMakeUpClock},null,8,["modelValue","disabled"]),e[14]||(e[14]=f("small",null,"（允許員工多少天之內可以補打卡）",-1))]),_:1}),l(u,{label:"補打卡是否需主管簽核"},{default:a(()=>[l(s,{modelValue:t.value.makeUpNeedApprove,"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.makeUpNeedApprove=o),disabled:!t.value.allowMakeUpClock},null,8,["modelValue","disabled"])]),_:1}),l(n,{"content-position":"left"},{default:a(()=>e[15]||(e[15]=[i("查詢權限設定")])),_:1}),l(u,{label:"主管是否可查跨部門考勤"},{default:a(()=>[l(s,{modelValue:t.value.supervisorCrossDept,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value.supervisorCrossDept=o),"active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),l(u,{label:"HR 是否可查所有部門"},{default:a(()=>[l(s,{modelValue:t.value.hrAllDept,"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.hrAllDept=o),"active-text":"是","inactive-text":"否"},null,8,["modelValue"])]),_:1}),l(u,{label:"員工可查詢歷史紀錄(月)"},{default:a(()=>[l(b,{modelValue:t.value.employeeHistoryMonths,"onUpdate:modelValue":e[8]||(e[8]=o=>t.value.employeeHistoryMonths=o),min:1},null,8,["modelValue"]),e[16]||(e[16]=f("small",null,"（員工可往前查詢幾個月？）",-1))]),_:1}),l(n,{"content-position":"left"},{default:a(()=>e[17]||(e[17]=[i("異常提醒")])),_:1}),l(u,{label:"非延長工時提醒"},{default:a(()=>[l(s,{modelValue:t.value.nonExtWorkAlert,"onUpdate:modelValue":e[9]||(e[9]=o=>t.value.nonExtWorkAlert=o),"active-text":"啟用","inactive-text":"停用"},null,8,["modelValue"])]),_:1}),l(u,{label:"逾時未打卡是否自動通知"},{default:a(()=>[l(s,{modelValue:t.value.overtimeNoClockNotify,"onUpdate:modelValue":e[10]||(e[10]=o=>t.value.overtimeNoClockNotify=o),"active-text":"啟用","inactive-text":"停用"},null,8,["modelValue"])]),_:1}),l(u,{label:"通知對象"},{default:a(()=>[l(c,{modelValue:t.value.notifyTargets,"onUpdate:modelValue":e[11]||(e[11]=o=>t.value.notifyTargets=o)},{default:a(()=>[l(v,{label:"員工"}),l(v,{label:"主管"}),l(v,{label:"HR"})]),_:1},8,["modelValue"])]),_:1}),l(u,null,{default:a(()=>[l(U,{type:"primary",onClick:g},{default:a(()=>e[18]||(e[18]=[i("儲存設定")])),_:1})]),_:1})]),_:1},8,["model"])])}}},E=w(T,[["__scopeId","data-v-19416eaa"]]);export{E as default};
