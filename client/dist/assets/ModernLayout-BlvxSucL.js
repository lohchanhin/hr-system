import{_ as O,i as P,r as k,j as B,k as U,l as $,m as N,n as C,w as o,e as s,u as G,o as f,d as u,b as l,p as _,g as J,c as p,q as I,F as K,t as Q,h as S,v as X,x as Y}from"./index-BrcIUlQl.js";import{u as Z}from"./menu-Da1uQNfb.js";import{i as z,r as ee}from"./menuIcons-CeyEi02D.js";import"./api-Dn_BGH9X.js";const te="/HR.png",ne={class:"header-left"},oe={class:"header-right"},ae={class:"sidebar-content"},le={key:0,class:"sidebar-logo-text"},se=["src","data-icon-key"],ue=["src","data-icon-key"],ie={key:2,class:"menu-text"},re={class:"main-content"},ce={__name:"ModernLayout",setup(de){const r=G(),b=Z(),{items:w}=P(b),v=k(""),y=k(!1),i=k(!1),m=k(!1),c=B(()=>i.value?!m.value:y.value),H=B(()=>i.value?"280px":y.value?"88px":"280px");function M(){if(typeof window>"u")return;const e=window.innerWidth<768;i.value=e,e||(m.value=!1)}function x(){m.value=!1}U(async()=>{typeof window<"u"&&(M(),window.addEventListener("resize",M)),w.value.length===0&&await b.fetchMenu()}),$(()=>{typeof window<"u"&&window.removeEventListener("resize",M)});function T(e){var n,d;!e||((d=(n=r.currentRoute)==null?void 0:n.value)==null?void 0:d.name)===e||(typeof r.replace=="function"?r.replace({name:e}):r.push({name:e}))}N(()=>w.value,e=>{var d,g,h;if(!Array.isArray(e)||e.length===0)return;const t=(d=e[0])==null?void 0:d.name;if(!t)return;const n=(h=(g=r.currentRoute)==null?void 0:g.value)==null?void 0:h.name;(!n||n==="Settings"||n==="ManagerLayout")&&T(t),v.value||(v.value=n&&n!=="Settings"?n:t)},{immediate:!0}),N(()=>{var e,t;return(t=(e=r.currentRoute)==null?void 0:e.value)==null?void 0:t.name},e=>{v.value=typeof e=="string"?e:"",i.value&&x()},{immediate:!0});function V(e){v.value=e,r.push({name:e}),i.value&&x()}function E(){if(i.value){m.value=!m.value;return}y.value=!y.value}function R(e){return ee(e)}function F(){Y(),b.setMenu([]),sessionStorage.removeItem("role"),sessionStorage.removeItem("employeeId"),localStorage.removeItem("role"),localStorage.removeItem("employeeId"),r.push("/")}return(e,t)=>{const n=s("el-icon"),d=s("el-button"),g=s("el-header"),h=s("el-tooltip"),A=s("el-menu-item"),W=s("el-menu"),j=s("el-aside"),q=s("router-view"),D=s("el-main"),L=s("el-container");return f(),C(L,{class:"modern-layout"},{default:o(()=>[u(g,{class:"layout-header"},{default:o(()=>[l("div",ne,[u(d,{link:"",onClick:E,class:"collapse-btn"},{default:o(()=>[u(n,{size:"20"},{default:o(()=>[l("i",{class:_(c.value?"el-icon-menu":"el-icon-close")},null,2)]),_:1})]),_:1}),t[0]||(t[0]=l("h1",{class:"system-title"},"HR 管理系統",-1))]),l("div",oe,[u(d,{type:"primary",onClick:F,class:"logout-btn"},{default:o(()=>[u(n,null,{default:o(()=>t[1]||(t[1]=[l("i",{class:"el-icon-switch-button"},null,-1)])),_:1}),t[2]||(t[2]=J(" 登出 "))]),_:1})])]),_:1}),u(L,null,{default:o(()=>[u(j,{class:_(["layout-aside",{collapsed:!i.value&&c.value,"is-open":i.value&&m.value}]),width:H.value},{default:o(()=>[l("div",ae,[l("div",{class:_(["sidebar-logo",{collapsed:c.value}])},[t[3]||(t[3]=l("img",{src:te,alt:"HR 管理系統",class:"sidebar-logo-image"},null,-1)),c.value?I("",!0):(f(),p("span",le,"HR 管理系統"))],2),u(W,{"default-active":v.value,collapse:c.value,class:"sidebar-menu","background-color":"transparent","text-color":"#ecfeff","active-text-color":"#ffffff"},{default:o(()=>[(f(!0),p(K,null,Q(S(w),a=>(f(),C(A,{key:a.name,index:a.name,onClick:fe=>V(a.name),class:"menu-item"},{default:o(()=>[l("div",{class:_(["menu-item-inner",{"is-collapsed":c.value}])},[c.value?(f(),C(h,{key:0,content:a.label,placement:"right",effect:"dark"},{default:o(()=>[l("img",{src:R(a),class:"menu-icon","data-icon-key":S(z)[a.icon]?a.icon:"default",alt:""},null,8,se)]),_:2},1032,["content"])):(f(),p("img",{key:1,src:R(a),class:"menu-icon","data-icon-key":S(z)[a.icon]?a.icon:"default",alt:""},null,8,ue)),c.value?I("",!0):(f(),p("span",ie,X(a.label),1))],2)]),_:2},1032,["index","onClick"]))),128))]),_:1},8,["default-active","collapse"])])]),_:1},8,["class","width"]),i.value?(f(),p("div",{key:0,class:_(["hr-mobile-overlay",{"is-open":m.value}]),onClick:x},null,2)):I("",!0),u(D,{class:"layout-main"},{default:o(()=>[l("div",re,[u(q)])]),_:1})]),_:1})]),_:1})}}},ye=O(ce,[["__scopeId","data-v-e31b658d"]]);export{ye as default};
