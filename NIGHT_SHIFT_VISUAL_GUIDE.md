# 夜班津貼功能視覺化說明

## 月薪資總覽頁面

### 位置
**薪資管理設定** → **月薪資總覽** 頁籤

### 表格結構

月薪資總覽表格包含以下欄位分組：

#### 基本資訊
- 員工編號
- 姓名
- 部門
- 單位
- 薪資類型

#### 工作時數
- 上班天數
- 實際工時
- 時薪

#### 請假
- 請假時數
- 請假扣款

#### 加班
- 加班時數
- 加班費

#### 基本薪資
- 基本薪資

#### 扣款項目
- 勞保費
- 健保費
- 勞退
- 其他扣款

#### 加項
```
┌─────────────────────────────────────────────────┐
│ 加項                                            │
├────────────┬────────────┬──────────────────────┤
│ 績效獎金   │ 其他獎金   │                      │
│ (元)       │ (元)       │                      │
├────────────┼────────────┼──────────────────────┤
│  5,000     │  2,000     │                      │
│  3,500     │  1,500     │                      │
│  4,000     │  2,500     │                      │
└────────────┴────────────┴──────────────────────┘
```

**注意**: 夜班津貼屬於銀行 B（獎金帳戶），不在此表格顯示。如需查看夜班津貼，請點擊員工的「詳細」按鈕。

#### 實發金額
- 實發金額（合計）

### 顯示範例

#### 夜班員工（王小明）
```
員工編號: EMP001
姓名: 王小明
部門: 營運部
單位: 客服一組
薪資類型: 月薪

工作時數:
  - 上班天數: 22 天
  - 實際工時: 176.0 小時
  - 時薪: 166.67 元

請假:
  - 請假時數: 8.0 小時
  - 請假扣款: 1,333 元

加班:
  - 加班時數: 6.0 小時
  - 加班費: 1,333 元

基本薪資: 40,000 元

扣款項目:
  - 勞保費: 891 元
  - 健保費: 567 元
  - 勞退: 2,400 元
  - 其他扣款: 0 元

加項:
  - 績效獎金: 5,000 元
  - 其他獎金: 2,000 元

夜班資訊:（點擊「詳細」查看）⭐
  - 夜班天數: 18 天
  - 夜班時數: 144.0 小時
  - 夜班津貼: 7,933 元

實發金額: 51,072 元
```

#### 非夜班員工（李美玲）
```
員工編號: EMP002
姓名: 李美玲
部門: 營運部
單位: 行政組
薪資類型: 月薪

工作時數:
  - 上班天數: 22 天
  - 實際工時: 176.0 小時
  - 時薪: 125.00 元

請假:
  - 請假時數: 8.0 小時
  - 請假扣款: 1,000 元

加班:
  - 加班時數: 4.0 小時
  - 加班費: 665 元

基本薪資: 30,000 元

扣款項目:
  - 勞保費: 668 元
  - 健保費: 425 元
  - 勞退: 1,800 元
  - 其他扣款: 0 元

加項:
  - 績效獎金: 4,000 元
  - 其他獎金: 2,500 元

夜班資訊:（點擊「詳細」查看）
  - 夜班天數: 0 天
  - 夜班時數: 0 小時
  - 夜班津貼: 0 元

實發金額: 33,272 元
```

### 特點說明

1. **夜班津貼資訊**
   - 夜班津貼屬於銀行 B（獎金帳戶）
   - 不在月薪資總覽表格中顯示為獨立欄位
   - 點擊員工的「詳細」按鈕可查看完整的夜班統計和津貼金額
   - 夜班員工顯示實際計算或固定津貼金額
   - 非夜班員工顯示 0 元

2. **格式化顯示**
   - 使用貨幣格式（千分位逗號）
   - 右對齊
   - 統一欄寬

3. **篩選功能**
   - 可按月份篩選
   - 可按機構篩選
   - 可按部門篩選
   - 可按單位篩選
   - 可按員工姓名搜尋

4. **統計資訊**
   - 總人數
   - 薪資總額
   - 實發總額
   - 扣款總額

### 計算說明

#### 夜班津貼計算
```
夜班津貼 = 時薪 × 夜班工作時數 × 津貼倍數

範例：
時薪: 166.67 元
夜班工作時數: 7 小時/班 × 20 天 = 140 小時
津貼倍數: 0.34
夜班津貼 = 166.67 × 140 × 0.34 = 7,933 元
```

#### 實發金額計算
```
實發金額 = 基本薪資
          - 請假扣款
          - 勞保費
          - 健保費
          - 勞退
          - 其他扣款
          + 加班費
          + 夜班津貼
          + 績效獎金
          + 其他獎金

範例（王小明）：
實發金額 = 40,000
          - 1,333
          - 891
          - 567
          - 2,400
          - 0
          + 1,333
          + 7,933
          + 5,000
          + 2,000
          = 51,072 元
```

## 測試資料中的夜班員工

### 夜班員工列表
1. **王小明** (EMP001) - 夜班員工
   - 固定夜班津貼: 約 2,000-4,000 元
   - 約 80% 排班為夜班
   - 動態計算津貼: 約 7,000-8,000 元（視實際排班）

2. **陳俊宏** (EMP003) - 夜班員工
   - 固定夜班津貼: 約 2,000-4,000 元
   - 約 80% 排班為夜班
   - 動態計算津貼: 約 6,000-7,000 元（視實際排班）

3. **吳建國** (EMP005) - 夜班員工
   - 固定夜班津貼: 約 2,000-4,000 元
   - 約 80% 排班為夜班
   - 動態計算津貼: 約 5,000-6,000 元（視實際排班）

### 非夜班員工
- **李美玲** (EMP002)
- **黃淑芬** (EMP004)
- **張雅惠** (EMP006)

這些員工的夜班津貼欄位顯示為 0 元。

## 驗證步驟

### 1. 啟動系統
```bash
# 根目錄
npm run dev
```

### 2. 登入系統
- 網址: http://localhost:5173
- 帳號: admin
- 密碼: password

### 3. 進入月薪資總覽
1. 點擊左側選單「薪資管理設定」
2. 點擊「月薪資總覽」頁籤
3. 選擇月份（例如：2024-12）
4. 點擊「查詢」按鈕

### 4. 確認顯示
✅ API 返回的資料包含 nightShiftAllowance 欄位
✅ 夜班員工的津貼金額 > 0
✅ 非夜班員工的津貼金額 = 0
✅ 金額在員工詳細資料中正確顯示（貨幣格式）

## 結論

月薪資總覽已完整實現夜班津貼資料功能：
- ✅ API 資料結構包含夜班津貼欄位
- ✅ 夜班津貼屬於銀行 B（獎金帳戶）
- ✅ 在員工詳細資料中顯示完整的夜班統計和津貼金額
- ✅ 夜班員工顯示正確金額，非夜班員工顯示 0 元
- ✅ 格式化顯示美觀

測試資料包含 3 位夜班員工，約 80% 的排班為夜班，可充分測試夜班津貼功能。
